/* ring-ui 1.0.1610 */
!function(a,b){"function"==typeof define&&define.amd?define(b):a.ring=b()}(this,function(){var requirejs,require,define;!function(a){function b(a,b){return r.call(a,b)}function c(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=p.map,q=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,p.nodeIdCompat&&t.test(a[g])&&(a[g]=a[g].replace(t,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||q)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&q&&q[d]&&(i=q[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function d(b,c){return function(){return k.apply(a,s.call(arguments,0).concat([b,c]))}}function e(a){return function(b){return c(b,a)}}function f(a){return function(b){n[a]=b}}function g(c){if(b(o,c)){var d=o[c];delete o[c],q[c]=!0,j.apply(a,d)}if(!b(n,c)&&!b(q,c))throw new Error("No "+c);return n[c]}function h(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function i(a){return function(){return p&&p.config&&p.config[a]||{}}}var j,k,l,m,n={},o={},p={},q={},r=Object.prototype.hasOwnProperty,s=[].slice,t=/\.js$/;l=function(a,b){var d,f=h(a),i=f[0];return a=f[1],i&&(i=c(i,b),d=g(i)),i?a=d&&d.normalize?d.normalize(a,e(b)):c(a,b):(a=c(a,b),f=h(a),i=f[0],a=f[1],i&&(d=g(i))),{f:i?i+"!"+a:a,n:a,pr:i,p:d}},m={require:function(a){return d(a)},exports:function(a){var b=n[a];return"undefined"!=typeof b?b:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:i(a)}}},j=function(c,e,h,i){var j,k,p,r,s,t,u=[],v=typeof h;if(i=i||c,"undefined"===v||"function"===v){for(e=!e.length&&h.length?["require","exports","module"]:e,s=0;s<e.length;s+=1)if(r=l(e[s],i),k=r.f,"require"===k)u[s]=m.require(c);else if("exports"===k)u[s]=m.exports(c),t=!0;else if("module"===k)j=u[s]=m.module(c);else if(b(n,k)||b(o,k)||b(q,k))u[s]=g(k);else{if(!r.p)throw new Error(c+" missing "+k);r.p.load(r.n,d(i,!0),f(k),{}),u[s]=n[k]}p=h?h.apply(n[c],u):void 0,c&&(j&&j.exports!==a&&j.exports!==n[c]?n[c]=j.exports:p===a&&t||(n[c]=p))}else c&&(n[c]=h)},requirejs=require=k=function(b,c,d,e,f){if("string"==typeof b)return m[b]?m[b](c):g(l(b,c).f);if(!b.splice){if(p=b,p.deps&&k(p.deps,p.callback),!c)return;c.splice?(b=c,c=d,d=null):b=a}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},4),k},k.config=function(a){return k(a)},requirejs._defined=n,define=function(a,c,d){c.splice||(d=c,c=[]),b(n,a)||b(o,a)||(o[a]=[a,c,d])},define.amd={jQuery:!0}}(),define("../components/almond/almond",function(){}),define("jquery",[],function(){return jQuery}),define("global/global__events",["jquery"],function(a){var b=1,c={EVENTS_DELIM:" ",NAMESPACE_DELIM:"::",MODULE_DELIM:":",EVENT_SELECTOR:".ring-js-event",EVENT_DATA_ATTR:"ring-event",DEFAULT_EVENT:"click"},d=function(d,e,f,g){if("string"!=typeof d)return!1;var i=a.map(d.split(c.EVENTS_DELIM),function(a){var d={};e.global||(a=e.name+c.MODULE_DELIM+a);var i=a.split(c.NAMESPACE_DELIM);return d.name=i[0],d.namespace=i[1]||null,d.uid=b++,f&&(d.handler=g?h(d,f):f),d});return i},e={},f=function(a){if(!a[0])return!1;for(var b,c=a.length-1;c>=0;c--)b=a[c],e[b.name]||(e[b.name]=[]),e[b.name].push(b);return!0},g=function(a,b){var c=!1,d=b?"uid":"namespace",f=a[d],g=e[a.name];if(f){for(var h=g.length-1;h>=0;h--)g[h][d]===f&&(g.splice(h,1),c=!0);g.length||delete e[a.name]}else c=delete e[a.name];return c},h=function(a,b){return function(c){g(a,!0),b(c)}},i={};i.on=function(a,b,c,e){return"function"!=typeof c?!1:f(d(b,a,c,e))},i.one=function(a,b,c){return this.on(b,c,!0)},i.off=function(a,b){for(var c,f=!1,h=d(b,a),i=h.length-1;i>=0;i--)c=h[i],e[c.name]&&(f=g(c,!1));return f},i.when=function(b,c){var d=a.Deferred();return this.on(c,a.proxy(d,"resolve"),!0),d},i.trigger=function(a,b,c,f){var g=!0,h=d(b,a)[0],i=e[h.name];if(i)for(var j=i.length;j--;j>0)g=i[j].handler(c,f);return g},i.stateTrigger=function(a,b,d){var e=b+c.MODULE_DELIM+d,f=this.trigger;return function(a){f(e,a)}};var j={mouseenter:"hover",mouseleave:"hover"},k=function(b){var d=a(b.currentTarget),e=j[b.type]||b.type||c.DEFAULT_EVENT,f=d.data(c.EVENT_DATA_ATTR),g=function(a){return a&&(!a.type&&e===c.DEFAULT_EVENT||a.type===e)?i.trigger({global:!0},a.name||a,a.data,b):void 0};return a.isArray(f)?a.map(f,g).pop():g(f)};return a(document).delegate(c.EVENT_SELECTOR,"click.ring-event",k),c.methods=i,c.domEventHandler=k,c}),define("global/global__utils",["jquery"],function(a){var b={};return b.isDeferred=function(a){return null!=a&&"function"==typeof a.always&&"function"==typeof a.done&&"function"==typeof a.fail&&"function"==typeof a.pipe&&"function"==typeof a.progress&&"function"==typeof a.state},b.isPromise=function(a){return null!=a&&"function"==typeof a.then},b.wrapPromise=function(c){if(b.isPromise(c)&&!b.isDeferred(c)){var d=a.Deferred();return c.then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise()}return a.when(c)},b.isNode=function(a){return"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType},b.isEmptyString=function(a){return""===a.replace(/\s+/,"")},b.isFocused=function(a){return a=a[0]||a,a===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(a.type||a.href||~a.tabIndex||"true"===a.contentEditable)},b.throttle=function(a,b,c){var d,e;return b=b||250,function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}},b.uuid=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)});return b},b}),define("global/global__modules",["jquery","global/global__events","global/global__utils"],function(a,b,c){Function.prototype.bind&&-1!==Function.prototype.bind.toString().indexOf("[native code]")||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});var d={},e=[],f=function(a,b){var c={methods:{},properties:{},global:b===f.GLOBAL,name:b};this.set(c,a);for(var d,g=e.length;g--;g>0)d=e[g],this[d]=this[d].bind(this,c),this.invoke[d]=this[d]};return a.extend(f.prototype,b.methods),f.prototype.invoke=function(b,d){var e,f,g,h=this.get(d),i=h.method||h,j=!!h.override;return"function"==typeof i?(f=i.apply(null,Array.prototype.slice.call(arguments,2)),g="resolve"):(f=null,g="reject"),c.isDeferred(f)?(e=f,g=null):e=a.Deferred(),this.trigger(d),e.done(this.stateTrigger(d,"done")).fail(this.stateTrigger(d,"fail")),"function"==typeof e.always&&e.always(this.stateTrigger(d,"always")),g&&e[g](f),j?f:e.promise()},f.prototype.set=function(a,b){var c,d=a.methods,e=a.properties;for(var f in b)c=b[f],"function"==typeof c||"function"==typeof c.method?d[f]=c:e[f]=c;return!0},f.prototype.update=function(b,c){var d,e,f,g,h,i=this.get(c),j=Array.prototype.slice.call(arguments,2);if(i){for(var k=[!0,i];j.length;){if(e=j[0],f=j[1],"."===e)g=f;else for(h=j[0].split(".");d=h.pop();)g=isNaN(Number(d))?{}:[],g[d]=f,f=g;k.push(g),j.splice(0,2)}a.extend.apply(a,k)}return i},f.prototype.get=function(b,c){if("string"!=typeof c)return a.noop;var d=b.methods,e=b.properties;return d[c]?d[c]:e[c]?e[c]:a.noop},function(b,c){for(var d in b)b.hasOwnProperty(d)&&e.push(d);e.push(e.splice(a.inArray(c,e),1)[0])}(f.prototype,"invoke"),f.add=function(a,b){return"string"!=typeof a?!1:"object"!=typeof b?!1:d[a]?(d[a].set(b),!1):(d[a]=new f(b,a),!0)},f.remove=function(a){return"string"!=typeof a?!1:d[a]?a===f.GLOBAL?!1:delete d[a]:!1},f.get=function(b){return d[b]?d[b].invoke:a.noop},f.has=function(a){return!!d[a]},f.multi=function(b,e){var f=[];return"object"!=typeof e?a.Deferred().reject().promise():(a.each(e,function(e,g){var h,i,j=d[e];i=j?j.invoke(b,g):null,c.isDeferred(i)?h=i:(h=a.Deferred(),h.resolve(i)),f.push(h)}),a.when.apply(a,f))},f.GLOBAL="root",f.add(f.GLOBAL,{add:{method:f.add,override:!0},remove:{method:f.remove,override:!0},config:function(a){return f.get(f.GLOBAL).set({config:a})},init:f.multi.bind(f,"init"),update:f.multi.bind(f,"update")}),f}),define("global/global",["global/global__modules"],function(a){var b=function(b,c){if(b&&c){var d=a.get(b);return d.bind(d,c)}return a.get(b?b:a.GLOBAL)};return b});var Handlebars=function(){var a=function(){function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();return define("handlebars",function(a){return function(){var b,c;return c=function(){return Handlebars},b=c.apply(a,arguments)}}(this)),"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json",function(){}),define("global/global__helpers",["handlebars","json"],function(a){a.registerHelper("stringify",function(a){return"string"==typeof a?a:JSON.stringify(a)}),a.registerHelper("ifEqual",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),a.registerHelper("copyright",function(a){var b=(new Date).getUTCFullYear(),c="© ";return c+=a>=b?a:a+"—"+b}),a.registerHelper("ifOr",function(){for(var a=Array.prototype.slice.call(arguments,0,arguments.length-1),b=arguments[arguments.length-1],c=a.length-1;c>=0;c--)if(a[c])return b.fn(this);return b.inverse(this)})}),define("global/_global__class.hbs",["handlebars"],function(a){a.registerPartial("global__class",a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+=" ",(d=c.className)?d=d.call(a,{hash:{},data:b}):(d=a.className,d=typeof d===k?d.apply(a):d),e+=l(d)}function g(){return" ring-js-event"}function h(){return" active"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return i=c["if"].call(b,b.className,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),i=c["if"].call(b,b.event,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(i||0===i)&&(j+=i),i=c["if"].call(b,b.active,{hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e}),(i||0===i)&&(j+=i),j}))}),define("global/_global__attributes.hbs",["handlebars"],function(a){a.registerPartial("global__attributes",a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return d=c["if"].call(a,a.target,{hash:{},inverse:p.noop,fn:p.program(2,g,b),data:b}),(d||0===d)&&(e+=d),d=c["if"].call(a,a.tabIndex,{hash:{},inverse:p.noop,fn:p.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c["if"].call(a,a.title,{hash:{},inverse:p.noop,fn:p.program(6,i,b),data:b}),(d||0===d)&&(e+=d),d=c["if"].call(a,a.event,{hash:{},inverse:p.noop,fn:p.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e}function g(a,b){var d,e="";return e+=' target="',(d=c.target)?d=d.call(a,{hash:{},data:b}):(d=a.target,d=typeof d===m?d.apply(a):d),e+=n(d)+'"'}function h(a,b){var d,e="";return e+=' target="',(d=c.tabIndex)?d=d.call(a,{hash:{},data:b}):(d=a.tabIndex,d=typeof d===m?d.apply(a):d),e+=n(d)+'"'}function i(a,b){var d,e="";return e+=' title="',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===m?d.apply(a):d),e+=n(d)+'"'}function j(a,b){var d,e,f="";return f+=' data-ring-event="',e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a.event,e):o.call(a,"stringify",a.event,e)))+'"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="function",n=this.escapeExpression,o=c.helperMissing,p=this,q=c.blockHelperMissing;return k=typeof b===m?b.apply(b):b,l=q.call(b,k,{hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e}),l||0===l?l:""}))}),define("global/global__views",["jquery","handlebars","global/global__modules","global/global__utils","global/global__helpers","global/_global__class.hbs","global/_global__attributes.hbs"],function(a,b,c,d){var e={},f=function(a){this.$element=a};f.prototype.update=function(b){b instanceof a||(b=a(b)),this.$element.replaceWith(b),this.$element=b},f.prototype.hide=function(){this.$element.hide()},f.prototype.show=function(){this.$element.show()},f.render=function(a,c){var e=b.partials[a](c);return d.isEmptyString(e)?"":e};var g,h=function(b,c){var d=a.extend(!0,{},c);return"function"==typeof b?b(d):d},i={append:"appendTo",prepend:"prependTo",before:"insertBefore",after:"insertAfter",replace:"replaceWith","default":"appendTo"},j=function k(b,c,e,f,h){h=h||0;var j;if(j="string"==typeof c||d.isNode(c)?a(c):c instanceof a?c:g&&g[0]?g:g=a("body"),!j[0]&&300>h)return void setTimeout(k.bind(null,b,c,e,f,++h),10);if(!j[0]&&h>=300)return void f.reject();e=i[e]||i["default"];var l;"replaceWith"===e?(j[e](b),l=b):l=b[e](j),f.resolve(l)};return f.update=function(a){var b=e[a];if(!b)return null;var d=c.get(a),g=Array.prototype.slice.call(arguments,1);g.unshift("view");var i=d.update.apply(d,g),j=f.render(a,h(d.get("process"),i));return j?(b.update(j),b.$element):null},f.hide=function(a){var b=e[a];return b?void b.hide():null},f.show=function(a){var b=e[a];return b?void b.show():null},f.init=function(b,d,g,i,k){var l=a.Deferred(),m=c.get(b);m.set({view:k,process:i});var n=f.render(b,h(i,k));if(n){var o=a(n);j(o,d,g,l),l.done(function(a){e[b]=new f(a)}),l.fail(function(){})}else l.reject();return l},c.add(c.GLOBAL,{render:{method:f.render,override:!0}}),f}),define("popup/_popup.hbs",["handlebars"],function(a){a.registerPartial("popup",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-dropdown_"+k(typeof a===j?a.apply(a):a)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<div class="ring-dropdown',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.type)?g=g.call(b,h):(g=b.type,g=typeof g===j?g.apply(b):g),c.type||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+='"> <div class="ring-dropdown__i"> <div class="transclude ring-loader">Loading</div> </div> </div>'}))}),define("popup/popup",["jquery","global/global__views","global/global__modules","global/global__events","global/global__utils","popup/_popup.hbs"],function(a,b,c){var d,e=".ring-dropdown__i",f=".ring-menu__item",g=".ring-dropdown-toggle",h="ring-js-hover",i=a(window),j=a("body"),k=8,l=2,m="popup",n=function(e){var f=a(e.target);return f?(j&&!j.length&&(j=a("body")),o(),d=a(b.render(m,e)).hover(function(){a(this).addClass(h)},function(){a(this).removeClass(h)}),{target:f,el:d,getPos:p.bind(null,f,d,e),insertHTML:q,appendHTML:s,showLoader:r}):(c.get(m).trigger("show:fail"),!1)},o=function(a){if(d){if(a&&d.hasClass(h))return!1;d.remove(),d=null,c.get(m).trigger("hide:done")}else c.get(m).trigger("hide:fail")},p=function(a,b,c){var d,e,h,j,m,n,o;return h=a.is(g),h&&a.prev().is(f)&&(e=!0,a=a.prev()),d=a.offset(),j=d.left+a.outerWidth()/2,m=a.outerWidth(),n=b.width(),o=n/2,d.left+n>i.width()-k?d.left+=m-n:j>=o&&h&&!e&&(d.left=j-o),d.top+=a.outerHeight(),"number"==typeof c.left&&(d.left=c.left),"number"==typeof c.top&&(d.top=c.top),c.width?d.width=c.width:(m>n||c.limitWidth)&&(d.width=m-l),d},q=function(a){return j.append(this.el),this.el.find(e).html(a).parent().css(this.getPos())},r=function(){jQuery.contains(document,this.el[0])||j.append(this.el).find(e).parent().css(this.getPos())},s=function(a){return jQuery.contains(document,this.el[0])||j.append(this.el).find(e).empty(),this.el.find(e).empty().append(a).parent().css(this.getPos())};i.resize(o).scroll(function(){o(!0)}),c.add(m,{init:{method:n,override:!0},remove:{method:o,override:!0}})}),function(a,b){function c(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!1):void a.attachEvent("on"+b,c)}function d(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return y[a.which]?y[a.which]:z[a.which]?z[a.which]:String.fromCharCode(a.which).toLowerCase()}function e(a,b){return a.sort().join(",")===b.sort().join(",")}function f(a){a=a||{};var b,c=!1;for(b in E)a[b]?c=!0:E[b]=0;c||(H=!1)}function g(a,b,c,d,f,g){var h,i,j=[],k=c.type;if(!C[a])return[];for("keyup"==k&&n(a)&&(b=[a]),h=0;h<C[a].length;++h)if(i=C[a][h],(d||!i.seq||E[i.seq]==i.level)&&k==i.action&&("keypress"==k&&!c.metaKey&&!c.ctrlKey||e(b,i.modifiers))){var l=!d&&i.combo==f,m=d&&i.seq==d&&i.level==g;(l||m)&&C[a].splice(h,1),j.push(i)}return j}function h(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function i(a){return a.preventDefault?void a.preventDefault():void(a.returnValue=!1)}function j(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)}function k(a,b,c,d){J.stopCallback(b,b.target||b.srcElement,c,d)||a(b,c)===!1&&(i(b),j(b))}function l(a,b,c){var d,e=g(a,b,c),h={},i=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(i=Math.max(i,e[d].level));for(d=0;d<e.length;++d)if(e[d].seq){if(e[d].level!=i)continue;j=!0,h[e[d].seq]=1,k(e[d].callback,c,e[d].combo,e[d].seq)}else j||k(e[d].callback,c,e[d].combo);var l="keypress"==c.type&&G;c.type!=H||n(a)||l||f(h),G=j&&"keydown"==c.type}function m(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=d(a);if(b)return"keyup"==a.type&&F===b?void(F=!1):void J.handleKey(b,h(a),a)}function n(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function o(){clearTimeout(x),x=setTimeout(f,1e3)}function p(){if(!w){w={};for(var a in y)a>95&&112>a||y.hasOwnProperty(a)&&(w[y[a]]=a)}return w}function q(a,b,c){return c||(c=p()[a]?"keydown":"keypress"),"keypress"==c&&b.length&&(c="keydown"),c}function r(a,b,c,e){function g(b){return function(){H=b,++E[a],o()}}function h(b){k(c,b,a),"keyup"!==e&&(F=d(b)),setTimeout(f,10)}E[a]=0;for(var i=0;i<b.length;++i){var j=i+1===b.length,l=j?h:g(e||t(b[i+1]).action);u(b[i],l,e,a,i)}}function s(a){return"+"===a?["+"]:a.split("+")}function t(a,b){var c,d,e,f=[];for(c=s(a),e=0;e<c.length;++e)d=c[e],B[d]&&(d=B[d]),b&&"keypress"!=b&&A[d]&&(d=A[d],f.push("shift")),n(d)&&f.push(d);return b=q(d,f,b),{key:d,modifiers:f,action:b}}function u(a,b,c,d,e){D[a+":"+c]=b,a=a.replace(/\s+/g," ");var f,h=a.split(" ");return h.length>1?void r(a,h,b,c):(f=t(a,c),C[f.key]=C[f.key]||[],g(f.key,f.modifiers,{type:f.action},d,a,e),void C[f.key][d?"unshift":"push"]({callback:b,modifiers:f.modifiers,action:f.action,seq:d,level:e,combo:a}))}function v(a,b,c){for(var d=0;d<a.length;++d)u(a[d],b,c)}for(var w,x,y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},z={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},A={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},B={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},C={},D={},E={},F=!1,G=!1,H=!1,I=1;20>I;++I)y[111+I]="f"+I;for(I=0;9>=I;++I)y[I+96]=I;c(b,"keypress",m),c(b,"keydown",m),c(b,"keyup",m);var J={bind:function(a,b,c){return a=a instanceof Array?a:[a],v(a,b,c),this},unbind:function(a,b){return J.bind(a,function(){},b)},trigger:function(a,b){return D[a+":"+b]&&D[a+":"+b]({},a),this},reset:function(){return C={},D={},this},stopCallback:function(a,b){return(" "+b.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:l};a.Mousetrap=J,"function"==typeof define&&define.amd&&define("mousetrap",J)}(window,document),define("shortcuts/shortcuts",["jquery","mousetrap","global/global__modules"],function(a,b,c){var d,e="shortcuts",f="ROOT",g=".ring-js-shortcuts",h={},i=function(a,b){for(var c,e=d.length-1;e>=0;e--)if(c=h[d[e]],c&&c[b]){var f=c[b](a,b,d[e]);if(f!==!0)return f}},j=function(c){if("object"==typeof c&&"string"==typeof c.key&&"function"==typeof c.handler){if(c.scope||(c.scope=f),a.isArray(c.key))return void a.each(c.key,function(b,d){j(a.extend({},c,{key:d}))});h[c.scope]=h[c.scope]||{},h[c.scope][c.key]=c.handler,b.bind(c.key,i,c.type)}},k=function(b,c){void 0===c&&(c=b),a.each(c,function(c,d){j(a.extend({},b,{key:c,handler:d}))})},l=function(a){h[a]=null},m=function(){return d.slice(1)},n=function(b){if(b){var c=a.inArray(b,d);-1!==c&&d.splice(c,1),d.push(b)}},o=function(b){if(b){var c=a.inArray(b,d);-1!==c&&(d.length=c)}},p=function(b){if(b){var c=a.inArray(b,d);-1!==c&&d.splice(c,1)}},q=function(b){if(b){if("string"==typeof b&&(b=[b]),!a.isArray(b))return;d=[f].concat(b)}else d=[f]},r=function(a,b){return!(!h[b]||!h[b][a])},s=function(b,c){var d=a(c);return d.is(g)||d.closest(g).length?!1:d.is(":input:not(:button)")||c.contentEditable&&"true"===c.contentEditable},t=function(a){b.stopCallback="function"==typeof a?a:s};t(),q(),c.add(e,{bind:j,bindList:k,unBindList:l,trigger:{method:b.trigger,override:!0},hasKey:{method:r,override:!0},getScope:{method:m,override:!0},setScope:q,pushScope:n,popScope:o,spliceScope:p,setFilter:t})}),define("dropdown/_dropdown__class.hbs",["handlebars"],function(a){a.registerPartial("dropdown__class",a.template(function(a,b,c,d,e){function f(){return"ring-dropdown__item_action"}function g(){return"ring-link"}function h(){return"ring-dropdown__item_error"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j,k,l="",m=this,n=c.helperMissing,o="function",p=c.blockHelperMissing;return l+="ring-dropdown__item",i=m.invokePartial(d.global__class,"global__class",b,c,d,e),(i||0===i)&&(l+=i),l+=" ",k={hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e},i=c.ifOr||b.ifOr,j=i?i.call(b,b.action,b.type,k):n.call(b,"ifOr",b.action,b.type,k),(j||0===j)&&(l+=j),k={hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e},(j=c.error)?j=j.call(b,k):(j=b.error,j=typeof j===o?j.apply(b):j),c.error||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l}))}),define("dropdown/_dropdown__items.hbs",["handlebars"],function(a){a.registerPartial("dropdown__items",a.template(function(a,b,c,d,e){function f(a,b){var c,d,e="";return e+=" ",c=typeof a===q?a.apply(a):a,d=s.call(a,c,{hash:{},inverse:p.noop,fn:p.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function g(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a.separator,{hash:{},inverse:p.program(5,i,b),fn:p.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var e,f="";return f+=" ",e=p.invokePartial(d.dropdown__separator,"dropdown__separator",a,c,d,b),(e||0===e)&&(f+=e),f+=" "}function i(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a.type,{hash:{},inverse:p.program(8,k,b),fn:p.program(6,j,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function j(a,b){var e,f="";return f+=' <span class="',e=p.invokePartial(d.dropdown__class,"dropdown__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" ',e=p.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+='> <span class="ring-dropdown__item__type">',(e=c.type)?e=e.call(a,{hash:{},data:b}):(e=a.type,e=typeof e===q?e.apply(a):e),f+=r(e)+'</span> <span class="ring-dropdown__item__content">',e=p.invokePartial(d.dropdown__content,"dropdown__content",a,c,d,b),(e||0===e)&&(f+=e),f+="</span> </span> "
}function k(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a.url,{hash:{},inverse:p.program(11,m,b),fn:p.program(9,l,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function l(a,b){var e,f="";return f+=' <a class="',e=p.invokePartial(d.dropdown__class,"dropdown__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" href="',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===q?e.apply(a):e),f+=r(e)+'" ',e=p.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+=">",e=p.invokePartial(d.dropdown__content,"dropdown__content",a,c,d,b),(e||0===e)&&(f+=e),f+="</a> "}function m(a,b){var e,f="";return f+=' <span class="',e=p.invokePartial(d.dropdown__class,"dropdown__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" ',e=p.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+=">",e=p.invokePartial(d.dropdown__content,"dropdown__content",a,c,d,b),(e||0===e)&&(f+=e),f+="</span> "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var n,o,p=this,q="function",r=this.escapeExpression,s=c.blockHelperMissing;return o={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},(n=c.items)?n=n.call(b,o):(n=b.items,n=typeof n===q?n.apply(b):n),c.items||(n=s.call(b,n,o)),n||0===n?n:""}))}),define("dropdown/_dropdown__content.hbs",["handlebars"],function(a){a.registerPartial("dropdown__content",a.template(function(a,b,c,d,e){function f(a){var b="";return b+='<img class="ring-dropdown__image" src="'+n(typeof a===m?a.apply(a):a)+'">'}function g(a,b){var d;return d=c["if"].call(a,a.type,{hash:{},inverse:o.program(6,i,b),fn:o.program(4,h,b),data:b}),d||0===d?d:""}function h(a){var b,c="";return c+='<span class="ring-dropdown__'+n((b=a.type,typeof b===m?b.apply(a):b))+'">'+n((b=a.label,typeof b===m?b.apply(a):b))+"</span>"}function i(a){return n(typeof a===m?a.apply(a):a)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.blockHelperMissing;return k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.image)?j=j.call(b,k):(j=b.image,j=typeof j===m?j.apply(b):j),c.image||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(j=c.label)?j=j.call(b,k):(j=b.label,j=typeof j===m?j.apply(b):j),c.label||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l}))}),define("dropdown/_dropdown__separator.hbs",["handlebars"],function(a){a.registerPartial("dropdown__separator",a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<span class="ring-dropdown__separator"> </span>'}))}),define("dropdown-menu/dropdown-menu",["jquery","global/global__views","global/global__modules","popup/popup","shortcuts/shortcuts","dropdown/_dropdown__class.hbs","dropdown/_dropdown__items.hbs","dropdown/_dropdown__content.hbs","dropdown/_dropdown__separator.hbs"],function(a,b,c){var d,e="dropdown-menu",f=".ring-js-dropdown-menu",g=c.get("popup"),h=c.get("shortcuts"),i=function(f){var i,l=c.get(e);if(!f)return l.trigger("init:fail"),!1;if(!f.items&&f.target){var m=a(f.target).data(e);a.isArray(m)&&(m={items:m}),a.extend(f,m)}return f.target&&f.target instanceof a?(h("bindList",{scope:e},{esc:function(){j()}}),h("pushScope",e),a.extend(f,{type:"menu"}),i=g("init",f),k(f).then(function(c){d=a(b.render("dropdown__items",c)),i.insertHTML(d)}),d):a(b.render("dropdown__items",f))},j=function(){d&&(d.remove(),d=null,h("popScope",e),g("remove"))},k=function(b){var c=a.Deferred();return c.resolve(b),c.promise()};a(document).delegate("*","click"+f,function(b){var c=a(b.currentTarget).closest(f);c.length?(i({target:c}),b.stopPropagation()):j()}),c.add(e,{init:{method:i,override:!0},remove:{method:j,override:!0},dataSource:{method:k,override:!0}})}),define("support/support",["require","jquery"],function(a){var b;return a("jquery")(function(){if(document.documentMode>5)return void(b=document.documentMode);for(var a=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",d[0];);a>4&&(b=a)}),{getIEVersion:function(){return b}}}),define("font-icon/font-icon",["jquery","support/support"],function(a,b){var c=window.getComputedStyle&&window.getComputedStyle(document.documentElement,""),d=c&&"webkitFontSmoothing"in c,e=!!window.navigator.platform.match(/win/i);e&&!d&&a("html").addClass("no-font-antialiasing");var f=b.getIEVersion();if(f&&!(f>7)){var g={"ring-font-icon_ok":"&#xe601;","ring-font-icon_cog":"&#xe603;","ring-font-icon_refresh":"&#xe604;","ring-font-icon_pencil":"&#xe605;","ring-font-icon_chevron-left":"&#xe606;","ring-font-icon_chevron-right":"&#xe607;","ring-font-icon_pushpin":"&#xe609;","ring-font-icon_caret-down":"&#xe60a;","ring-font-icon_caret-up":"&#xe60b;","ring-font-icon_frown":"&#xe60c;","ring-font-icon_minus":"&#xe60e;","ring-font-icon_plus":"&#xe60f;","ring-font-icon_warning":"&#xe610;","ring-font-icon_permission":"&#xe015;","ring-font-icon_group":"&#xe014;","ring-font-icon_jabber":"&#xe00b;","ring-font-icon_resource":"&#xe011;","ring-font-icon_drag":"&#xe00f;","ring-font-icon_added":"&#xe006;","ring-font-icon_email":"&#xe012;","ring-font-icon_global":"&#xe013;","ring-font-icon_trash":"&#xe010;","ring-font-icon_close":"&#xe00e;","ring-font-icon_merge_icon":"&#xe00d;","ring-font-icon_role":"&#xe00a;","ring-font-icon_add":"&#xe008;","ring-font-icon_check":"&#xe005;","ring-font-icon_renamed":"&#xe004;","ring-font-icon_removed":"&#xe003;","ring-font-icon_modified":"&#xe002;"},h=require("global/global__modules"),i=["header:init:done","menu:init:done","footer:init:done","header:update:done","menu:update:done","footer:update:done"].join(" ");h.get(h.GLOBAL).on(i,function(){a(".ring-font-icon:not(:has(.ring-font-icon__before))").each(function(b,c){var d=a(c),e=d.attr("class").match(/ring-font-icon_[^\s'"]+/),f=e&&g[e[0]];e&&g[e[0]]&&d.prepend('<span class="ring-font-icon__before" style="font-family: \'font-icon\'">'+f+"</span>")})})}}),define("header/_header.hbs",["handlebars"],function(a){a.registerPartial("header",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-header_"+t(typeof a===s?a.apply(a):a)}function g(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a.active,{hash:{},inverse:u.program(6,i,b),fn:u.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var e,f="";return f+=' <span class="ring-header__item ring-header__item_active',e=u.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='">',(e=c.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e=typeof e===s?e.apply(a):e),f+=t(e)+"</span> "}function i(a,b){var e,f="";return f+=' <a class="ring-link ring-header__item ring-header__item_link',e=u.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" href="',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===s?e.apply(a):e),f+=t(e)+'">',(e=c.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e=typeof e===s?e.apply(a):e),f+=t(e)+"</a> "}function j(a,b){var e,f="";return f+=' <span class="ring-header__more',e=u.invokePartial(d["dropdown-menu__component"],"dropdown-menu__component",a,c,d,b),(e||0===e)&&(f+=e),f+='"> <span class="ring-header__item">more</span> <span class="ring-font-icon ring-font-icon_caret-down"></span> </span> '}function k(a,b){var e,f="";return f+=' <span class="ring-header__personal',e=u.invokePartial(d["dropdown-menu__component"],"dropdown-menu__component",a,c,d,b),(e||0===e)&&(f+=e),f+='"> <span class="ring-header__item">',(e=c.username)?e=e.call(a,{hash:{},data:b}):(e=a.username,e=typeof e===s?e.apply(a):e),f+=t(e)+'</span> <span class="ring-font-icon ring-font-icon_caret-down"></span> </span> '}function l(a,b){var c,d,e="";return e+=" ",c=a.authLinks,c=null==c||c===!1?c:c.login,c=typeof c===s?c.apply(a):c,d=v.call(a,c,{hash:{},inverse:u.noop,fn:u.program(13,m,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function m(a,b){var d,e="";return e+=' <span class="ring-header__personal"> ',d=c["if"].call(a,a.url,{hash:{},inverse:u.program(16,o,b),fn:u.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+=" </span> "}function n(a,b){var e,f="";return f+=' <a class="ring-link ring-header__item ring-header__item_link',e=u.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" ',e=u.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+=' href="',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===s?e.apply(a):e),f+=t(e)+'">',(e=c.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e=typeof e===s?e.apply(a):e),f+=t(e)+"</a> "}function o(a,b){var e,f="";return f+=' <span class="ring-link ring-header__item ring-header__item_link',e=u.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" ',e=u.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+=">",(e=c.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e=typeof e===s?e.apply(a):e),f+=t(e)+"</span> "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var p,q,r="",s="function",t=this.escapeExpression,u=this,v=c.blockHelperMissing;return r+='<div class="ring-header',q={hash:{},inverse:u.noop,fn:u.program(1,f,e),data:e},(p=c.type)?p=p.call(b,q):(p=b.type,p=typeof p===s?p.apply(b):p),c.type||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+='"> <div class="ring-header__i"> <div class="ring-header__services"> ',q={hash:{},inverse:u.noop,fn:u.program(3,g,e),data:e},(p=c.services)?p=p.call(b,q):(p=b.services,p=typeof p===s?p.apply(b):p),c.services||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+=" ",p=c["if"].call(b,b.items,{hash:{},inverse:u.noop,fn:u.program(8,j,e),data:e}),(p||0===p)&&(r+=p),r+=" </div> ",q={hash:{},inverse:u.program(12,l,e),fn:u.program(10,k,e),data:e},(p=c.personal)?p=p.call(b,q):(p=b.personal,p=typeof p===s?p.apply(b):p),c.personal||(p=v.call(b,p,q)),(p||0===p)&&(r+=p),r+=" </div> </div>"}))}),define("dropdown-menu/_dropdown-menu__component.hbs",["handlebars"],function(a){a.registerPartial("dropdown-menu__component",a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+=' ring-menu__item_noselect ring-js-dropdown-menu" data-dropdown-menu="',e={hash:{},data:b},f+=k((d=c.stringify||a.stringify,d?d.call(a,a.items,e):j.call(a,"stringify",a.items,e))),e={hash:{},data:b},f+=k((d=c.stringify||a.stringify,d?d.call(a,a["dropdown-menu"],e):j.call(a,"stringify",a["dropdown-menu"],e)))}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j=c.helperMissing,k=this.escapeExpression,l=this;return i={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},g=c.ifOr||b.ifOr,h=g?g.call(b,b.items,b["dropdown-menu"],i):j.call(b,"ifOr",b.items,b["dropdown-menu"],i),h||0===h?h:""}))}),define("header/header",["jquery","global/global__modules","global/global__views","dropdown-menu/dropdown-menu","font-icon/font-icon","header/_header.hbs","dropdown-menu/_dropdown-menu__component.hbs"],function(a,b,c){var d=10,e=function(b){if(b.user){var c=b.personalLinks&&b.personalLinks.length?[].concat(b.personalLinks):[],e={};a.each(c,function(a,b){b&&b.label&&(e[b.label]=!0)}),b.authLinks&&a.each(b.authLinks,function(a,b){"login"!==a&&c.push(b)}),b.personal={username:b.user.name},c.length&&(b.personal.items=c)}return b.services&&b.services.length>d&&(b.items=b.services.splice(d)),b},f="header";b.add(f,{init:function(a,b,d){return c.init(f,b||null,d||"prepend",e,a||{})},update:c.update.bind(c,f)})}),define("dropdown/_dropdown.hbs",["handlebars"],function(a){a.registerPartial("dropdown",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-dropdown_"+m(typeof a===l?a.apply(a):a)}function g(a,b){var d,e,f,g="";return g+=" ",f={hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b},d=c.ifEqual||a.ifEqual,e=d?d.call(a,a,"typed",f):o.call(a,"ifEqual",a,"typed",f),(e||0===e)&&(g+=e),g+=" "}function h(){return' <span class="ring-dropdown__item ring-dropdown__item_hint"> <span class="ring-dropdown__item__type"></span> <span class="ring-dropdown__item__content">Use ↩ to complete selected item</span> </span> '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.helperMissing,p=c.blockHelperMissing;return k+='<div class="ring-dropdown',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.type)?i=i.call(b,j):(i=b.type,i=typeof i===l?i.apply(b):i),c.type||(i=p.call(b,i,j)),(i||0===i)&&(k+=i),k+='"> <div class="ring-dropdown__i"> ',(i=c.html)?i=i.call(b,{hash:{},data:e}):(i=b.html,i=typeof i===l?i.apply(b):i),(i||0===i)&&(k+=i),k+=" ",i=n.invokePartial(d.dropdown__items,"dropdown__items",b,c,d,e),(i||0===i)&&(k+=i),k+=" </div> ",j={hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e},(i=c.type)?i=i.call(b,j):(i=b.type,i=typeof i===l?i.apply(b):i),c.type||(i=p.call(b,i,j)),(i||0===i)&&(k+=i),k+=" </div> </div>"}))}),define("dropdown/dropdown",["jquery","global/global__views","global/global__modules","global/global__events","global/global__utils","shortcuts/shortcuts","dropdown/_dropdown.hbs","dropdown/_dropdown__class.hbs","dropdown/_dropdown__items.hbs","dropdown/_dropdown__content.hbs","dropdown/_dropdown__separator.hbs"],function(a,b,c,d,e){var f,g,h,i=".ring-js-dropdown",j=".ring-dropdown-toggle",k=".ring-dropdown__item_action",l=".ring-menu__item",m=".ring-dropdown",n=".ring-dropdown__i",o="active",p=".active",q=a(window),r=!1,s=8,t=2,u="dropdown",v=c.get("shortcuts"),w=function(i,m){var p,w=c.get(u);"object"!=typeof m||m instanceof a||e.isNode(m)?(p=m,m={}):p=m.target,(e.isNode(p)||"string"==typeof p)&&(p=a(p)),r=m.preventRemove;var y=p&&p[0],z=y&&h===y;if(i||(i=p.data("ring-dropdown")),x(),!i||z||!p&&(!m.left||!m.top))return w.trigger("show:fail"),!0;h=y,i instanceof a||e.isNode(i)?(g=a(b.render(u,"")),g.find(n).append(i)):(a.isArray(i)&&(i={items:i}),"string"==typeof i&&(i={html:i}),g=a(b.render(u,i))),f||(f=a("body")),g.appendTo(f);var A,B="object"==typeof i&&(a.isArray(i.type)&&a.inArray(i.type,"bound")||"bound"===i.type);if(h){var C,D=p.is(j);D&&p.prev().is(l)&&(C=!0,p=p.prev()),A=p.offset();var E=A.left+p.outerWidth()/2,F=B?p.outerWidth():p.width(),G=g.width(),H=G/2;A.left+G>q.width()-s?A.left+=F-G:E>=H&&D&&!C&&(A.left=E-H),A.top+=p.outerHeight(),"number"==typeof m.left&&(A.left=m.left),"number"==typeof m.top&&(A.top=m.top),m.width?A.width=m.width:F>G&&(A.width=F-t)}else A=m;return g.css(A).delegate(k,"mouseenter.ring-dropdown",function(b){d.domEventHandler(b),a(b.currentTarget).addClass(o).siblings().removeClass(o)}).delegate(k,"replace.ring-dropdown",function(a){d.domEventHandler(a)}),v("pushScope",u),!1},x=function(){g?(g.remove(),g=null,h=null,c.get(u).trigger("hide:done"),v("popScope",u)):c.get(u).trigger("hide:fail")},y=function(a,b){var c="up"===b,d=g.find(p),e=d[c?"prev":"next"]();return d.removeClass(o),e.length?e.addClass(o):g.find(k)[c?"last":"first"]().addClass(o),!1},z=function(a,b){var c=g.find(p);return c.length?(c.trigger("enter"===b?"click":"replace"),!1):!0};a(document).delegate("*","click.ring-dropdown",function(b){var c=a(b.currentTarget).closest(i);return c.length?w(null,c):void((g&&!r||!a(b.currentTarget).closest(m).length)&&x())}),q.resize(x),v("bindList",{scope:u},{esc:x,enter:z,tab:z,up:y,down:y}),c.add(u,{show:{method:w,override:!0},hide:{method:x,override:!0}})}),define("menu/_menu.hbs",["handlebars"],function(a){a.registerPartial("menu",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-menu_"+m(typeof a===l?a.apply(a):a)}function g(a,b){var d,e,f="";return f+=' <span class="ring-menu__spacer"></span> ',e={hash:{},inverse:n.noop,fn:n.program(4,h,b),data:b},(d=c.left)?d=d.call(a,e):(d=a.left,d=typeof d===l?d.apply(a):d),c.left||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+=" "}function h(a,b){var e,f="";return f+=" ",e=n.invokePartial(d.menu__item,"menu__item",a,c,d,b),(e||0===e)&&(f+=e),f+=" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<div class="ring-menu',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.type)?i=i.call(b,j):(i=b.type,i=typeof i===l?i.apply(b):i),c.type||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='"> <span class="ring-menu__background"></span> <div class="ring-menu__i',i=n.invokePartial(d.global__class,"global__class",b,c,d,e),(i||0===i)&&(k+=i),k+='"> ',i=c["if"].call(b,b.left,{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+=' <div class="ring-menu__right"> <span class="ring-menu__spacer"></span> ',j={hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e},(i=c.right)?i=i.call(b,j):(i=b.right,i=typeof i===l?i.apply(b):i),c.right||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+=" </div> </div> </div>"}))}),define("menu/_menu__item.hbs",["handlebars"],function(a){a.registerPartial("menu__item",a.template(function(a,b,c,d,e){function f(a,b){var e,f,h="";return h+="  ",f={hash:{},inverse:s.program(5,i,b),fn:s.programWithDepth(2,g,b,a),data:b},(e=c.html)?e=e.call(a,f):(e=a.html,e=typeof e===t?e.apply(a):e),c.html||(e=w.call(a,e,f)),(e||0===e)&&(h+=e),h+=" ",e=s.invokePartial(d["dropdown-toggle"],"dropdown-toggle",a,c,d,b),(e||0===e)&&(h+=e),h+=" ",e=s.invokePartial(d.menu__counter,"menu__counter",a,c,d,b),(e||0===e)&&(h+=e),h+=" "}function g(a,b,d){var e,f="";return f+=" ",e=c["with"].call(a,d,{hash:{},inverse:s.noop,fn:s.program(3,h,b),data:b}),(e||0===e)&&(f+=e),f+=" "}function h(a,b){var e,f="";return f+='  <span class="',e=s.invokePartial(d.menu__item__class,"menu__item__class",a,c,d,b),(e||0===e)&&(f+=e),f+='"> ',(e=c.html)?e=e.call(a,{hash:{},data:b}):(e=a.html,e=typeof e===t?e.apply(a):e),(e||0===e)&&(f+=e),f+=" </span> "}function i(a,b){var d,e,f,g="";return g+=" ",f={hash:{},inverse:s.program(8,k,b),fn:s.program(6,j,b),data:b},d=c.ifEqual||a.ifEqual,e=d?d.call(a,a.type,"button",f):v.call(a,"ifEqual",a.type,"button",f),(e||0===e)&&(g+=e),g+=" "}function j(a,b){var e,f="";return f+=" ",e=s.invokePartial(d.btn__group,"btn__group",a,c,d,b),(e||0===e)&&(f+=e),f+=" "}function k(a,b){var d,e,f,g="";return g+="  ",f={hash:{},inverse:s.program(11,m,b),fn:s.program(9,l,b),data:b},d=c.ifEqual||a.ifEqual,e=d?d.call(a,a.type,"search",f):v.call(a,"ifEqual",a.type,"search",f),(e||0===e)&&(g+=e),g+=" "}function l(a,b){var e,f="";return f+=' <form action="',(e=c.action)?e=e.call(a,{hash:{},data:b}):(e=a.action,e=typeof e===t?e.apply(a):e),f+=u(e)+'" class="ring-menu__item ring-menu__search"> <div class="ring-input_wrapper"> <input class="ring-menu__search__input ring-input ring-input_icon',e=s.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" type="text" placeholder="placeholder"> <span class="ring-font-icon_search ring-font-icon ring-input_icon__span"></span> </div> </form>  '}function m(a,b){var e,f="";return f+=' <a href="',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===t?e.apply(a):e),f+=u(e)+'" class="ring-link',e=s.invokePartial(d.menu__item__class,"menu__item__class",a,c,d,b),(e||0===e)&&(f+=e),e=s.invokePartial(d.dropdown__component,"dropdown__component",a,c,d,b),(e||0===e)&&(f+=e),f+='"',e=s.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+="> ",e=c["if"].call(a,a.image,{hash:{},inverse:s.program(14,o,b),fn:s.program(12,n,b),data:b}),(e||0===e)&&(f+=e),f+=" </a> "}function n(a,b){var d,e="";return e+=' <img class="ring-menu__logo__img" src="',(d=c.image)?d=d.call(a,{hash:{},data:b}):(d=a.image,d=typeof d===t?d.apply(a):d),e+=u(d)+'"/> '}function o(a,b){var d,e="";return e+=' <span class="ring-menu__item__i',d=c["if"].call(a,a.type,{hash:{},inverse:s.noop,fn:s.program(15,p,b),data:b}),(d||0===d)&&(e+=d),e+='">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===t?d.apply(a):d),e+=u(d)+"</span> "}function p(a,b){var d,e="";return e+=" ring-font-icon ring-font-icon_",(d=c.type)?d=d.call(a,{hash:{},data:b}):(d=a.type,d=typeof d===t?d.apply(a):d),e+=u(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var q,r,s=this,t="function",u=this.escapeExpression,v=c.helperMissing,w=c.blockHelperMissing;return q=typeof b===t?b.apply(b):b,r=w.call(b,q,{hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e}),r||0===r?r:""}))}),define("menu/_menu__item__class.hbs",["handlebars"],function(a){a.registerPartial("menu__item__class",a.template(function(a,b,c,d,e){function f(){return" ring-menu__item_active"}function g(){return"ring-menu__logo"}function h(){return"ring-menu__item"}function i(){return" ring-menu__item_icon"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var j,k="",l=this,m="function",n=this.escapeExpression;return j=c["if"].call(b,b.active,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+=" ",j=c["if"].call(b,b.image,{hash:{},inverse:l.program(5,h,e),fn:l.program(3,g,e),data:e}),(j||0===j)&&(k+=j),j=c["if"].call(b,b.type,{hash:{},inverse:l.noop,fn:l.program(7,i,e),data:e}),(j||0===j)&&(k+=j),k+=" ring-menu__id_",(j=c.key)?j=j.call(b,{hash:{},data:e}):(j=b.key,j=typeof j===m?j.apply(b):j),k+=n(j),j=l.invokePartial(d.global__class,"global__class",b,c,d,e),(j||0===j)&&(k+=j),k}))}),define("menu/_menu__counter.hbs",["handlebars"],function(a){a.registerPartial("menu__counter",a.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+=' <span class="ring-plate ring-menu__item__counter ',d=c["if"].call(a,a.attention,{hash:{},inverse:k.program(4,h,b),fn:k.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+='">',(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===l?d.apply(a):d),e+=m(d)+"</span> "}function g(){return"ring-plate_red"}function h(){return"ring-plate_blue"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k=this,l="function",m=this.escapeExpression,n=c.blockHelperMissing;return j={hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e},(i=c.counter)?i=i.call(b,j):(i=b.counter,i=typeof i===l?i.apply(b):i),c.counter||(i=n.call(b,i,j)),i||0===i?i:""}))}),define("dropdown-toggle/_dropdown-toggle.hbs",["handlebars"],function(a){a.registerPartial("dropdown-toggle",a.template(function(a,b,c,d,e){function f(a,b){var e,f="";return f+=' <span class="ring-dropdown-toggle ring-font-icon ring-font-icon_caret-down',e=i.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),e=i.invokePartial(d.dropdown__component,"dropdown__component",a,c,d,b),(e||0===e)&&(f+=e),f+='"',e=i.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+="></span> "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var g,h,i=this,j="function",k=c.blockHelperMissing;return h={hash:{},inverse:i.noop,fn:i.program(1,f,e),data:e},(g=c.toggle)?g=g.call(b,h):(g=b.toggle,g=typeof g===j?g.apply(b):g),c.toggle||(g=k.call(b,g,h)),g||0===g?g:""}))}),define("dropdown/_dropdown__component.hbs",["handlebars"],function(a){a.registerPartial("dropdown__component",a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+=' ring-menu__item_noselect ring-js-dropdown" data-ring-dropdown="',e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a.items,e):m.call(a,"stringify",a.items,e))),e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a.dropdown,e):m.call(a,"stringify",a.dropdown,e)))+'"'}function g(a,b){var d,e,f="";return f+=' ring-menu__item_noselect ring-js-action-list" data-action-list="',e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a.items,e):m.call(a,"stringify",a.items,e))),e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a["action-list"],e):m.call(a,"stringify",a["action-list"],e)))}function h(a,b){var d,e,f="";return f+=' ring-menu__item_noselect ring-js-dropdown-menu" data-dropdown-menu="',e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a.items,e):m.call(a,"stringify",a.items,e))),e={hash:{},data:b},f+=n((d=c.stringify||a.stringify,d?d.call(a,a["dropdown-menu"],e):m.call(a,"stringify",a["dropdown-menu"],e)))}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k,l="",m=c.helperMissing,n=this.escapeExpression,o=this;return k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},i=c.ifOr||b.ifOr,j=i?i.call(b,b.items,b.dropdown,k):m.call(b,"ifOr",b.items,b.dropdown,k),(j||0===j)&&(l+=j),k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},i=c.ifOr||b.ifOr,j=i?i.call(b,b.items,b["action-list"],k):m.call(b,"ifOr",b.items,b["action-list"],k),(j||0===j)&&(l+=j),k={hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e},i=c.ifOr||b.ifOr,j=i?i.call(b,b.items,b["dropdown-menu"],k):m.call(b,"ifOr",b.items,b["dropdown-menu"],k),(j||0===j)&&(l+=j),l}))}),define("btn/_btn.hbs",["handlebars"],function(a){a.registerPartial("btn",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-btn_"+m(typeof a===l?a.apply(a):a)}function g(a,b){var d,e="";return e+='<span class="ring-font-icon ring-font-icon_',(d=c.type)?d=d.call(a,{hash:{},data:b}):(d=a.type,d=typeof d===l?d.apply(a):d),e+=m(d)+'"></span>'}function h(a,b){var d;return(d=c.label)?d=d.call(a,{hash:{},data:b}):(d=a.label,d=typeof d===l?d.apply(a):d),m(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+="<button ",i=n.invokePartial(d.global__attributes,"global__attributes",b,c,d,e),(i||0===i)&&(k+=i),k+=' class="ring-btn',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.state)?i=i.call(b,j):(i=b.state,i=typeof i===l?i.apply(b):i),c.state||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),i=n.invokePartial(d.global__class,"global__class",b,c,d,e),(i||0===i)&&(k+=i),i=n.invokePartial(d.dropdown__component,"dropdown__component",b,c,d,e),(i||0===i)&&(k+=i),k+='">',i=c["if"].call(b,b.type,{hash:{},inverse:n.program(5,h,e),fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+="</button>"}))}),define("btn/_btn__group.hbs",["handlebars"],function(a){a.registerPartial("btn__group",a.template(function(a,b,c,d,e){function f(){return" ring-menu__item"}function g(a,b){var e;return e=k.invokePartial(d.btn,"btn",a,c,d,b),e||0===e?e:""}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var h,i,j="",k=this,l="function",m=c.blockHelperMissing;return j+='<div class="ring-btn-group',i={hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e},(h=c.type)?h=h.call(b,i):(h=b.type,h=typeof h===l?h.apply(b):h),c.type||(h=m.call(b,h,i)),(h||0===h)&&(j+=h),j+='"> ',i={hash:{},inverse:k.noop,fn:k.program(3,g,e),data:e},(h=c.button)?h=h.call(b,i):(h=b.button,h=typeof h===l?h.apply(b):h),c.button||(h=m.call(b,h,i)),(h||0===h)&&(j+=h),j+=" </div>"}))}),define("menu/menu",["jquery","global/global__modules","global/global__views","dropdown/dropdown","font-icon/font-icon","menu/_menu.hbs","menu/_menu__item.hbs","menu/_menu__item__class.hbs","menu/_menu__counter.hbs","dropdown-toggle/_dropdown-toggle.hbs","dropdown/_dropdown__component.hbs","btn/_btn.hbs","btn/_btn__group.hbs"],function(a,b,c){var d="ring-menu__item_active",e="."+d,f="",g="menu",h=function(a,b){var c=a.split(".");return 1===c.length&&c.unshift(b||"left"),c.push("active"),c},i=function(a){var b="left"===a[0]?"i":"right";return".ring-menu__"+b+" > .ring-menu__id_"+a[1]},j=function(a,b){return a.order-b.order},k=function(a,b){var c,d=[],e=[];for(var g in a)c=a[g],null!=c&&(c.key=g,c.active&&(f=h(g,b).join(".")),c.order?e.push(c):d.push(c));return e.length&&(d=e.sort(j).concat(d)),d},l=function(a){return a.left&&(a.left=k(a.left,"left")),a.right&&(a.right=k(a.right,"right")),a},m=function(c){var j=h(c),k=j.join(".");if(f===k)return null;var l=["view",k,1];f&&l.push(f,0),b.get(g).update.apply(g,l),f=k,a(e).removeClass(d),a(i(j)).addClass(d)},n=function(){return b.has("header")?".ring-header":"body"},o=function(){return b.has("header")?"after":"prepend"};b.add(g,{init:function(a,b,d){return c.init(g,b||n(),d||o(),l,a)},update:c.update.bind(c,g),hide:c.hide.bind(c,g),show:c.show.bind(c,g),setActive:m})}),define("footer/_footer.hbs",["handlebars"],function(a){a.registerPartial("footer",a.template(function(a,b,c,d,e){function f(a){var b="";return b+=" ring-footer_"+r(typeof a===q?a.apply(a):a)}function g(a,b){var d,e,f,g="";return g+=" ",f={hash:{},inverse:s.program(6,i,b),fn:s.program(4,h,b),data:b},d=c.ifEqual||a.ifEqual,e=d?d.call(a,(d=b,null==d||d===!1?d:d.key),"type",f):u.call(a,"ifEqual",(d=b,null==d||d===!1?d:d.key),"type",f),(e||0===e)&&(g+=e),g+=" "}function h(){var a="";return a}function i(a,b){var c,d,e="";return e+=' <div class="ring-footer__column ring-footer__column_'+r((c=b,c=null==c||c===!1?c:c.key,typeof c===q?c.apply(a):c))+'"> <ul class="ring-footer__column__i"> ',c=typeof a===q?a.apply(a):a,d=t.call(a,c,{hash:{},inverse:s.noop,fn:s.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+=" </ul> </div> "}function j(a,b){var c,d,e="";return e+=' <li class="ring-footer__line"> ',c=typeof a===q?a.apply(a):a,d=t.call(a,c,{hash:{},inverse:s.noop,fn:s.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+=" </li> "}function k(a,b){var d,e="";return e+=" ",d=c["if"].call(a,a.url,{hash:{},inverse:s.program(11,m,b),fn:s.program(9,l,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function l(a,b){var e,f="";return f+=' <a class="ring-link',e=s.invokePartial(d.global__class,"global__class",a,c,d,b),(e||0===e)&&(f+=e),f+='" ',e=s.invokePartial(d.global__attributes,"global__attributes",a,c,d,b),(e||0===e)&&(f+=e),f+=' href="',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===q?e.apply(a):e),f+=r(e)+'">',e=s.invokePartial(d.footer__item,"footer__item",a,c,d,b),(e||0===e)&&(f+=e),f+="</a> "}function m(a,b){var e,f="";return f+=" ",e=s.invokePartial(d.footer__item,"footer__item",a,c,d,b),(e||0===e)&&(f+=e),f+=" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),d=this.merge(d,a.partials),e=e||{};var n,o,p="",q="function",r=this.escapeExpression,s=this,t=c.blockHelperMissing,u=c.helperMissing;return p+='<div class="ring-footer',o={hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e},(n=c.type)?n=n.call(b,o):(n=b.type,n=typeof n===q?n.apply(b):n),c.type||(n=t.call(b,n,o)),(n||0===n)&&(p+=n),p+='"> ',n=c.each.call(b,b,{hash:{},inverse:s.noop,fn:s.program(3,g,e),data:e}),(n||0===n)&&(p+=n),p+=" </div>"}))}),define("footer/_footer__item.hbs",["handlebars"],function(a){a.registerPartial("footer__item",a.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return d=c["if"].call(a,a.copyright,{hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b}),(d||0===d)&&(f+=d),e={hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b},(d=c.label)?d=d.call(a,e):(d=a.label,d=typeof d===p?d.apply(a):d),c.label||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),e={hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b},(d=c.middot)?d=d.call(a,e):(d=a.middot,d=typeof d===p?d.apply(a):d),c.middot||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),f}function g(a,b){var d,e;return e={hash:{},data:b},o((d=c.copyright||a.copyright,d?d.call(a,a.copyright,e):n.call(a,"copyright",a.copyright,e)))}function h(a){var b="";return b+=" "+o(typeof a===p?a.apply(a):a)}function i(){return" · "}function j(a){return o(typeof a===p?a.apply(a):a)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m,n=c.helperMissing,o=this.escapeExpression,p="function",q=this,r=c.blockHelperMissing;return m={hash:{},inverse:q.program(8,j,e),fn:q.program(1,f,e),data:e},k=c.ifOr||b.ifOr,l=k?k.call(b,b.copyright,b.middot,b.label,m):n.call(b,"ifOr",b.copyright,b.middot,b.label,m),l||0===l?l:""}))}),define("footer/footer",["jquery","global/global__modules","global/global__views","footer/_footer.hbs","footer/_footer__item.hbs"],function(a,b,c){var d="footer";b.add(d,{init:function(a,b,e){return c.init(d,b||null,e||null,{},a||{})},update:c.update.bind(c,d)})}),define("diff/diff__tools",["jquery"],function(a){var b={};return b.isDef=function(a){return"undefined"!=typeof a},b.isNull=function(a){return null===a},b.isEmptyString=function(a){return!/\S/.test(a)
},b.capitalizeFirstLetter=function(a){return[a.charAt(0).toUpperCase(),a.slice(1)].join("")},b.EOLType={CR:"cr",LF:"lf",CR_LF:"cr-lf"},b.EOLRegex={ALL:/(\r\n|\r|\n)/gm,CR:/\r/,CR_LF:/\r\n/,LF:/\n/},b.isEOL=function(a){return b.EOLRegex.ALL.test(a)},b.getEOLType=function(a){b.EOLRegexToType_||(b.EOLRegexToType_=b.createObject(b.EOLRegex.CR,b.EOLType.CR,b.EOLRegex.LF,b.EOLType.LF,b.EOLRegex.CR_LF,b.EOLType.CR_LF));for(var c=Object.keys(b.EOLRegex),d=0,e=c.length;e>d;d++){var f=c[d],g=b.EOLRegex[f];if(g.test(a))return b.EOLRegexToType_[g]}return null},b.getEOL=function(a){for(var c,d=[b.EOLRegex.CR_LF,b.EOLRegex.CR,b.EOLRegex.LF],e=d.shift(),f=null;e;){if(c=a.match(e)){f=c[0];break}e=d.shift()}return f},b.addScriptElement=function(c,d,e){var f=document.createElement("script"),g=document.querySelectorAll("script"),h=b.peekArray(g);a(f).on("load",b.bindContext(d,e)),h.parent.insertBefore(f,null),f.async=!0,f.src=c},b.abstractMethod=function(){throw new Error("This method is not implemented yet.")},b.nullFunction=function(){},b.createObject=function(a){if(a instanceof Array)return b.createObject.apply(null,a);var c=Array.prototype.slice.call(arguments,0);if(c.length%2!==0)throw new Error("Odd number of arguments.");for(var d={},e=0,f=c.length;f>e;e+=2)d[c[e]]=c[e+1];return d},b.mixin=function(a,c,d){d=b.isDef(d)?d:!0;for(var e in c)if(c.hasOwnProperty(e)){if(a[e]&&!d)continue;a[e]=c[e]}return a},b.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},b.deleteFromArray=function(a,c){var d=a.indexOf(c),e=a;return d>-1&&(e=b.deleteFromArrayAt(a,d)),e},b.deleteFromArrayAt=function(a,b){var c=a.slice(0,b),d=a.slice(b+1,a.length);return c.concat(d)},b.arraysAreEqual=function(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0},b.copyArray=function(a){return a.slice(0)},b.peekArray=function(a){return a[a.length-1]},b.inherit=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.super_=b.prototype},b.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a),a.instance_}},b.bindContext=function(a,b){return function(){return a.apply(b,arguments)}},b.addAnimationCallback=function(c,d,e){var f=function(){d.call(e)},g=b.getAnimationEventType_();a(c).one(g,f)},b.getAnimationEventType_=function(){if(b.isDef(b.animationProperty_)||(b.AnimationProperty={COMMON:"animation",OPERA:"-o-animation",MOZILLA:"-moz-animation",WEBKIT:"-webkit-animation"}),b.isDef(b.animationEventTyoe_)||(b.AnimationEventType={COMMON:"animationend",OPERA:"oAnimationEnd",WEBKIT:"webkitAnimationEnd"}),b.isDef(b.animationToEventType_)||(b.animationToEventType_=b.createObject(b.AnimationProperty.COMMON,b.AnimationEventType.COMMON,b.AnimationProperty.OPERA,b.AnimationEventType.OPERA,b.AnimationProperty.MOZILLA,b.AnimationEventType.OPERA,b.AnimationProperty.WEBKIT,b.AnimationEventType.WEBKIT)),!b.isDef(b.animationEventType_)){var a=document.createElement("div");b.animationEventType_=null;for(var c in b.AnimationProperty){var d=b.AnimationProperty[c];if(b.isDef(a.style[d])){b.animationEventType_=b.animationToEventType_[d];break}}}return b.animationEventType_},b.getAnimationUniqueName=function(a){b.isDef(b.animationIDCounter_)||(b.animationIDCounter_=0);var c=[a,b.animationIDCounter_].join("");return b.animationIDCounter_++,c},b.visibility={},b.visibility.VisibilityProperty={COMMON:"hidden",MOZILLA:"mozHidden",MS:"msHidden",WEBKIT:"webkitHidden"},b.visibility.VisibilityChangeEventType={COMMON:"visibilitychange",MOZILLA:"mozvisibilitychange",MS:"msvisibilitychange",WEBKIT:"webkitvisibilitychange"},b.visibility.getPropertyToEventType_=function(){return b.isDef(b.visibility.propertyToEventType_)||(b.visibility.propertyToEventType_=b.createObject(b.visibility.VisibilityProperty.COMMON,b.visibility.VisibilityChangeEventType.COMMON,b.visibility.VisibilityProperty.MOZILLA,b.visibility.VisibilityChangeEventType.MOZILLA,b.visibility.VisibilityProperty.MS,b.visibility.VisibilityChangeEventType.MS,b.visibility.VisibilityProperty.WEBKIT,b.visibility.VisibilityChangeEventType.WEBKIT)),b.visibility.propertyToEventType_},b.visibility.getVisibilityProperty_=function(){if(!b.isDef(b.visibility.visibilityProperty_)){b.visibility.visibilityProperty_=null;for(var a in b.visibility.VisibilityProperty){var c=b.visibility.VisibilityProperty[a];if(b.isDef(document[c])){b.visibility.visibilityProperty_=c;break}}}return b.visibility.visibilityProperty_},b.visibility.getVisibilityChangeEventType_=function(){if(!b.isDef(b.visibility.eventType_)){var a=b.visibility.getVisibilityProperty_(),c=b.visibility.getPropertyToEventType_();b.visibility.eventType_=c[a]}return b.visibility.eventType_},b.isDocumentHidden=function(){var a=b.visibility.getVisibilityProperty_();return null===a?!0:document[a]},b.addDocumentVisibilityChangeCallback=function(c,d){var e=b.visibility.getVisibilityChangeEventType_(),f=b.bindContext(c,d);a(document).on(e,f)},b.Range=function(a,b){this.from=a,this.to=b},b.os={},b.os.OS={LINUX:"linux",MAC:"mac",UNIX:"unix",UNKNOWN:"unknown",WINDOWS:"windows"},b.os.getOS=function(){return b.isDef(b.os.currentOS_)||(b.os.currentOS_=b.os.OS.UNKNOWN,navigator.appVersion.indexOf("Win")>-1&&(b.os.currentOS_="Windows"),navigator.appVersion.indexOf("Mac")>-1&&(b.os.currentOS_="MacOS"),navigator.appVersion.indexOf("X11")>-1&&(b.os.currentOS_="UNIX"),navigator.appVersion.indexOf("Linux")>-1&&(b.os.currentOS_="Linux")),b.os.currentOS_},b.cookies={},b.cookies.get=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},b.cookies.set=function(a,b,c){var d="";if(c){var e=new Date;e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}document.cookie=a+"="+b+d+"; path=/"},b.style={},b.style.getDocumentKeyframeRules=function(){for(var a=[],c=0,d=0,e=[CSSRule.KEYFRAMES_RULE,CSSRule.WEBKIT_KEYFRAMES_RULE,CSSRule.MOZ_KEYFRAMES_RULE,CSSRule.O_KEYFRAMES_RULE];d<document.styleSheets.length;){for(var f=document.styleSheets[d];c<f.cssRules.length;){var g=f.cssRules[c];if(!b.style.currentKeyframeType_)for(var h,i=e.slice(0);i.length;)if(h=i.shift(),g.type===h){b.style.currentKeyframeType_=h;break}b.style.currentKeyframeType_&&g.type===b.style.currentKeyframeType_&&a.push(g),c++}d++}return a},b.style.getKeyframeRule=function(a){for(var c,d=b.style.getDocumentKeyframeRules(),e=new RegExp("^@\\S+keyframes\\s?("+a+")\\s?{.*$","m");d.length;)if(c=d.shift(),c.cssText.match(e))return c;return null},b.style.addCSSRule=function(a,b,c){b.insertRule(a.cssText,c||0)},b.style.addDocumentStyle=function(a,b){var c=[a,"{",JSON.stringify(b).replace(/\"/g,"").replace(",",";"),"}"].join(" "),d=document.createElement("style");return d.type="text/css",d.sheet?d.sheet.cssText=c:d.appendChild(document.createTextNode(c)),document.head.appendChild(d),d},b.style.removeDocumentStyle=function(a){document.head.removeChild(a)},b.style.getPrefixedKeyframesRule=function(){var a=null,c="keyframes";return b.isDef(CSSRule.WEBKIT_KEYFRAME_RULE)?a="webkit":b.isDef(CSSRule.MOZ_KEYFRAME_RULE)?a="moz":b.isDef(CSSRule.O_KEYFRAME_RULE)?a="o":b.isDef(CSSRule.MS_KEYFRAME_RULE)&&(a="ms"),a?["@",a,c].join("-"):["@",c].join("")},b.style.appendAnimationVendorRule=function(a,c,d){for(var e,f=["moz","o","webkit","ms"];e=f.shift();){var g=[e,b.capitalizeFirstLetter(c)].join("");a.style[g]=d}a.style[c]=d},b.style.removeAnimationVendorRule=function(a,b){for(var c,d=["moz","o","webkit","ms"];c=d.shift();){var e=["-",c,"-",b].join("");a.style.removeProperty(e)}a.style.removeProperty(b)},b}),function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define("codemirror",[],a);this.CodeMirror=a()}}(function(){function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{},df(tg,d,!1),o(d);var e=d.value;"string"==typeof e&&(e=new Rg(e,d.mode)),this.doc=e;var f=this.display=new b(c,e);f.wrapper.CodeMirror=this,k(this),i(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),d.autofocus&&!$f&&nc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Ye},Lf&&setTimeout(ef(mc,this,!0),20),qc(this),tf();var g=this;Yb(this,function(){g.curOp.forceUpdate=!0,re(g,e),d.autofocus&&!$f||nf()==f.input?setTimeout(ef(Nc,g),20):Oc(g);for(var a in ug)ug.hasOwnProperty(a)&&ug[a](g,d[a],vg);for(var b=0;b<zg.length;++b)zg[b](g)})}function b(a,b){var c=this,d=c.input=jf("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Rf?d.style.width="1000px":d.setAttribute("wrap","off"),Zf&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=jf("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=jf("div",[jf("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=jf("div",[jf("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=jf("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=jf("div",null,"CodeMirror-gutter-filler"),c.lineDiv=jf("div",null,"CodeMirror-code"),c.selectionDiv=jf("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=jf("div",null,"CodeMirror-cursors"),c.measure=jf("div",null,"CodeMirror-measure"),c.lineMeasure=jf("div",null,"CodeMirror-measure"),c.lineSpace=jf("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none"),c.mover=jf("div",[jf("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=jf("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=jf("div",null,null,"position: absolute; height: "+ah+"px; width: 1px;"),c.gutters=jf("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=jf("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=jf("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),Mf&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),Zf&&(d.style.width="0px"),Rf||(c.scroller.draggable=!0),Wf&&(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"),Mf&&(c.scrollbarH.style.minHeight=c.scrollbarV.style.minWidth="18px"),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),c.viewFrom=c.viewTo=b.first,c.view=[],c.externalMeasured=null,c.viewOffset=0,c.lastSizeC=0,c.updateLineNumbers=null,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Ye,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),d(b)}function d(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.frontier=a.doc.first,sb(a,100),a.state.modeGen++,a.curOp&&cc(a)}function e(a){a.options.lineWrapping?(qf(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(pf(a.display.wrapper,"CodeMirror-wrap"),n(a)),g(a),cc(a),Jb(a),setTimeout(function(){q(a)},100)}function f(a){var b=Ub(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Vb(a.display)-3);return function(e){if(Sd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function g(a){var b=a.doc,c=f(a);b.iter(function(a){var b=c(a);b!=a.height&&ve(a,b)})}function h(a){var b=Eg[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:"")}function i(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Jb(a)}function j(a){k(a),cc(a),setTimeout(function(){s(a)},20)}function k(a){var b=a.display.gutters,c=a.options.gutters;kf(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(jf("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none",l(a)}function l(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px",a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function m(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=Ld(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=Md(d);){var e=b.find(0,!0);c-=d.text.length-e.from.ch,d=e.to.line,c+=d.text.length-e.to.ch}return c}function n(a){var b=a.display,c=a.doc;b.maxLine=se(c,c.first),b.maxLineLength=m(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=m(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function o(a){var b=af(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function p(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+xb(a.display))}}function q(a,b){b||(b=p(a));var c=a.display,d=b.docHeight+ah,e=b.scrollWidth>b.clientWidth,f=d>b.clientHeight;if(f?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=e?vf(c.measure)+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,d-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0"),e?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=f?vf(c.measure)+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0"),e&&f?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=vf(c.measure)+"px"):c.scrollbarFiller.style.display="",e&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=vf(c.measure)+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display="",!a.state.checkedOverlayScrollbar&&b.clientHeight>0){if(0===vf(c.measure)){var g=_f&&!Xf?"12px":"18px";c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=g;var h=function(b){Qe(b)!=c.scrollbarV&&Qe(b)!=c.scrollbarH&&Zb(a,uc)(b)};Yg(c.scrollbarV,"mousedown",h),Yg(c.scrollbarH,"mousedown",h)}a.state.checkedOverlayScrollbar=!0}}function r(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-wb(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=xe(b,d),g=xe(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;if(f>h)return{from:h,to:xe(b,ye(se(b,h))+a.wrapper.clientHeight)};if(Math.min(i,b.lastLine())>=g)return{from:xe(b,ye(se(b,i))-a.wrapper.clientHeight),to:i}}return{from:f,to:Math.max(g,f+1)}}function s(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=v(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=f);var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function t(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=u(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(jf("div",[jf("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",l(a),!0}return!1}function u(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function v(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function w(a,b,c){for(var d,e=a.display.viewFrom,f=a.display.viewTo,g=r(a.display,a.doc,b),h=!0;;h=!1){var i=a.display.scroller.clientWidth;if(!x(a,g,c))break;d=!0,a.display.maxLineChanged&&!a.options.lineWrapping&&y(a);var j=p(a);if(ob(a),z(a,j),q(a,j),Rf&&a.options.lineWrapping&&A(a,j),h&&a.options.lineWrapping&&i!=a.display.scroller.clientWidth)c=!0;else if(c=!1,b&&null!=b.top&&(b={top:Math.min(j.docHeight-ah-j.clientHeight,b.top)}),g=r(a.display,a.doc,b),g.from>=a.display.viewFrom&&g.to<=a.display.viewTo)break}return a.display.updateLineNumbers=null,d&&(Se(a,"update",a),(a.display.viewFrom!=e||a.display.viewTo!=f)&&Se(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)),d}function x(a,b,c){var d=a.display,e=a.doc;if(!d.wrapper.offsetWidth)return void ec(a);if(!(!c&&b.from>=d.viewFrom&&b.to<=d.viewTo&&0==ic(a))){t(a)&&ec(a);var f=D(a),g=e.first+e.size,h=Math.max(b.from-a.options.viewportMargin,e.first),i=Math.min(g,b.to+a.options.viewportMargin);d.viewFrom<h&&h-d.viewFrom<20&&(h=Math.max(e.first,d.viewFrom)),d.viewTo>i&&d.viewTo-i<20&&(i=Math.min(g,d.viewTo)),fg&&(h=Qd(a.doc,h),i=Rd(a.doc,i));var j=h!=d.viewFrom||i!=d.viewTo||d.lastSizeC!=d.wrapper.clientHeight;hc(a,h,i),d.viewOffset=ye(se(a.doc,d.viewFrom)),a.display.mover.style.top=d.viewOffset+"px";var k=ic(a);if(j||0!=k||c){var l=nf();return k>4&&(d.lineDiv.style.display="none"),E(a,d.updateLineNumbers,f),k>4&&(d.lineDiv.style.display=""),l&&nf()!=l&&l.offsetHeight&&l.focus(),kf(d.cursorDiv),kf(d.selectionDiv),j&&(d.lastSizeC=d.wrapper.clientHeight,sb(a,400)),B(a),!0}}}function y(a){var b=a.display,c=Cb(a,b.maxLine,b.maxLine.text.length).left;b.maxLineChanged=!1;var d=Math.max(0,c+3),e=Math.max(0,b.sizer.offsetLeft+d+ah-b.scroller.clientWidth);b.sizer.style.minWidth=d+"px",e<a.doc.scrollLeft&&Dc(a,Math.min(b.scroller.scrollLeft,e),!0)}function z(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-ah)+"px"}function A(a,b){a.display.sizer.offsetWidth+a.display.gutters.offsetWidth<a.display.scroller.clientWidth-1&&(a.display.sizer.style.minHeight=a.display.heightForcer.style.top="0px",a.display.gutters.style.height=b.docHeight+"px")}function B(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e,f=b.view[d];if(!f.hidden){if(Mf){var g=f.node.offsetTop+f.node.offsetHeight;e=g-c,c=g}else{var h=f.node.getBoundingClientRect();e=h.bottom-h.top}var i=f.line.height-e;if(2>e&&(e=Ub(b)),(i>.001||-.001>i)&&(ve(f.line,e),C(f.line),f.rest))for(var j=0;j<f.rest.length;j++)C(f.rest[j])}}}function C(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function D(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:v(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function E(a,b,c){function d(b){var c=b.nextSibling;return Rf&&_f&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,i=e.view,j=e.viewFrom,k=0;k<i.length;k++){var l=i[k];if(l.hidden);else if(l.node){for(;h!=l.node;)h=d(h);var m=f&&null!=b&&j>=b&&l.lineNumber;l.changes&&(af(l.changes,"gutter")>-1&&(m=!1),F(a,l,j,c)),m&&(kf(l.lineNumber),l.lineNumber.appendChild(document.createTextNode(u(a.options,j)))),h=l.node.nextSibling}else{var n=N(a,l,j,c);g.insertBefore(n,h)}j+=l.size}for(;h;)h=d(h)}function F(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?J(a,b):"gutter"==f?L(a,b,c,d):"class"==f?K(b):"widget"==f&&M(b,d)}b.changes=null}function G(a){return a.node==a.text&&(a.node=jf("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Mf&&(a.node.style.zIndex=2)),a.node}function H(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=G(a);a.background=c.insertBefore(jf("div",null,b),c.firstChild)}}function I(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):fe(a,b)}function J(a,b){var c=b.text.className,d=I(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,K(b)):c&&(b.text.className=c)}function K(a){H(a),a.line.wrapClass?G(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");var b=a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass;a.text.className=b||""}function L(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=G(b),g=b.gutter=f.insertBefore(jf("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);if(!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(jf("div",u(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),e)for(var h=0;h<a.options.gutters.length;++h){var i=a.options.gutters[h],j=e.hasOwnProperty(i)&&e[i];j&&g.appendChild(jf("div",[j],"CodeMirror-gutter-elt","left: "+d.gutterLeft[i]+"px; width: "+d.gutterWidth[i]+"px"))}}}function M(a,b){a.alignable&&(a.alignable=null);for(var c,d=a.node.firstChild;d;d=c){var c=d.nextSibling;"CodeMirror-linewidget"==d.className&&a.node.removeChild(d)}O(a,b)}function N(a,b,c,d){var e=I(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),K(b),L(a,b,c,d),O(b,d),b.node}function O(a,b){if(P(a.line,a,b,!0),a.rest)for(var c=0;c<a.rest.length;c++)P(a.rest[c],a,b,!1)}function P(a,b,c,d){if(a.widgets)for(var e=G(b),f=0,g=a.widgets;f<g.length;++f){var h=g[f],i=jf("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||(i.ignoreEvents=!0),Q(h,i,b,c),d&&h.above?e.insertBefore(i,b.gutter||b.text):e.appendChild(i),Se(h,"redraw")}}function Q(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function R(a){return gg(a.line,a.ch)}function S(a,b){return hg(a,b)<0?b:a}function T(a,b){return hg(a,b)<0?a:b}function U(a,b){this.ranges=a,this.primIndex=b}function V(a,b){this.anchor=a,this.head=b}function W(a,b){var c=a[b];a.sort(function(a,b){return hg(a.from(),b.from())}),b=af(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(hg(f.to(),e.from())>=0){var g=T(f.from(),e.from()),h=S(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;b>=d&&--b,a.splice(--d,2,new V(i?h:g,i?g:h))}}return new U(a,b)}function X(a,b){return new U([new V(a,b||a)],0)}function Y(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Z(a,b){if(b.line<a.first)return gg(a.first,0);var c=a.first+a.size-1;return b.line>c?gg(c,se(a,c).text.length):$(b,se(a,b.line).text.length)}function $(a,b){var c=a.ch;return null==c||c>b?gg(a.line,b):0>c?gg(a.line,0):a}function _(a,b){return b>=a.first&&b<a.first+a.size}function ab(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=Z(a,b[d]);return c}function bb(a,b,c,d){if(a.cm&&a.cm.display.shift||a.extend){var e=b.anchor;if(d){var f=hg(c,e)<0;f!=hg(d,e)<0?(e=c,c=d):f!=hg(c,d)<0&&(c=d)}return new V(e,c)}return new V(d||c,c)}function cb(a,b,c,d){ib(a,new U([bb(a,a.sel.primary(),b,c)],0),d)}function db(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=bb(a,a.sel.ranges[e],b[e],null);var f=W(d,a.sel.primIndex);ib(a,f,c)}function eb(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,ib(a,W(e,a.sel.primIndex),d)}function fb(a,b,c,d){ib(a,X(b,c),d)}function gb(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new V(Z(a,b[c].anchor),Z(a,b[c].head))}};return $g(a,"beforeSelectionChange",a,c),a.cm&&$g(a.cm,"beforeSelectionChange",a.cm,c),c.ranges!=b.ranges?W(c.ranges,c.ranges.length-1):b}function hb(a,b,c){var d=a.history.done,e=_e(d);e&&e.ranges?(d[d.length-1]=b,jb(a,b,c)):ib(a,b,c)}function ib(a,b,c){jb(a,b,c),Ge(a,a.sel,a.cm?a.cm.curOp.id:0/0,c)}function jb(a,b,c){(We(a,"beforeSelectionChange")||a.cm&&We(a.cm,"beforeSelectionChange"))&&(b=gb(a,b));var d=c&&c.bias||(hg(b.primary().head,a.sel.primary().head)<0?-1:1);kb(a,mb(a,b,d,!0)),c&&c.scroll===!1||!a.cm||gd(a.cm)}function kb(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ve(a.cm)),Se(a,"cursorActivity",a))}function lb(a){kb(a,mb(a,a.sel,null,!1),ch)}function mb(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=nb(a,g.anchor,c,d),i=nb(a,g.head,c,d);(e||h!=g.anchor||i!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new V(h,i))}return e?W(e,b.primIndex):b}function nb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=se(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&($g(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find(0>g?-1:1);if(0==hg(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?Z(a,gg(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?gg(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,gg(a.first,0)):nb(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function ob(a){for(var b=a.display,c=a.doc,d=document.createDocumentFragment(),e=document.createDocumentFragment(),f=0;f<c.sel.ranges.length;f++){var g=c.sel.ranges[f],h=g.empty();(h||a.options.showCursorWhenSelecting)&&pb(a,g,d),h||qb(a,g,e)}if(a.options.moveInputWithCursor){var i=Pb(a,c.sel.primary().head,"div"),j=b.wrapper.getBoundingClientRect(),k=b.lineDiv.getBoundingClientRect(),l=Math.max(0,Math.min(b.wrapper.clientHeight-10,i.top+k.top-j.top)),m=Math.max(0,Math.min(b.wrapper.clientWidth-10,i.left+k.left-j.left));b.inputDiv.style.top=l+"px",b.inputDiv.style.left=m+"px"}lf(b.cursorDiv,d),lf(b.selectionDiv,e)}function pb(a,b,c){var d=Pb(a,b.head,"div"),e=c.appendChild(jf("div"," ","CodeMirror-cursor"));if(e.style.left=d.left+"px",e.style.top=d.top+"px",e.style.height=Math.max(0,d.bottom-d.top)*a.options.cursorHeight+"px",d.other){var f=c.appendChild(jf("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=d.other.left+"px",f.style.top=d.other.top+"px",f.style.height=.85*(d.other.bottom-d.other.top)+"px"}}function qb(a,b,c){function d(a,b,c,d){0>b&&(b=0),b=Math.round(b),d=Math.round(d),h.appendChild(jf("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?k-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,e){function f(c,d){return Ob(a,gg(b,c),"div",l,d)}var h,i,l=se(g,b),m=l.text.length;return yf(ze(l),c||0,null==e?m:e,function(a,b,g){var l,n,o,p=f(a,"left");if(a==b)l=p,n=o=p.left;else{if(l=f(b-1,"right"),"rtl"==g){var q=p;p=l,l=q}n=p.left,o=l.right}null==c&&0==a&&(n=j),l.top-p.top>3&&(d(n,p.top,null,p.bottom),n=j,p.bottom<l.top&&d(n,p.bottom,null,l.top)),null==e&&b==m&&(o=k),(!h||p.top<h.top||p.top==h.top&&p.left<h.left)&&(h=p),(!i||l.bottom>i.bottom||l.bottom==i.bottom&&l.right>i.right)&&(i=l),j+1>n&&(n=j),d(n,l.top,o-n,l.bottom)}),{start:h,end:i}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),i=yb(a.display),j=i.left,k=f.lineSpace.offsetWidth-i.right,l=b.from(),m=b.to();if(l.line==m.line)e(l.line,l.ch,m.ch);else{var n=se(g,l.line),o=se(g,m.line),p=Od(n)==Od(o),q=e(l.line,l.ch,p?n.text.length+1:null).end,r=e(m.line,p?0:null,m.ch).start;p&&(q.top<r.top-2?(d(q.right,q.top,null,q.bottom),d(j,r.top,r.left,r.bottom)):d(q.right,q.top,r.left-q.right,q.bottom)),q.bottom<r.top&&d(j,q.bottom,null,r.top)}c.appendChild(h)}function rb(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0&&(b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function sb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,ef(tb,a))}function tb(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Bg(b.mode,vb(a,b.frontier));Yb(a,function(){b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(e){if(b.frontier>=a.display.viewFrom){var f=e.styles,g=be(a,e,d,!0);e.styles=g.styles,g.classes?e.styleClasses=g.classes:e.styleClasses&&(e.styleClasses=null);for(var h=!f||f.length!=e.styles.length,i=0;!h&&i<f.length;++i)h=f[i]!=e.styles[i];h&&dc(a,b.frontier,"text"),e.stateAfter=Bg(b.mode,d)}else de(a,e.text,d),e.stateAfter=b.frontier%5==0?Bg(b.mode,d):null;return++b.frontier,+new Date>c?(sb(a,a.options.workDelay),!0):void 0})})}}function ub(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=se(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=fh(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function vb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=ub(a,b,c),g=f>d.first&&se(d,f-1).stateAfter;return g=g?Bg(d.mode,g):Cg(d.mode),d.iter(f,b,function(c){de(a,c.text,g);var h=f==b-1||f%5==0||f>=e.viewFrom&&f<e.viewTo;c.stateAfter=h?Bg(d.mode,g):null,++f}),c&&(d.frontier=f),g}function wb(a){return a.lineSpace.offsetTop}function xb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function yb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=lf(a.measure,jf("pre","x")),c=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,d={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(a.cachedPaddingH=d),d}function zb(a,b,c){var d=a.options.lineWrapping,e=d&&a.display.scroller.clientWidth;if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Ab(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var d=0;d<a.rest.length;d++)if(we(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Bb(a,b){b=Od(b);var c=we(b),d=a.display.externalMeasured=new ac(a.doc,b,c);d.lineN=c;var e=d.built=fe(a,d);return d.text=e.pre,lf(a.display.lineMeasure,e.pre),d}function Cb(a,b,c,d){return Fb(a,Eb(a,b),c,d)}function Db(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[fc(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Eb(a,b){var c=we(b),d=Db(a,c);d&&!d.text?d=null:d&&d.changes&&F(a,d,c,D(a)),d||(d=Bb(a,b));
var e=Ab(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function Fb(a,b,c,d){b.before&&(c=-1);var e,f=c+(d||"");return b.cache.hasOwnProperty(f)?e=b.cache[f]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(zb(a,b.view,b.rect),b.hasHeights=!0),e=Gb(a,b,c,d),e.bogus||(b.cache[f]=e)),{left:e.left,right:e.right,top:e.top,bottom:e.bottom}}function Gb(a,b,c,d){for(var e,f,g,h,i=b.map,j=0;j<i.length;j+=3){var k=i[j],l=i[j+1];if(k>c?(f=0,g=1,h="left"):l>c?(f=c-k,g=f+1):(j==i.length-3||c==l&&i[j+3]>c)&&(g=l-k,f=g-1,c>=l&&(h="right")),null!=f){if(e=i[j+2],k==l&&d==(e.insertLeft?"left":"right")&&(h=d),"left"==d&&0==f)for(;j&&i[j-2]==i[j-3]&&i[j-1].insertLeft;)e=i[(j-=3)+2],h="left";if("right"==d&&f==l-k)for(;j<i.length-3&&i[j+3]==i[j+4]&&!i[j+5].insertLeft;)e=i[(j+=3)+2],h="right";break}}var m;if(3==e.nodeType){for(;f&&hf(b.line.text.charAt(k+f));)--f;for(;l>k+g&&hf(b.line.text.charAt(k+g));)++g;if(Nf&&0==f&&g==l-k)m=e.parentNode.getBoundingClientRect();else if(Qf&&a.options.lineWrapping){var n=ih(e,f,g).getClientRects();m=n.length?n["right"==d?n.length-1:0]:lg}else m=ih(e,f,g).getBoundingClientRect()||lg}else{f>0&&(h=d="right");var n;m=a.options.lineWrapping&&(n=e.getClientRects()).length>1?n["right"==d?n.length-1:0]:e.getBoundingClientRect()}if(Nf&&!f&&(!m||!m.left&&!m.right)){var o=e.parentNode.getClientRects()[0];m=o?{left:o.left,right:o.left+Vb(a.display),top:o.top,bottom:o.bottom}:lg}for(var p,q=(m.bottom+m.top)/2-b.rect.top,r=b.view.measure.heights,j=0;j<r.length-1&&!(q<r[j]);j++);p=j?r[j-1]:0,q=r[j];var s={left:("right"==h?m.right:m.left)-b.rect.left,right:("left"==h?m.left:m.right)-b.rect.left,top:p,bottom:q};return m.left||m.right||(s.bogus=!0),s}function Hb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Ib(a){a.display.externalMeasure=null,kf(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Hb(a.display.view[b])}function Jb(a){Ib(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function Kb(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Lb(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Mb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Vd(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=ye(b);if("local"==d?g+=wb(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:Lb());var i=h.left+("window"==d?0:Kb());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function Nb(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=Kb(),e-=Lb();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function Ob(a,b,c,d,e){return d||(d=se(a.doc,b.line)),Mb(a,d,Cb(a,d,b.ch,e),c)}function Pb(a,b,c,d,e){function f(b,f){var g=Fb(a,e,b,f?"right":"left");return f?g.left=g.right:g.right=g.left,Mb(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==zf(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=Af(c)-(c.level%2?0:1),d=!0):a==Af(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=zf(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||se(a.doc,b.line),e||(e=Eb(a,d));var h=ze(d),i=b.ch;if(!h)return f(i);var j=Gf(h,i),k=g(i,j);return null!=vh&&(k.other=g(i,vh)),k}function Qb(a,b){var c=0,b=Z(a.doc,b);a.options.lineWrapping||(c=Vb(a.display)*b.ch);var d=se(a.doc,b.line),e=ye(d)+wb(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function Rb(a,b,c,d){var e=gg(a,b);return e.xRel=d,c&&(e.outside=!0),e}function Sb(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return Rb(d.first,0,!0,-1);var e=xe(d,c),f=d.first+d.size-1;if(e>f)return Rb(d.first+d.size-1,se(d,f).text.length,!0,1);0>b&&(b=0);for(var g=se(d,e);;){var h=Tb(a,g,e,b,c),i=Md(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=we(g=j.to.line)}}function Tb(a,b,c,d,e){function f(d){var e=Pb(a,gg(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-ye(b),h=!1,i=2*a.display.wrapper.clientWidth,j=Eb(a,b),k=ze(b),l=b.text.length,m=Bf(b),n=Cf(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return Rb(c,n,r,1);for(;;){if(k?n==m||n==If(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);hf(b.text.charAt(s));)++s;var u=Rb(c,s,s==m?p:r,-1>t?-1:t>1?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=If(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function Ub(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==ig){ig=jf("pre");for(var b=0;49>b;++b)ig.appendChild(document.createTextNode("x")),ig.appendChild(jf("br"));ig.appendChild(document.createTextNode("x"))}lf(a.measure,ig);var c=ig.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),kf(a.measure),c||1}function Vb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=jf("span","xxxxxxxxxx"),c=jf("pre",[b]);lf(a.measure,c);var d=b.getBoundingClientRect(),e=(d.right-d.left)/10;return e>2&&(a.cachedCharWidth=e),e||10}function Wb(a){a.curOp={viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++mg},_g++||(Ug=[])}function Xb(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&n(a),b.viewChanged||b.forceUpdate||null!=b.scrollTop||b.scrollToPos&&(b.scrollToPos.from.line<d.viewFrom||b.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&a.options.lineWrapping){var e=w(a,{top:b.scrollTop,ensure:b.scrollToPos},b.forceUpdate);a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)}if(!e&&b.selectionChanged&&ob(a),e||b.startHeight==a.doc.height||q(a),null==d.wheelStartX||null==b.scrollTop&&null==b.scrollLeft&&!b.scrollToPos||(d.wheelStartX=d.wheelStartY=null),null!=b.scrollTop&&d.scroller.scrollTop!=b.scrollTop){var f=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,b.scrollTop));d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=f}if(null!=b.scrollLeft&&d.scroller.scrollLeft!=b.scrollLeft){var g=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,b.scrollLeft));d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g,s(a)}if(b.scrollToPos){var h=cd(a,Z(a.doc,b.scrollToPos.from),Z(a.doc,b.scrollToPos.to),b.scrollToPos.margin);b.scrollToPos.isCursor&&a.state.focused&&bd(a,h)}b.selectionChanged&&rb(a),a.state.focused&&b.updateInput&&mc(a,b.typing);var i=b.maybeHiddenMarkers,j=b.maybeUnhiddenMarkers;if(i)for(var k=0;k<i.length;++k)i[k].lines.length||$g(i[k],"hide");if(j)for(var k=0;k<j.length;++k)j[k].lines.length&&$g(j[k],"unhide");var l;if(--_g||(l=Ug,Ug=null),b.changeObjs&&$g(a,"changes",a,b.changeObjs),l)for(var k=0;k<l.length;++k)l[k]();if(b.cursorActivityHandlers)for(var k=0;k<b.cursorActivityHandlers.length;k++)b.cursorActivityHandlers[k](a)}function Yb(a,b){if(a.curOp)return b();Wb(a);try{return b()}finally{Xb(a)}}function Zb(a,b){return function(){if(a.curOp)return b.apply(a,arguments);Wb(a);try{return b.apply(a,arguments)}finally{Xb(a)}}}function $b(a){return function(){if(this.curOp)return a.apply(this,arguments);Wb(this);try{return a.apply(this,arguments)}finally{Xb(this)}}}function _b(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);Wb(b);try{return a.apply(this,arguments)}finally{Xb(b)}}}function ac(a,b,c){this.line=b,this.rest=Pd(b),this.size=this.rest?we(_e(this.rest))-c+1:1,this.node=this.text=null,this.hidden=Sd(a,b)}function bc(a,b,c){for(var d,e=[],f=b;c>f;f=d){var g=new ac(a.doc,se(a.doc,f),f);d=f+g.size,e.push(g)}return e}function cc(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)fg&&Qd(a.doc,b)<e.viewTo&&ec(a);else if(c<=e.viewFrom)fg&&Rd(a.doc,c+d)>e.viewFrom?ec(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)ec(a);else if(b<=e.viewFrom){var f=gc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):ec(a)}else if(c>=e.viewTo){var f=gc(a,b,b,-1);f?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):ec(a)}else{var g=gc(a,b,b,-1),h=gc(a,c,c+d,1);g&&h?(e.view=e.view.slice(0,g.index).concat(bc(a,g.lineN,h.lineN)).concat(e.view.slice(h.index)),e.viewTo+=d):ec(a)}var i=e.externalMeasured;i&&(c<i.lineN?i.lineN+=d:b<i.lineN+i.size&&(e.externalMeasured=null))}function dc(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[fc(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==af(g,c)&&g.push(c)}}}function ec(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function fc(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function gc(a,b,c,d){var e,f=fc(a,b),g=a.display.view;if(!fg||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=0,i=a.display.viewFrom;f>h;h++)i+=g[h].size;if(i!=b){if(d>0){if(f==g.length-1)return null;e=i+g[f].size-b,f++}else e=i-b;b+=e,c+=e}for(;Qd(a.doc,c)!=c;){if(f==(0>d?0:g.length-1))return null;c+=d*g[f-(0>d?1:0)].size,f+=d}return{index:f,lineN:c}}function hc(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=bc(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=bc(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(fc(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(bc(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,fc(a,c)))),d.viewTo=c}function ic(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function jc(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){lc(a),a.state.focused&&jc(a)})}function kc(a){function b(){var d=lc(a);d||c?(a.display.pollingFast=!1,jc(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function lc(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||sh(b)&&!c||pc(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(Qf&&!Nf&&a.display.inputHasSelection===e)return mc(a),!1;var f=!a.curOp;f&&Wb(a),a.display.shift=!1,8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="​");for(var g=0,h=Math.min(c.length,e.length);h>g&&c.charCodeAt(g)==e.charCodeAt(g);)++g;for(var i=e.slice(g),j=rh(i),k=a.state.pasteIncoming&&j.length>1&&d.sel.ranges.length==j.length,l=d.sel.ranges.length-1;l>=0;l--){var m=d.sel.ranges[l],n=m.from(),o=m.to();g<c.length?n=gg(n.line,n.ch-(c.length-g)):a.state.overwrite&&m.empty()&&!a.state.pasteIncoming&&(o=gg(o.line,Math.min(se(d,o.line).text.length,o.ch+_e(j).length)));var p=a.curOp.updateInput,q={from:n,to:o,text:k?[j[l]]:j,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};if(Wc(a.doc,q),Se(a,"inputRead",a,q),i&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&m.head.ch<100&&(!l||d.sel.ranges[l-1].head.line!=m.head.line)){var r=a.getModeAt(m.head);if(r.electricChars){for(var s=0;s<r.electricChars.length;s++)if(i.indexOf(r.electricChars.charAt(s))>-1){id(a,m.head.line,"smart");break}}else if(r.electricInput){var t=sg(q);r.electricInput.test(se(d,t.line).text.slice(0,t.ch))&&id(a,m.head.line,"smart")}}}return gd(a),a.curOp.updateInput=p,a.curOp.typing=!0,e.length>1e3||e.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=e,f&&Xb(a),a.state.pasteIncoming=a.state.cutIncoming=!1,!0}function mc(a,b){var c,d,e=a.doc;if(a.somethingSelected()){a.display.prevInput="";var f=e.sel.primary();c=th&&(f.to().line-f.from().line>100||(d=a.getSelection()).length>1e3);var g=c?"-":d||a.getSelection();a.display.input.value=g,a.state.focused&&hh(a.display.input),Qf&&!Nf&&(a.display.inputHasSelection=g)}else b||(a.display.prevInput=a.display.input.value="",Qf&&!Nf&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function nc(a){"nocursor"==a.options.readOnly||$f&&nf()==a.display.input||a.display.input.focus()}function oc(a){a.state.focused||(nc(a),Nc(a))}function pc(a){return a.options.readOnly||a.doc.cantEdit}function qc(a){function b(){a.state.focused&&setTimeout(ef(nc,a),0)}function c(b){Ue(a,b)||Xg(b)}function d(b){if(a.somethingSelected())e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=!1,e.input.value=a.getSelection(),hh(e.input));else{for(var c="",d=[],f=0;f<a.doc.sel.ranges.length;f++){var g=a.doc.sel.ranges[f].head.line,h={anchor:gg(g,0),head:gg(g+1,0)};d.push(h),c+=a.getRange(h.anchor,h.head)}"cut"==b.type?a.setSelections(d,null,ch):(e.prevInput="",e.input.value=c,hh(e.input))}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;Yg(e.scroller,"mousedown",Zb(a,uc)),Lf?Yg(e.scroller,"dblclick",Zb(a,function(b){if(!Ue(a,b)){var c=tc(a,b);if(c&&!zc(a,b)&&!sc(a.display,b)){Vg(b);var d=nd(a,c);cb(a.doc,d.anchor,d.head)}}})):Yg(e.scroller,"dblclick",function(b){Ue(a,b)||Vg(b)}),Yg(e.lineSpace,"selectstart",function(a){sc(e,a)||Vg(a)}),dg||Yg(e.scroller,"contextmenu",function(b){Pc(a,b)}),Yg(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Cc(a,e.scroller.scrollTop),Dc(a,e.scroller.scrollLeft,!0),$g(a,"scroll",a))}),Yg(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&Cc(a,e.scrollbarV.scrollTop)}),Yg(e.scrollbarH,"scroll",function(){e.scroller.clientHeight&&Dc(a,e.scrollbarH.scrollLeft)}),Yg(e.scroller,"mousewheel",function(b){Ec(a,b)}),Yg(e.scroller,"DOMMouseScroll",function(b){Ec(a,b)}),Yg(e.scrollbarH,"mousedown",b),Yg(e.scrollbarV,"mousedown",b),Yg(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),Yg(e.input,"keyup",Zb(a,Lc)),Yg(e.input,"input",function(){Qf&&!Nf&&a.display.inputHasSelection&&(a.display.inputHasSelection=null),kc(a)}),Yg(e.input,"keydown",Zb(a,Jc)),Yg(e.input,"keypress",Zb(a,Mc)),Yg(e.input,"focus",ef(Nc,a)),Yg(e.input,"blur",ef(Oc,a)),a.options.dragDrop&&(Yg(e.scroller,"dragstart",function(b){Bc(a,b)}),Yg(e.scroller,"dragenter",c),Yg(e.scroller,"dragover",c),Yg(e.scroller,"drop",Zb(a,Ac))),Yg(e.scroller,"paste",function(b){sc(e,b)||(a.state.pasteIncoming=!0,nc(a),kc(a))}),Yg(e.input,"paste",function(){if(Rf&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$",e.input.selectionStart=b,e.input.selectionEnd=c,a.state.fakedLastChar=!0}a.state.pasteIncoming=!0,kc(a)}),Yg(e.input,"cut",d),Yg(e.input,"copy",d),Wf&&Yg(e.sizer,"mouseup",function(){nf()==e.input&&e.input.blur(),nc(a)})}function rc(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,a.setSize()}function sc(a,b){for(var c=Qe(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function tc(a,b,c,d){var e=a.display;if(!c){var f=Qe(b);if(f==e.scrollbarH||f==e.scrollbarV||f==e.scrollbarFiller||f==e.gutterFiller)return null}var g,h,i=e.lineSpace.getBoundingClientRect();try{g=b.clientX-i.left,h=b.clientY-i.top}catch(b){return null}var j,k=Sb(a,g,h);if(d&&1==k.xRel&&(j=se(a.doc,k.line).text).length==k.ch){var l=fh(j,j.length,a.options.tabSize)-j.length;k=gg(k.line,Math.max(0,Math.round((g-yb(a.display).left)/Vb(a.display))-l))}return k}function uc(a){if(!Ue(this,a)){var b=this,c=b.display;if(c.shift=a.shiftKey,sc(c,a))return void(Rf||(c.scroller.draggable=!1,setTimeout(function(){c.scroller.draggable=!0},100)));if(!zc(b,a)){var d=tc(b,a);switch(window.focus(),Re(a)){case 1:d?vc(b,a,d):Qe(a)==c.scroller&&Vg(a);break;case 2:Rf&&(b.state.lastMiddleDown=+new Date),d&&cb(b.doc,d),setTimeout(ef(nc,b),20),Vg(a);break;case 3:dg&&Pc(b,a)}}}}function vc(a,b,c){setTimeout(ef(oc,a),0);var d,e=+new Date;kg&&kg.time>e-400&&0==hg(kg.pos,c)?d="triple":jg&&jg.time>e-400&&0==hg(jg.pos,c)?(d="double",kg={time:e,pos:c}):(d="single",jg={time:e,pos:c});var f=a.doc.sel,g=_f?b.metaKey:b.ctrlKey;a.options.dragDrop&&qh&&!pc(a)&&"single"==d&&f.contains(c)>-1&&f.somethingSelected()?wc(a,b,c,g):xc(a,b,c,d,g)}function wc(a,b,c,d){var e=a.display,f=Zb(a,function(g){Rf&&(e.scroller.draggable=!1),a.state.draggingText=!1,Zg(document,"mouseup",f),Zg(e.scroller,"drop",f),Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)<10&&(Vg(g),d||cb(a.doc,c),nc(a),Lf&&!Nf&&setTimeout(function(){document.body.focus(),nc(a)},20))});Rf&&(e.scroller.draggable=!0),a.state.draggingText=f,e.scroller.dragDrop&&e.scroller.dragDrop(),Yg(document,"mouseup",f),Yg(e.scroller,"drop",f)}function xc(a,b,c,d,e){function f(b){if(0!=hg(p,b))if(p=b,"rect"==d){for(var e=[],f=a.options.tabSize,g=fh(se(j,c.line).text,c.ch,f),h=fh(se(j,b.line).text,b.ch,f),i=Math.min(g,h),n=Math.max(g,h),o=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));q>=o;o++){var r=se(j,o).text,s=Ze(r,i,f);i==n?e.push(new V(gg(o,s),gg(o,s))):r.length>s&&e.push(new V(gg(o,s),gg(o,Ze(r,n,f))))}e.length||e.push(new V(c,c)),ib(j,W(m.ranges.slice(0,l).concat(e),l),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var t=k,u=t.anchor,v=b;if("single"!=d){if("double"==d)var w=nd(a,b);else var w=new V(gg(b.line,0),Z(j,gg(b.line+1,0)));hg(w.anchor,u)>0?(v=w.head,u=T(t.from(),w.anchor)):(v=w.anchor,u=S(t.to(),w.head))}var e=m.ranges.slice(0);e[l]=new V(Z(j,u),v),ib(j,W(e,l),dh)}}function g(b){var c=++s,e=tc(a,b,!0,"rect"==d);if(e)if(0!=hg(e,p)){oc(a),f(e);var h=r(i,j);(e.line>=h.to||e.line<h.from)&&setTimeout(Zb(a,function(){s==c&&g(b)}),150)}else{var k=b.clientY<q.top?-20:b.clientY>q.bottom?20:0;k&&setTimeout(Zb(a,function(){s==c&&(i.scroller.scrollTop+=k,g(b))}),50)}}function h(b){s=1/0,Vg(b),nc(a),Zg(document,"mousemove",t),Zg(document,"mouseup",u),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;Vg(b);var k,l,m=j.sel;if(e&&!b.shiftKey?(l=j.sel.contains(c),k=l>-1?j.sel.ranges[l]:new V(c,c)):k=j.sel.primary(),b.altKey)d="rect",e||(k=new V(c,c)),c=tc(a,b,!0,!0),l=-1;else if("double"==d){var n=nd(a,c);k=a.display.shift||j.extend?bb(j,k,n.anchor,n.head):n}else if("triple"==d){var o=new V(gg(c.line,0),Z(j,gg(c.line+1,0)));k=a.display.shift||j.extend?bb(j,k,o.anchor,o.head):o}else k=bb(j,k,c);e?l>-1?eb(j,l,k,dh):(l=j.sel.ranges.length,ib(j,W(j.sel.ranges.concat([k]),l),{scroll:!1,origin:"*mouse"})):(l=0,ib(j,new U([k],0),dh),m=j.sel);var p=c,q=i.wrapper.getBoundingClientRect(),s=0,t=Zb(a,function(a){(Qf&&!Of?a.buttons:Re(a))?g(a):h(a)}),u=Zb(a,h);Yg(document,"mousemove",t),Yg(document,"mouseup",u)}function yc(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(b){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Vg(b);var h=a.display,i=h.lineDiv.getBoundingClientRect();if(g>i.bottom||!We(a,c))return Pe(b);g-=i.top-h.viewOffset;for(var j=0;j<a.options.gutters.length;++j){var k=h.gutters.childNodes[j];if(k&&k.getBoundingClientRect().right>=f){var l=xe(a.doc,g),m=a.options.gutters[j];return e(a,c,a,l,m,b),Pe(b)}}}function zc(a,b){return yc(a,b,"gutterClick",!0,Se)}function Ac(a){var b=this;if(!Ue(b,a)&&!sc(b.display,a)){Vg(a),Qf&&(ng=+new Date);var c=tc(b,a,!0),d=a.dataTransfer.files;if(c&&!pc(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=Zb(b,function(){if(f[d]=h.result,++g==e){c=Z(b.doc,c);var a={from:c,to:c,text:rh(f.join("\n")),origin:"paste"};Wc(b.doc,a),hb(b.doc,X(c,sg(a)))}}),h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(ef(nc,b),20);try{var f=a.dataTransfer.getData("Text");if(f){if(b.state.draggingText&&!(_f?a.metaKey:a.ctrlKey))var j=b.listSelections();if(jb(b.doc,X(c,c)),j)for(var i=0;i<j.length;++i)ad(b.doc,"",j[i].anchor,j[i].head,"drag");b.replaceSelection(f,"around","paste"),nc(b)}}catch(a){}}}}function Bc(a,b){if(Qf&&(!a.state.draggingText||+new Date-ng<100))return void Xg(b);if(!Ue(a,b)&&!sc(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!Vf)){var c=jf("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Uf&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),Uf&&c.parentNode.removeChild(c)}}function Cc(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,Kf||w(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Kf&&w(a),sb(a,100))}function Dc(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,s(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Ec(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&_f&&Rf)a:for(var g=b.target,h=e.view;g!=f;g=g.parentNode)for(var i=0;i<h.length;i++)if(h[i].node==g){a.display.currentWheelTarget=g;break a}if(c&&!Kf&&!Uf&&null!=pg)return d&&Cc(a,Math.max(0,Math.min(f.scrollTop+d*pg,f.scrollHeight-f.clientHeight))),Dc(a,Math.max(0,Math.min(f.scrollLeft+c*pg,f.scrollWidth-f.clientWidth))),Vg(b),void(e.wheelStartX=null);if(d&&null!=pg){var j=d*pg,k=a.doc.scrollTop,l=k+e.wrapper.clientHeight;0>j?k=Math.max(0,k+j-50):l=Math.min(a.doc.height,l+j+50),w(a,{top:k,bottom:l})}20>og&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(pg=(pg*og+c)/(og+1),++og)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function Fc(a,b,c){if("string"==typeof b&&(b=Dg[b],!b))return!1;a.display.pollingFast&&lc(a)&&(a.display.pollingFast=!1);var d=a.display.shift,e=!1;try{pc(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=bh}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Gc(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Hc(a,b){var c=pd(a.options.keyMap),d=c.auto;clearTimeout(qg),d&&!Gg(b)&&(qg=setTimeout(function(){pd(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,h(a))},50));var e=Hg(b,!0),f=!1;if(!e)return!1;var g=Gc(a);return f=b.shiftKey?Fg("Shift-"+e,g,function(b){return Fc(a,b,!0)})||Fg(e,g,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?Fc(a,b):void 0}):Fg(e,g,function(b){return Fc(a,b)}),f&&(Vg(b),rb(a),Se(a,"keyHandled",a,e,b)),f}function Ic(a,b,c){var d=Fg("'"+c+"'",Gc(a),function(b){return Fc(a,b,!0)});return d&&(Vg(b),rb(a),Se(a,"keyHandled",a,"'"+c+"'",b)),d}function Jc(a){var b=this;if(oc(b),!Ue(b,a)){Lf&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=Hc(b,a);Uf&&(rg=d?c:null,!d&&88==c&&!th&&(_f?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||Kc(b)}}function Kc(a){function b(a){18!=a.keyCode&&a.altKey||(pf(c,"CodeMirror-crosshair"),Zg(document,"keyup",b),Zg(document,"mouseover",b))}var c=a.display.lineDiv;qf(c,"CodeMirror-crosshair"),Yg(document,"keyup",b),Yg(document,"mouseover",b)}function Lc(a){Ue(this,a)||16==a.keyCode&&(this.doc.sel.shift=!1)}function Mc(a){var b=this;if(!Ue(b,a)){var c=a.keyCode,d=a.charCode;if(Uf&&c==rg)return rg=null,void Vg(a);if(!(Uf&&(!a.which||a.which<10)||Wf)||!Hc(b,a)){var e=String.fromCharCode(null==d?c:d);Ic(b,a,e)||(Qf&&!Nf&&(b.display.inputHasSelection=null),kc(b))}}}function Nc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||($g(a,"focus",a),a.state.focused=!0,qf(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(mc(a),Rf&&setTimeout(ef(mc,a,!0),0))),jc(a),rb(a))}function Oc(a){a.state.focused&&($g(a,"blur",a),a.state.focused=!1,pf(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function Pc(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),c=e.input.value="​"+(b?e.input.value:"");e.prevInput=b?"":"​",e.input.selectionStart=1,e.input.selectionEnd=c.length,e.selForContextMenu=a.doc.sel}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=i,Nf&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=g),jc(a),null!=e.input.selectionStart){(!Qf||Nf)&&c();var b=0,d=function(){e.selForContextMenu==a.doc.sel&&0==e.input.selectionStart?Zb(a,Dg.selectAll)(a):b++<10?e.detectingSelectAll=setTimeout(d,500):mc(a)};e.detectingSelectAll=setTimeout(d,200)}}if(!Ue(a,b,"contextmenu")){var e=a.display;if(!sc(e,b)&&!Qc(a,b)){var f=tc(a,b),g=e.scroller.scrollTop;if(f&&!Uf){var h=a.options.resetSelectionOnContextMenu;h&&-1==a.doc.sel.contains(f)&&Zb(a,ib)(a.doc,X(f),ch);var i=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Qf?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",nc(a),mc(a),a.somethingSelected()||(e.input.value=e.prevInput=" "),e.selForContextMenu=a.doc.sel,clearTimeout(e.detectingSelectAll),Qf&&!Nf&&c(),dg){Xg(b);var j=function(){Zg(window,"mouseup",j),setTimeout(d,20)};Yg(window,"mouseup",j)}else setTimeout(d,50)}}}}function Qc(a,b){return We(a,"gutterContextMenu")?yc(a,b,"gutterContextMenu",!1,$g):!1}function Rc(a,b){if(hg(a,b.from)<0)return a;if(hg(a,b.to)<=0)return sg(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=sg(b).ch-b.to.ch),gg(c,d)}function Sc(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new V(Rc(e.anchor,b),Rc(e.head,b)))}return W(c,a.sel.primIndex)}function Tc(a,b,c){return a.line==b.line?gg(c.line,a.ch-b.ch+c.ch):gg(c.line+(a.line-b.line),a.ch)}function Uc(a,b,c){for(var d=[],e=gg(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=Tc(h.from,e,f),j=Tc(sg(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=hg(k.head,k.anchor)<0;d[g]=new V(l?j:i,l?i:j)}else d[g]=new V(i,i)}return new U(d,a.sel.primIndex)}function Vc(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=Z(a,b)),c&&(this.to=Z(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),$g(a,"beforeChange",a,d),a.cm&&$g(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Wc(a,b,c){if(a.cm){if(!a.cm.curOp)return Zb(a.cm,Wc)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(We(a,"beforeChange")||a.cm&&We(a.cm,"beforeChange"))||(b=Vc(a,b,!0))){var d=eg&&!c&&Ed(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Xc(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text});else Xc(a,b)}}function Xc(a,b){if(1!=b.text.length||""!=b.text[0]||0!=hg(b.from,b.to)){var c=Sc(a,b);Ee(a,b,c,a.cm?a.cm.curOp.id:0/0),$c(a,b,c,Bd(a,b));var d=[];qe(a,function(a,c){c||-1!=af(d,a.history)||(Oe(a.history,b),d.push(a.history)),$c(a,b,null,Bd(a,b))})}}function Yc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d,e=a.history,f=a.sel,g="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,i=0;i<g.length&&(d=g[i],c?!d.ranges||d.equals(a.sel):d.ranges);i++);if(i!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;d=g.pop(),d.ranges;){if(He(d,h),c&&!d.equals(a.sel))return void ib(a,d,{clearRedo:!1});f=d}var j=[];He(f,h),h.push({changes:j,generation:e.generation}),e.generation=d.generation||++e.maxGeneration;for(var k=We(a,"beforeChange")||a.cm&&We(a.cm,"beforeChange"),i=d.changes.length-1;i>=0;--i){var l=d.changes[i];if(l.origin=b,k&&!Vc(a,l,!1))return void(g.length=0);j.push(Be(a,l));var m=i?Sc(a,l,null):_e(g);$c(a,l,m,Dd(a,l)),!i&&a.cm&&a.cm.scrollIntoView(l);var n=[];qe(a,function(a,b){b||-1!=af(n,a.history)||(Oe(a.history,l),n.push(a.history)),$c(a,l,null,Dd(a,l))})}}}}function Zc(a,b){if(0!=b&&(a.first+=b,a.sel=new U(bf(a.sel.ranges,function(a){return new V(gg(a.anchor.line+b,a.anchor.ch),gg(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){cc(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)dc(a.cm,d,"gutter")}}function $c(a,b,c,d){if(a.cm&&!a.cm.curOp)return Zb(a.cm,$c)(a,b,c,d);if(b.to.line<a.first)return void Zc(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Zc(a,e),b={from:gg(a.first,0),to:gg(b.to.line+e,b.to.ch),text:[_e(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:gg(f,se(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=te(a,b.from,b.to),c||(c=Sc(a,b,null)),a.cm?_c(a.cm,b,d):ne(a,b,d),jb(a,c,ch)}}function _c(a,b,c){var d=a.doc,e=a.display,g=b.from,h=b.to,i=!1,j=g.line;a.options.lineWrapping||(j=we(Od(se(d,g.line))),d.iter(j,h.line+1,function(a){return a==e.maxLine?(i=!0,!0):void 0})),d.sel.contains(b.from,b.to)>-1&&Ve(a),ne(d,b,c,f(a)),a.options.lineWrapping||(d.iter(j,g.line+b.text.length,function(a){var b=m(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,i=!1)}),i&&(a.curOp.updateMaxLine=!0)),d.frontier=Math.min(d.frontier,g.line),sb(a,400);var k=b.text.length-(h.line-g.line)-1;g.line!=h.line||1!=b.text.length||me(a.doc,b)?cc(a,g.line,h.line+1,k):dc(a,g.line,"text");var l=We(a,"changes"),n=We(a,"change");if(n||l){var o={from:g,to:h,text:b.text,removed:b.removed,origin:b.origin};n&&Se(a,"change",a,o),l&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(o)}a.display.selForContextMenu=null}function ad(a,b,c,d,e){if(d||(d=c),hg(d,c)<0){var f=d;d=c,c=f}"string"==typeof b&&(b=rh(b)),Wc(a,{from:c,to:d,text:b,origin:e})}function bd(a,b){var c=a.display,d=c.sizer.getBoundingClientRect(),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Yf){var f=jf("div","​",null,"position: absolute; top: "+(b.top-c.viewOffset-wb(a.display))+"px; height: "+(b.bottom-b.top+ah)+"px; left: "+b.left+"px; width: 2px;");a.display.lineSpace.appendChild(f),f.scrollIntoView(e),a.display.lineSpace.removeChild(f)}}function cd(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=Pb(a,b),g=c&&c!=b?Pb(a,c):f,h=ed(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),i=a.doc.scrollTop,j=a.doc.scrollLeft;if(null!=h.scrollTop&&(Cc(a,h.scrollTop),Math.abs(a.doc.scrollTop-i)>1&&(e=!0)),null!=h.scrollLeft&&(Dc(a,h.scrollLeft),Math.abs(a.doc.scrollLeft-j)>1&&(e=!0)),!e)return f}}function dd(a,b,c,d,e){var f=ed(a,b,c,d,e);null!=f.scrollTop&&Cc(a,f.scrollTop),null!=f.scrollLeft&&Dc(a,f.scrollLeft)}function ed(a,b,c,d,e){var f=a.display,g=Ub(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,i=f.scroller.clientHeight-ah,j={},k=a.doc.height+xb(f),l=g>c,m=e>k-g;if(h>c)j.scrollTop=l?0:c;else if(e>h+i){var n=Math.min(c,(m?k:e)-i);
n!=h&&(j.scrollTop=n)}var o=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft,p=f.scroller.clientWidth-ah;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return o+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>p+o-3&&(j.scrollLeft=d+10-p),j}function fd(a,b,c){(null!=b||null!=c)&&hd(a),null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b),null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function gd(a){hd(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?gg(b.line,b.ch-1):b,d=gg(b.line,b.ch+1)),a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function hd(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Qb(a,b.from),d=Qb(a,b.to),e=ed(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(e.scrollLeft,e.scrollTop)}}function id(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(a.doc.mode.indent?e=vb(a,b):c="prev");var g=a.options.tabSize,h=se(f,b),i=fh(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(j=a.doc.mode.indent(e,h.text.slice(k.length),h.text),j==bh)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?fh(se(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(j/g);n;--n)m+=g,l+="	";if(j>m&&(l+=$e(j-m)),l!=k)ad(a.doc,l,gg(b,0),gg(b,k.length),"+input");else for(var n=0;n<f.sel.ranges.length;n++){var o=f.sel.ranges[n];if(o.head.line==b&&o.head.ch<k.length){var m=gg(b,k.length);eb(f,n,new V(m,m));break}}h.stateAfter=null}function jd(a,b,c,d){var e=b,f=b,g=a.doc;return"number"==typeof b?f=se(g,Y(g,b)):e=we(b),null==e?null:(d(f,e)&&dc(a,e,c),f)}function kd(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&hg(f.from,_e(d).to)<=0;){var g=d.pop();if(hg(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}Yb(a,function(){for(var b=d.length-1;b>=0;b--)ad(a.doc,"",d[b].from,d[b].to,"+delete");gd(a)})}function ld(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=se(a,b))}function g(a){var b=(e?If:Jf)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?Cf:Bf)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=se(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=a.cm&&a.cm.getHelper(b,"wordChars"),p=!0;!(0>c)||g(!p);p=!1){var q=k.text.charAt(i)||"\n",r=ff(q,o)?"w":n&&"\n"==q?"n":!n||/\s/.test(q)?null:"p";if(!n||p||r||(r="s"),m&&m!=r){0>c&&(c=1,g());break}if(r&&(m=r),c>0&&!g(!p))break}var s=nb(a,gg(h,i),j,!0);return l||(s.hitSide=!0),s}function md(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*Ub(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=Sb(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function nd(a,b){var c=a.doc,d=se(c,b.line).text,e=b.ch,f=b.ch;if(d){var g=a.getHelper(b,"wordChars");(b.xRel<0||f==d.length)&&e?--e:++f;for(var h=d.charAt(e),i=ff(h,g)?function(a){return ff(a,g)}:/\s/.test(h)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!ff(a)};e>0&&i(d.charAt(e-1));)--e;for(;f<d.length&&i(d.charAt(f));)++f}return new V(gg(b.line,e),gg(b.line,f))}function od(b,c,d,e){a.defaults[b]=c,d&&(ug[b]=e?function(a,b,c){c!=vg&&d(a,b,c)}:d)}function pd(a){return"string"==typeof a?Eg[a]:a}function qd(a,b,c,d,e){if(d&&d.shared)return rd(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return Zb(a.cm,qd)(a,b,c,d,e);var f=new Jg(a,e),g=hg(b,c);if(d&&df(d,f,!1),g>0||0==g&&f.clearWhenEmpty!==!1)return f;if(f.replacedWith&&(f.collapsed=!0,f.widgetNode=jf("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=!0)),f.collapsed){if(Nd(a,b.line,b,c,f)||b.line!=c.line&&Nd(a,c.line,b,c,f))throw new Error("Inserting collapsed marker partially overlapping an existing one");fg=!0}f.addToHistory&&Ee(a,{from:b,to:c,origin:"markText"},a.sel,0/0);var h,i=b.line,j=a.cm;if(a.iter(i,c.line+1,function(a){j&&f.collapsed&&!j.options.lineWrapping&&Od(a)==j.display.maxLine&&(h=!0),f.collapsed&&i!=b.line&&ve(a,0),yd(a,new vd(f,i==b.line?b.ch:null,i==c.line?c.ch:null)),++i}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Sd(a,b)&&ve(b,0)}),f.clearOnEnter&&Yg(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(eg=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed&&(f.id=++Kg,f.atomic=!0),j){if(h&&(j.curOp.updateMaxLine=!0),f.collapsed)cc(j,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle)for(var k=b.line;k<=c.line;k++)dc(j,k,"text");f.atomic&&lb(j.doc),Se(j,"markerAdded",j,f)}return f}function rd(a,b,c,d,e){d=df(d),d.shared=!1;var f=[qd(a,b,c,d,e)],g=f[0],h=d.widgetNode;return qe(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(qd(a,Z(a,b),Z(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=_e(f)}),new Lg(f,g)}function sd(a){return a.findMarks(gg(a.first,0),a.clipPos(gg(a.lastLine())),function(a){return a.parent})}function td(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(hg(f,g)){var h=qd(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function ud(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];qe(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==af(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function vd(a,b,c){this.marker=a,this.from=b,this.to=c}function wd(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function xd(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function yd(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function zd(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new vd(g,f.from,i?null:f.to))}}return d}function Ad(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new vd(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function Bd(a,b){var c=_(a,b.from.line)&&se(a,b.from.line).markedSpans,d=_(a,b.to.line)&&se(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==hg(b.from,b.to),h=zd(c,e,g),i=Ad(d,f,g),j=1==b.text.length,k=_e(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=wd(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=wd(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}h&&(h=Cd(h)),i&&i!=h&&(i=Cd(i));var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push(new vd(h[l].marker,null,null));for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Cd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function Dd(a,b){var c=Ke(a,b),d=Bd(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Ed(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=af(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(hg(j.to,h.from)<0||hg(j.from,h.to)>0)){var k=[i,1],l=hg(j.from,h.from),m=hg(j.to,h.to);(0>l||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(m>0||!g.inclusiveRight&&!m)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Fd(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Gd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Hd(a){return a.inclusiveLeft?-1:0}function Id(a){return a.inclusiveRight?1:0}function Jd(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=hg(d.from,e.from)||Hd(a)-Hd(b);if(f)return-f;var g=hg(d.to,e.to)||Id(a)-Id(b);return g?g:b.id-a.id}function Kd(a,b){var c,d=fg&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||Jd(c,e.marker)<0)&&(c=e.marker);return c}function Ld(a){return Kd(a,!0)}function Md(a){return Kd(a,!1)}function Nd(a,b,c,d,e){var f=se(a,b),g=fg&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=hg(j.from,c)||Hd(i.marker)-Hd(e),l=hg(j.to,d)||Id(i.marker)-Id(e);if(!(k>=0&&0>=l||0>=k&&l>=0)&&(0>=k&&(hg(j.to,c)||Id(i.marker)-Hd(e))>0||k>=0&&(hg(j.from,d)||Hd(i.marker)-Id(e))<0))return!0}}}function Od(a){for(var b;b=Ld(a);)a=b.find(-1,!0).line;return a}function Pd(a){for(var b,c;b=Md(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function Qd(a,b){var c=se(a,b),d=Od(c);return c==d?b:we(d)}function Rd(a,b){if(b>a.lastLine())return b;var c,d=se(a,b);if(!Sd(a,d))return b;for(;c=Md(d);)d=c.find(1,!0).line;return we(d)+1}function Sd(a,b){var c=fg&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Td(a,b,d))return!0}}function Td(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return Td(a,d.line,wd(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&Td(a,b,e))return!0}function Ud(a,b,c){ye(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&fd(a,null,c)}function Vd(a){return null!=a.height?a.height:(mf(document.body,a.node)||lf(a.cm.display.measure,jf("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Wd(a,b,c,d){var e=new Mg(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),jd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Sd(a.doc,b)){var d=ye(b)<a.doc.scrollTop;ve(b,b.height+Vd(e)),d&&fd(a,null,e.height),a.curOp.forceUpdate=!0}return!0}),e}function Xd(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Fd(a),Gd(a,c);var e=d?d(a):1;e!=a.height&&ve(a,e)}function Yd(a){a.parent=null,Fd(a)}function Zd(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function $d(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);return d.mode.blankLine?d.mode.blankLine(d.state):void 0}}function _d(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw new Error("Mode "+a.name+" failed to advance stream.")}function ae(b,c,d,e,f,g,h){var i=d.flattenSpans;null==i&&(i=b.options.flattenSpans);var j,k=0,l=null,m=new Ig(c,b.options.tabSize);for(""==c&&Zd($d(d,e),g);!m.eol();){if(m.pos>b.options.maxHighlightLength?(i=!1,h&&de(b,c,e,m.pos),m.pos=c.length,j=null):j=Zd(_d(d,m,e),g),b.options.addModeClass){var n=a.innerMode(d,e).mode.name;n&&(j="m-"+(j?n+" "+j:n))}i&&l==j||(k<m.start&&f(m.start,l),k=m.start,l=j),m.start=m.pos}for(;k<m.pos;){var o=Math.min(m.pos,k+5e4);f(o,l),k=o}}function be(a,b,c,d){var e=[a.state.modeGen],f={};ae(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(var g=0;g<a.state.overlays.length;++g){var h=a.state.overlays[g],i=1,j=0;ae(a,b.text,h.mode,!0,function(a,b){for(var c=i;a>j;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"cm-overlay "+b),i=c+2;else for(;i>c;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"cm-overlay "+b}},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function ce(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=be(a,b,b.stateAfter=vb(a,we(b)));b.styles=c.styles,c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function de(a,b,c,d){var e=a.doc.mode,f=new Ig(b,a.options.tabSize);for(f.start=f.pos=d||0,""==b&&$d(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)_d(e,f,c),f.start=f.pos}function ee(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?Pg:Og;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function fe(a,b){var c=jf("span",null,null,Rf?"padding-right: .1px":null),d={pre:jf("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var e=0;e<=(b.rest?b.rest.length:0);e++){var f,g=e?b.rest[e-1]:b.line;d.pos=0,d.addToken=he,(Qf||Rf)&&a.getOption("lineWrapping")&&(d.addToken=ie(d.addToken)),xf(a.display.measure)&&(f=ze(g))&&(d.addToken=je(d.addToken,f)),d.map=[],le(g,d,ce(a,g)),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=rf(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=rf(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(wf(a.display.measure))),0==e?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return $g(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=rf(d.pre.className,d.textClass||"")),d}function ge(a){var b=jf("span","•","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b}function he(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars,h=!1;if(g.test(b))for(var i=document.createDocumentFragment(),j=0;;){g.lastIndex=j;var k=g.exec(b),l=k?k.index-j:b.length-j;if(l){var m=document.createTextNode(b.slice(j,j+l));i.appendChild(Nf?jf("span",[m]):m),a.map.push(a.pos,a.pos+l,m),a.col+=l,a.pos+=l}if(!k)break;if(j+=l+1,"	"==k[0]){var n=a.cm.options.tabSize,o=n-a.col%n,m=i.appendChild(jf("span",$e(o),"cm-tab"));a.col+=o}else{var m=a.cm.options.specialCharPlaceholder(k[0]);i.appendChild(Nf?jf("span",[m]):m),a.col+=1}a.map.push(a.pos,a.pos+1,m),a.pos++}else{a.col+=b.length;var i=document.createTextNode(b);a.map.push(a.pos,a.pos+b.length,i),Nf&&(h=!0),a.pos+=b.length}if(c||d||e||h){var p=c||"";d&&(p+=d),e&&(p+=e);var q=jf("span",[i],p);return f&&(q.title=f),a.content.appendChild(q)}a.content.appendChild(i)}}function ie(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":" ";return b+=" "}return function(c,d,e,f,g,h){a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function je(a,b){return function(c,d,e,f,g,h){e=e?e+" cm-force-border":"cm-force-border";for(var i=c.pos,j=i+d.length;;){for(var k=0;k<b.length;k++){var l=b[k];if(l.to>i&&l.from<=i)break}if(l.to>=j)return a(c,d,e,f,g,h);a(c,d.slice(0,l.to-i),e,f,null,h),f=null,d=d.slice(l.to-i),i=l.to}}}function ke(a,b,c,d){var e=!d&&c.widgetNode;e&&(a.map.push(a.pos,a.pos+b,e),a.content.appendChild(e)),a.pos+=b}function le(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m=e.length,n=0,o=1,p="",q=0;;){if(q==n){h=i=j=k="",l=null,q=1/0;for(var r=[],s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=n&&(null==t.to||t.to>n)?(null!=t.to&&q>t.to&&(q=t.to,i=""),u.className&&(h+=" "+u.className),u.startStyle&&t.from==n&&(j+=" "+u.startStyle),u.endStyle&&t.to==q&&(i+=" "+u.endStyle),u.title&&!k&&(k=u.title),u.collapsed&&(!l||Jd(l.marker,u)<0)&&(l=t)):t.from>n&&q>t.from&&(q=t.from),"bookmark"==u.type&&t.from==n&&u.widgetNode&&r.push(u)}if(l&&(l.from||0)==n&&(ke(b,(null==l.to?m+1:l.to)-n,l.marker,null==l.from),null==l.to))return;if(!l&&r.length)for(var s=0;s<r.length;++s)ke(b,0,r[s])}if(n>=m)break;for(var v=Math.min(m,q);;){if(p){var w=n+p.length;if(!l){var x=w>v?p.slice(0,v-n):p;b.addToken(b,x,g?g+h:h,j,n+x.length==q?i:"",k)}if(w>=v){p=p.slice(v-n),n=v;break}n=w,j=""}p=e.slice(f,f=c[o++]),g=ee(c[o++],b.cm.options)}}else for(var o=1;o<c.length;o+=2)b.addToken(b,e.slice(f,f=c[o]),ee(c[o+1],b.cm.options))}function me(a,b){return 0==b.from.ch&&0==b.to.ch&&""==_e(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function ne(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){Xd(a,c,e,d),Se(a,"change",a,b)}var g=b.from,h=b.to,i=b.text,j=se(a,g.line),k=se(a,h.line),l=_e(i),m=e(i.length-1),n=h.line-g.line;if(me(a,b)){for(var o=0,p=[];o<i.length-1;++o)p.push(new Ng(i[o],e(o),d));f(k,k.text,m),n&&a.remove(g.line,n),p.length&&a.insert(g.line,p)}else if(j==k)if(1==i.length)f(j,j.text.slice(0,g.ch)+l+j.text.slice(h.ch),m);else{for(var p=[],o=1;o<i.length-1;++o)p.push(new Ng(i[o],e(o),d));p.push(new Ng(l+j.text.slice(h.ch),m,d)),f(j,j.text.slice(0,g.ch)+i[0],e(0)),a.insert(g.line+1,p)}else if(1==i.length)f(j,j.text.slice(0,g.ch)+i[0]+k.text.slice(h.ch),e(0)),a.remove(g.line+1,n);else{f(j,j.text.slice(0,g.ch)+i[0],e(0)),f(k,l+k.text.slice(h.ch),m);for(var o=1,p=[];o<i.length-1;++o)p.push(new Ng(i[o],e(o),d));n>1&&a.remove(g.line+1,n-1),a.insert(g.line+1,p)}Se(a,"change",a,b)}function oe(a){this.lines=a,this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function pe(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d];b+=e.chunkSize(),c+=e.height,e.parent=this}this.size=b,this.height=c,this.parent=null}function qe(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function re(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,g(a),c(a),a.options.lineWrapping||n(a),a.options.mode=b.modeOption,cc(a)}function se(a,b){if(b-=a.first,0>b||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(f>b){c=e;break}b-=f}return c.lines[b]}function te(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function ue(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function ve(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function we(a){if(null==a.parent)return null;for(var b=a.parent,c=af(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function xe(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(f>b){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var d=0;d<a.lines.length;++d){var g=a.lines[d],h=g.height;if(h>b)break;b-=h}return c+d}function ye(a){a=Od(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var d=0;d<f.children.length;++d){var g=f.children[d];if(g==c)break;b+=g.height}return b}function ze(a){var b=a.order;return null==b&&(b=a.order=wh(a.text)),b}function Ae(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function Be(a,b){var c={from:R(b.from),to:sg(b),text:te(a,b.from,b.to)};return Ie(a,c,b.from.line,b.to.line+1),qe(a,function(a){Ie(a,c,b.from.line,b.to.line+1)},!0),c}function Ce(a){for(;a.length;){var b=_e(a);if(!b.ranges)break;a.pop()}}function De(a,b){return b?(Ce(a.done),_e(a.done)):a.done.length&&!_e(a.done).ranges?_e(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),_e(a.done)):void 0}function Ee(a,b,c,d){var e=a.history;e.undone.length=0;var f,g=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>g-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=De(e,e.lastOp==d))){var h=_e(f.changes);0==hg(b.from,b.to)&&0==hg(b.from,h.to)?h.to=sg(b):f.changes.push(Be(a,b))}else{var i=_e(e.done);for(i&&i.ranges||He(a.sel,e.done),f={changes:[Be(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=g,e.lastOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,h||$g(a,"historyAdded")}function Fe(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function Ge(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||Fe(a,f,_e(e.done),b))?e.done[e.done.length-1]=b:He(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastOp=c,d&&d.clearRedo!==!1&&Ce(e.undone)}function He(a,b){var c=_e(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Ie(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function Je(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function Ke(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(Je(c[d]));return e}function Le(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?U.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];e.push({changes:h});for(var i=0;i<g.length;++i){var j,k=g[i];if(h.push({from:k.from,to:k.to,text:k.text}),b)for(var l in k)(j=l.match(/^spans_(\d+)$/))&&af(b,Number(j[1]))>-1&&(_e(h)[l]=k[l],delete k[l])}}}return e}function Me(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ne(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Me(f.ranges[h].anchor,b,c,d),Me(f.ranges[h].head,b,c,d)}else{for(var h=0;h<f.changes.length;++h){var i=f.changes[h];if(c<i.from.line)i.from=gg(i.from.line+d,i.from.ch),i.to=gg(i.to.line+d,i.to.ch);else if(b<=i.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Oe(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ne(a.done,c,d,e),Ne(a.undone,c,d,e)}function Pe(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Qe(a){return a.target||a.srcElement}function Re(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),_f&&a.ctrlKey&&1==b&&(b=3),b}function Se(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Ug||(++_g,Ug=[],setTimeout(Te,0));for(var f=0;f<d.length;++f)Ug.push(c(d[f]))}}function Te(){--_g;var a=Ug;Ug=null;for(var b=0;b<a.length;++b)a[b]()}function Ue(a,b,c){return $g(a,c||b.type,a,b),Pe(b)||b.codemirrorIgnore}function Ve(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==af(c,b[d])&&c.push(b[d])}function We(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Xe(a){a.prototype.on=function(a,b){Yg(this,a,b)},a.prototype.off=function(a,b){Zg(this,a,b)}}function Ye(){this.id=null}function Ze(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function $e(a){for(;gh.length<=a;)gh.push(_e(gh)+" ");return gh[a]}function _e(a){return a[a.length-1]}function af(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function bf(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function cf(a,b){var c;if(Object.create)c=Object.create(a);else{var d=function(){};d.prototype=a,c=new d}return b&&df(b,c),c}function df(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function ef(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function ff(a,b){return b?b.source.indexOf("\\w")>-1&&kh(a)?!0:b.test(a):kh(a)}function gf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function hf(a){return a.charCodeAt(0)>=768&&lh.test(a)}function jf(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function kf(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function lf(a,b){return kf(a).appendChild(b)}function mf(a,b){if(a.contains)return a.contains(b);for(;b=b.parentNode;)if(b==a)return!0}function nf(){return document.activeElement}function of(a){return new RegExp("\\b"+a+"\\b\\s*")}function pf(a,b){var c=of(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function qf(a,b){of(b).test(a.className)||(a.className+=" "+b)}function rf(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!of(c[d]).test(b)&&(b+=" "+c[d]);return b}function sf(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function tf(){ph||(uf(),ph=!0)}function uf(){var a;Yg(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,mh=null,sf(rc)},100))}),Yg(window,"blur",function(){sf(Oc)})}function vf(a){if(null!=mh)return mh;var b=jf("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return lf(a,b),b.offsetWidth&&(mh=b.offsetHeight-b.clientHeight),mh||0}function wf(a){if(null==nh){var b=jf("span","​");lf(a,jf("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(nh=b.offsetWidth<=1&&b.offsetHeight>2&&!Mf)}return nh?jf("span","​"):jf("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function xf(a){if(null!=oh)return oh;var b=lf(a,document.createTextNode("AخA")),c=ih(b,0,1).getBoundingClientRect();if(c.left==c.right)return!1;var d=ih(b,1,2).getBoundingClientRect();return oh=d.right-c.right<3}function yf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function zf(a){return a.level%2?a.to:a.from}function Af(a){return a.level%2?a.from:a.to}function Bf(a){var b=ze(a);return b?zf(b[0]):0}function Cf(a){var b=ze(a);return b?Af(_e(b)):a.text.length}function Df(a,b){var c=se(a.doc,b),d=Od(c);d!=c&&(b=we(d));var e=ze(d),f=e?e[0].level%2?Cf(d):Bf(d):0;return gg(b,f)}function Ef(a,b){for(var c,d=se(a.doc,b);c=Md(d);)d=c.find(1,!0).line,b=null;var e=ze(d),f=e?e[0].level%2?Bf(d):Cf(d):d.text.length;return gg(null==b?we(d):b,f)}function Ff(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function Gf(a,b){vh=null;for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return d;if(e.from==b||e.to==b){if(null!=c)return Ff(a,e.level,a[c].level)?(e.from!=e.to&&(vh=c),d):(e.from!=e.to&&(vh=d),c);c=d}}return c}function Hf(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&hf(a.text.charAt(b)));return b}function If(a,b,c,d){var e=ze(a);if(!e)return Jf(a,b,c,d);for(var f=Gf(e,b),g=e[f],h=Hf(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return Gf(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?Hf(a,g.to,-1,d):Hf(a,g.from,1,d)}}function Jf(a,b,c,d){var e=b+c;if(d)for(;e>0&&hf(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var Kf=/gecko\/\d/i.test(navigator.userAgent),Lf=/MSIE \d/.test(navigator.userAgent),Mf=Lf&&(null==document.documentMode||document.documentMode<8),Nf=Lf&&(null==document.documentMode||document.documentMode<9),Of=Lf&&(null==document.documentMode||document.documentMode<10),Pf=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),Qf=Lf||Pf,Rf=/WebKit\//.test(navigator.userAgent),Sf=Rf&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Tf=/Chrome\//.test(navigator.userAgent),Uf=/Opera\//.test(navigator.userAgent),Vf=/Apple Computer/.test(navigator.vendor),Wf=/KHTML\//.test(navigator.userAgent),Xf=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Yf=/PhantomJS/.test(navigator.userAgent),Zf=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),$f=Zf||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),_f=Zf||/Mac/.test(navigator.platform),ag=/win/i.test(navigator.platform),bg=Uf&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);bg&&(bg=Number(bg[1])),bg&&bg>=15&&(Uf=!1,Rf=!0);var cg=_f&&(Sf||Uf&&(null==bg||12.11>bg)),dg=Kf||Qf&&!Nf,eg=!1,fg=!1,gg=a.Pos=function(a,b){return this instanceof gg?(this.line=a,void(this.ch=b)):new gg(a,b)},hg=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};U.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=hg(c.anchor,d.anchor)||0!=hg(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new V(R(this.ranges[b].anchor),R(this.ranges[b].head));return new U(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(hg(b,d.from())>=0&&hg(a,d.to())<=0)return c}return-1}},V.prototype={from:function(){return T(this.anchor,this.head)},to:function(){return S(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var ig,jg,kg,lg={left:0,right:0,top:0,bottom:0},mg=0,ng=0,og=0,pg=null;Qf?pg=-.53:Kf?pg=15:Tf?pg=-.7:Vf&&(pg=-1/3);var qg,rg=null,sg=a.changeEnd=function(a){return a.text?gg(a.from.line+a.text.length-1,_e(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus(),nc(this),kc(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,ug.hasOwnProperty(a)&&Zb(this,ug[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:$b(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,cc(this)}),removeOverlay:$b(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void cc(this)}}),indentLine:$b(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),_(this.doc,a)&&id(this,a,b,c)}),indentSelection:$b(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];
if(e.empty())e.head.line>c&&(id(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&gd(this));else{var f=Math.max(c,e.from().line),g=e.to();c=Math.min(this.lastLine(),g.line-(g.ch?0:1))+1;for(var h=f;c>h;++h)id(this,h,a)}}}),getTokenAt:function(a,b){var c=this.doc;a=Z(c,a);for(var d=vb(this,a.line,b),e=this.doc.mode,f=se(c,a.line),g=new Ig(f.text,this.options.tabSize);g.pos<a.ch&&!g.eol();){g.start=g.pos;var h=_d(e,g,d)}return{start:g.start,end:g.pos,string:g.current(),type:h||null,state:d}},getTokenTypeAt:function(a){a=Z(this.doc,a);var b,c=ce(this,se(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("cm-overlay "):-1;return 0>h?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Ag.hasOwnProperty(b))return Ag;var d=Ag[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(var f=0;f<d._global.length;f++){var h=d._global[f];h.pred(e,this)&&-1==af(c,h.val)&&c.push(h.val)}return c},getStateAfter:function(a,b){var c=this.doc;return a=Y(c,null==a?c.first+c.size-1:a),vb(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?Z(this.doc,a):a?d.from():d.to(),Pb(this,c,b||"page")},charCoords:function(a,b){return Ob(this,Z(this.doc,a),b||"page")},coordsChar:function(a,b){return a=Nb(this,a,b||"page"),Sb(this,a.left,a.top)},lineAtHeight:function(a,b){return a=Nb(this,{top:a,left:0},b||"page").top,xe(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=se(this.doc,a);return Mb(this,e,{top:0,left:0},b||"page").top+(c?this.doc.height-ye(e):0)},defaultTextHeight:function(){return Ub(this.display)},defaultCharWidth:function(){return Vb(this.display)},setGutterMarker:$b(function(a,b,c){return jd(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&gf(d)&&(a.gutterMarkers=null),!0})}),clearGutter:$b(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,dc(b,d,"gutter"),gf(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:$b(function(a,b,c){return jd(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:$b(function(a,b,c){return jd(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:$b(function(a,b,c){return Wd(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!_(this.doc,a))return null;var b=a;if(a=se(this.doc,a),!a)return null}else{var b=we(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Pb(this,Z(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&dd(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:$b(Jc),triggerOnKeyPress:$b(Mc),triggerOnKeyUp:$b(Lc),execCommand:function(a){return Dg.hasOwnProperty(a)?Dg[a](this):void 0},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=Z(this.doc,a);b>f&&(g=ld(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:$b(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?ld(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},eh)}),deleteH:$b(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):kd(this,function(c){var e=ld(d,c.head,a,b,!1);return 0>a?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=Z(this.doc,a);b>g;++g){var i=Pb(this,h,"div");if(null==f?f=i.left:i.left=f,h=md(this,i,e,c),h.hitSide)break}return h},moveV:$b(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=Pb(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=md(c,h,a,b);return"page"==b&&g==d.sel.primary()&&fd(c,null,Ob(c,i,"div").top-h.top),i},eh),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?qf(this.display.cursorDiv,"CodeMirror-overwrite"):pf(this.display.cursorDiv,"CodeMirror-overwrite"),$g(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return nf()==this.display.input},scrollTo:$b(function(a,b){(null!=a||null!=b)&&hd(this),null!=a&&(this.curOp.scrollLeft=a),null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=ah;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:$b(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:gg(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)hd(this),this.curOp.scrollToPos=a;else{var c=ed(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:$b(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&Ib(this),this.curOp.forceUpdate=!0,$g(this,"refresh",this)}),operation:function(a){return Yb(this,a)},refresh:$b(function(){var a=this.display.cachedTextHeight;cc(this),this.curOp.forceUpdate=!0,Jb(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),l(this),(null==a||Math.abs(a-Ub(this.display))>.5)&&g(this),$g(this,"refresh",this)}),swapDoc:$b(function(a){var b=this.doc;return b.cm=null,re(this,a),Jb(this),mc(this),this.scrollTo(a.scrollLeft,a.scrollTop),Se(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Xe(a);var tg=a.defaults={},ug=a.optionHandlers={},vg=a.Init={toString:function(){return"CodeMirror.Init"}};od("value","",function(a,b){a.setValue(b)},!0),od("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),od("indentUnit",2,c,!0),od("indentWithTabs",!1),od("smartIndent",!0),od("tabSize",4,function(a){d(a),Jb(a),cc(a)},!0),od("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),a.refresh()},!0),od("specialCharPlaceholder",ge,function(a){a.refresh()},!0),od("electricChars",!0),od("rtlMoveVisually",!ag),od("wholeLineUpdateBefore",!0),od("theme","default",function(a){i(a),j(a)},!0),od("keyMap","default",h),od("extraKeys",null),od("lineWrapping",!1,e,!0),od("gutters",[],function(a){o(a.options),j(a)},!0),od("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?v(a.display)+"px":"0",a.refresh()},!0),od("coverGutterNextToScrollbar",!1,q,!0),od("lineNumbers",!1,function(a){o(a.options),j(a)},!0),od("firstLineNumber",1,j,!0),od("lineNumberFormatter",function(a){return a},j,!0),od("showCursorWhenSelecting",!1,ob,!0),od("resetSelectionOnContextMenu",!0),od("readOnly",!1,function(a,b){"nocursor"==b?(Oc(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||mc(a))}),od("disableInput",!1,function(a,b){b||mc(a)},!0),od("dragDrop",!0),od("cursorBlinkRate",530),od("cursorScrollMargin",0),od("cursorHeight",1),od("workTime",100),od("workDelay",100),od("flattenSpans",!0,d,!0),od("addModeClass",!1,d,!0),od("pollInterval",100),od("undoDepth",200,function(a,b){a.doc.history.undoDepth=b}),od("historyEventDelay",1250),od("viewportMargin",10,function(a){a.refresh()},!0),od("maxHighlightLength",1e4,d,!0),od("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),od("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),od("autofocus",null);var wg=a.modes={},xg=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}wg[b]=c},a.defineMIME=function(a,b){xg[a]=b},a.resolveMode=function(b){if("string"==typeof b&&xg.hasOwnProperty(b))b=xg[b];else if(b&&"string"==typeof b.name&&xg.hasOwnProperty(b.name)){var c=xg[b.name];"string"==typeof c&&(c={name:c}),b=cf(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=wg[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(yg.hasOwnProperty(c.name)){var f=yg[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}if(e.name=c.name,c.helperType&&(e.helperType=c.helperType),c.modeProps)for(var g in c.modeProps)e[g]=c.modeProps[g];return e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var yg=a.modeExtensions={};a.extendMode=function(a,b){var c=yg.hasOwnProperty(a)?yg[a]:yg[a]={};df(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){Rg.prototype[a]=b},a.defineOption=od;var zg=[];a.defineInitHook=function(a){zg.push(a)};var Ag=a.helpers={};a.registerHelper=function(b,c,d){Ag.hasOwnProperty(b)||(Ag[b]=a[b]={_global:[]}),Ag[b][c]=d},a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e),Ag[b]._global.push({pred:d,val:e})};var Bg=a.copyState=function(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c},Cg=a.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var Dg=a.commands={selectAll:function(a){a.setSelection(gg(a.firstLine(),0),gg(a.lastLine()),ch)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ch)},killLine:function(a){kd(a,function(b){if(b.empty()){var c=se(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:gg(b.head.line+1,0)}:{from:b.head,to:gg(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){kd(a,function(b){return{from:gg(b.from().line,0),to:Z(a.doc,gg(b.to().line+1,0))}})},delLineLeft:function(a){kd(a,function(a){return{from:gg(a.from().line,0),to:a.from()}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(gg(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(gg(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Df(a,b.head.line)},eh)},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){var c=Df(a,b.head.line),d=a.getLineHandle(c.line),e=ze(d);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.head.line==c.line&&b.head.ch<=f&&b.head.ch;return gg(c.line,g?0:f)}return c},eh)},goLineEnd:function(a){a.extendSelectionsBy(function(b){return Ef(a,b.head.line)},eh)},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},eh)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},eh)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=fh(a.getLine(f.line),f.ch,d);b.push(new Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Yb(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=se(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new gg(e.line,e.ch-1)),e.ch>0)e=new gg(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),gg(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=se(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+"\n"+g.charAt(g.length-1),gg(e.line-1,g.length-1),gg(e.line,1),"+transpose")}c.push(new V(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Yb(a,function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0),gd(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Eg=a.keyMap={};Eg.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Eg.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Eg.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Eg.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Eg["default"]=_f?Eg.macDefault:Eg.pcDefault;var Fg=a.lookupKey=function(a,b,c){function d(b){b=pd(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0;g<f.length;++g){var h=d(f[g]);if(h)return h}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},Gg=a.isModifierKey=function(a){var b=uh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b},Hg=a.keyName=function(a,b){if(Uf&&34==a.keyCode&&a["char"])return!1;var c=uh[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(cg?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(cg?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)};a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=nf();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Yg(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d(),f.submit=g,f.submit(),f.submit=h}}catch(i){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Zg(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))},j};var Ig=a.StringStream=function(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ig.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fh(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?fh(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return fh(this.string,null,this.tabSize)-(this.lineStart?fh(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var Jg=a.TextMarker=function(a,b){this.lines=[],this.type=b,this.doc=a};Xe(Jg),Jg.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&Wb(a),We(this,"clear")){var c=this.find();c&&Se(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=wd(g.markedSpans,this);a&&!this.collapsed?dc(a,we(g),"text"):a&&(null!=h.to&&(e=we(g)),null!=h.from&&(d=we(g))),g.markedSpans=xd(g.markedSpans,h),null==h.from&&this.collapsed&&!Sd(this.doc,g)&&a&&ve(g,Ub(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Od(this.lines[f]),j=m(i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&this.collapsed&&cc(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&lb(a.doc)),a&&Se(a,"markerCleared",a,this),b&&Xb(a),this.parent&&this.parent.clear()}},Jg.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=wd(f.markedSpans,this);if(null!=g.from&&(c=gg(b?f:we(f),g.from),-1==a))return c;if(null!=g.to&&(d=gg(b?f:we(f),g.to),1==a))return d}return c&&{from:c,to:d}},Jg.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Yb(c,function(){var d=a.line,e=we(a.line),f=Db(c,e);if(f&&(Hb(f),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Sd(b.doc,d)&&null!=b.height){var g=b.height;b.height=null;var h=Vd(b)-g;h&&ve(d,d.height+h)}})},Jg.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=af(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Jg.prototype.detachLine=function(a){if(this.lines.splice(af(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}};var Kg=0,Lg=a.SharedTextMarker=function(a,b){this.markers=a,this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Xe(Lg),Lg.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Se(this,"clear")}},Lg.prototype.find=function(a,b){return this.primary.find(a,b)};var Mg=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};Xe(Mg),Mg.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=we(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Vd(this);Yb(a,function(){Ud(a,c,-f),dc(a,d,"widget"),ve(c,Math.max(0,c.height-f))})}},Mg.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=Vd(this)-a;d&&Yb(b,function(){b.curOp.forceUpdate=!0,Ud(b,c,d),ve(c,c.height+d)})};var Ng=a.Line=function(a,b,c){this.text=a,Gd(this,b),this.height=c?c(this):1};Xe(Ng),Ng.prototype.lineNo=function(){return we(this)};var Og={},Pg={};oe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Yd(e),Se(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0;d<b.length;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},pe.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof oe))){var h=[];this.collapse(h),this.children=[new oe(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>=a){if(e.insertInner(a,b,c),e.lines&&e.lines.length>50){for(;e.lines.length>50;){var g=e.lines.splice(e.lines.length-25,25),h=new oe(g);e.height-=h.height,this.children.splice(d+1,0,h),h.parent=this}this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new pe(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=af(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new pe(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=f}}};var Qg=0,Rg=a.Doc=function(a,b,c){if(!(this instanceof Rg))return new Rg(a,b,c);null==c&&(c=0),pe.call(this,[new oe([new Ng("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var d=gg(c,0);this.sel=X(d),this.history=new Ae(null),this.id=++Qg,this.modeOption=b,"string"==typeof a&&(a=rh(a)),ne(this,{from:d,to:d,text:a}),ib(this,X(d),ch)};Rg.prototype=cf(pe.prototype,{constructor:Rg,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=ue(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:_b(function(a){var b=gg(this.first,0),c=this.first+this.size-1;Wc(this,{from:b,to:gg(c,se(this,c).text.length),text:rh(a),origin:"setValue"},!0),ib(this,X(b))}),replaceRange:function(a,b,c,d){b=Z(this,b),c=c?Z(this,c):b,ad(this,a,b,c,d)},getRange:function(a,b,c){var d=te(this,Z(this,a),Z(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){return _(this,a)?se(this,a):void 0},getLineNumber:function(a){return we(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=se(this,a)),Od(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Z(this,a)},getCursor:function(a){var b,c=this.sel.primary();return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||"to"==a||a===!1?c.to():c.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:_b(function(a,b,c){fb(this,Z(this,"number"==typeof a?gg(a,b||0):a),null,c)}),setSelection:_b(function(a,b,c){fb(this,Z(this,a),Z(this,b||a),c)}),extendSelection:_b(function(a,b,c){cb(this,Z(this,a),b&&Z(this,b),c)}),extendSelections:_b(function(a,b){db(this,ab(this,a,b))}),extendSelectionsBy:_b(function(a,b){db(this,bf(this.sel.ranges,a),b)}),setSelections:_b(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new V(Z(this,a[d].anchor),Z(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),ib(this,W(e,b),c)}}),addSelection:_b(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new V(Z(this,a),Z(this,b||a))),ib(this,W(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=te(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return a===!1?b:b.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=te(this,c[d].from(),c[d].to());a!==!1&&(e=e.join(a||"\n")),b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:_b(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:rh(a[f]),origin:c}}for(var h=b&&"end"!=b&&Uc(this,d,b),f=d.length-1;f>=0;f--)Wc(this,d[f]);h?hb(this,h):this.cm&&gd(this.cm)}),undo:_b(function(){Yc(this,"undo")}),redo:_b(function(){Yc(this,"redo")}),undoSelection:_b(function(){Yc(this,"undo",!0)}),redoSelection:_b(function(){Yc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Ae(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Le(this.history.done),undone:Le(this.history.undone)}},setHistory:function(a){var b=this.history=new Ae(this.history.maxGeneration);b.done=Le(a.done.slice(0),null,!0),b.undone=Le(a.undone.slice(0),null,!0)},markText:function(a,b,c){return qd(this,Z(this,a),Z(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};return a=Z(this,a),qd(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Z(this,a);var b=[],c=se(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=Z(this,a),b=Z(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];e==a.line&&a.ch>i.to||null==i.from&&e!=a.line||e==b.line&&i.from>b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),Z(this,gg(c,b))},indexFromPos:function(a){a=Z(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new Rg(ue(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new Rg(ue(this,b,c),a.mode||this.modeOption,b);
return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],td(d,sd(this)),d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this),ud(sd(this));break}}if(b.history==this.history){var e=[b.id];qe(b,function(a){e.push(a.id)},!0),b.history=new Ae(null),b.history.done=Le(this.history.done,e),b.history.undone=Le(this.history.undone,e)}},iterLinkedDocs:function(a){qe(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Rg.prototype.eachLine=Rg.prototype.iter;var Sg="iter insert remove copy getEditor".split(" ");for(var Tg in Rg.prototype)Rg.prototype.hasOwnProperty(Tg)&&af(Sg,Tg)<0&&(a.prototype[Tg]=function(a){return function(){return a.apply(this.doc,arguments)}}(Rg.prototype[Tg]));Xe(Rg);var Ug,Vg=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Wg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Xg=a.e_stop=function(a){Vg(a),Wg(a)},Yg=a.on=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}},Zg=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}},$g=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},_g=0,ah=30,bh=a.Pass={toString:function(){return"CodeMirror.Pass"}},ch={scroll:!1},dh={origin:"*mouse"},eh={origin:"+move"};Ye.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var fh=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(0>h||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}},gh=[""],hh=function(a){a.select()};Zf?hh=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:Qf&&(hh=function(a){try{a.select()}catch(b){}}),[].indexOf&&(af=function(a,b){return a.indexOf(b)}),[].map&&(bf=function(a,b){return a.map(b)});var ih,jh=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,kh=a.isWordChar=function(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||jh.test(a))},lh=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;ih=document.createRange?function(a,b,c){var d=document.createRange();return d.setEnd(a,c),d.setStart(a,b),d}:function(a,b,c){var d=document.body.createTextRange();return d.moveToElementText(a.parentNode),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d},Lf&&(nf=function(){try{return document.activeElement}catch(a){return document.body}});var mh,nh,oh,ph=!1,qh=function(){if(Nf)return!1;var a=jf("div");return"draggable"in a||"dragDrop"in a}(),rh=a.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},sh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},th=function(){var a=jf("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),uh={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=uh,function(){for(var a=0;10>a;a++)uh[a+48]=uh[a+96]=String(a);for(var a=65;90>=a;a++)uh[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)uh[a+111]=uh[a+63235]="F"+a}();var vh,wh=function(){function a(a){return 247>=a?c.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1773>=a?d.charAt(a-1536):a>=1774&&2220>=a?"r":a>=8192&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/,j="L";return function(c){if(!e.test(c))return!1;for(var d,k=c.length,l=[],m=0;k>m;++m)l.push(d=a(c.charCodeAt(m)));for(var m=0,n=j;k>m;++m){var d=l[m];"m"==d?l[m]=n:n=d}for(var m=0,o=j;k>m;++m){var d=l[m];"1"==d&&"r"==o?l[m]="n":g.test(d)&&(o=d,"r"==d&&(l[m]="R"))}for(var m=1,n=l[0];k-1>m;++m){var d=l[m];"+"==d&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=d||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=d}for(var m=0;k>m;++m){var d=l[m];if(","==d)l[m]="N";else if("%"==d){for(var p=m+1;k>p&&"%"==l[p];++p);for(var q=m&&"!"==l[m-1]||k>p&&"1"==l[p]?"1":"N",r=m;p>r;++r)l[r]=q;m=p-1}}for(var m=0,o=j;k>m;++m){var d=l[m];"L"==o&&"1"==d?l[m]="L":g.test(d)&&(o=d)}for(var m=0;k>m;++m)if(f.test(l[m])){for(var p=m+1;k>p&&f.test(l[p]);++p);for(var s="L"==(m?l[m-1]:j),t="L"==(k>p?l[p]:j),q=s||t?"L":"R",r=m;p>r;++r)l[r]=q;m=p-1}for(var u,v=[],m=0;k>m;)if(h.test(l[m])){var w=m;for(++m;k>m&&h.test(l[m]);++m);v.push(new b(0,w,m))}else{var x=m,y=v.length;for(++m;k>m&&"L"!=l[m];++m);for(var r=x;m>r;)if(i.test(l[r])){r>x&&v.splice(y,0,new b(1,x,r));var z=r;for(++r;m>r&&i.test(l[r]);++r);v.splice(y,0,new b(2,z,r)),x=r}else++r;m>x&&v.splice(y,0,new b(1,x,m))}return 1==v[0].level&&(u=c.match(/^\s+/))&&(v[0].from=u[0].length,v.unshift(new b(0,0,u[0].length))),1==_e(v).level&&(u=c.match(/\s+$/))&&(_e(v).to-=u[0].length,v.push(new b(0,k-u[0].length,k))),v[0].level!=_e(v).level&&v.push(new b(v[0].level,k,k)),v}}();return a.version="4.2.0",a}),define("global/global__codemirror-helper",["jquery","diff/diff__tools"],function(a,b){var c=function(){this.eventHandler_=a()};return b.addSingletonGetter(c),c.EventType={MODULE_LOADED:"moduleloaded",MODULE_LOAD_ERROR:"moduleloaderror"},c.Buffer=[],c.prototype.getEventHandler=function(){return this.eventHandler_},c.prototype.getOperationBuffer=function(a){return a.codeMirrorHelperBuffer_||(a.codeMirrorHelperBuffer_=[]),a.codeMirrorHelperBuffer_},c.prototype.addOperation=function(a,b){var c=this.getOperationBuffer(a);c.push(b)},c.prototype.executeOperationBuffer=function(a){var b=this.getOperationBuffer(a);a.operation(function(){b.forEach(function(a){a.call()})}),this.cleanOperationBuffer(a)},c.prototype.cleanOperationBuffer=function(a){a.codeMirrorHelperBuffer_=[]},c.prototype.getSelectionsBuffer=function(a){return a.codeMirrorHelperSelectionBuffer_||(a.codeMirrorHelperSelectionBuffer_=[]),a.codeMirrorHelperSelectionBuffer_},c.prototype.addSelection=function(a,b){var c=this.getSelectionsBuffer(a);return c.push(b),c.length-1},c.prototype.cleanupSelections=function(a){a.codeMirrorHelperSelectionBuffer_=[]},c}),define("diff/diff__parser",["diff/diff__tools"],function(a){return a.Parser=function(){},a.addSingletonGetter(a.Parser),a.Parser.Diff={},a.Parser.LineModification={},a.Parser.InlineModification={},a.Parser.InlinePosition={},a.Parser.ModificationType={MODIFIED:"modified",UNCHANGED:"unchanged"},a.Parser.LineRegex=/^(.*(\r\n|\r|\n)|.+($))/gm,a.Parser.Output={},a.Parser.OutputLine={},a.Parser.OutputLineContent={},a.Parser.LineType={NULL:0,DELETED:1,ADDED:2,INLINE:4,EOL_CHANGED:8,WHITESPACE:16},a.Parser.splitToLines=function(b){return b.match(a.Parser.LineRegex)},a.Parser.lineHasType=function(a,b){return Boolean(a.type&b)},a.Parser.normalizeType=function(a,b){var c=0;return b.forEach(function(a){c|=+a}),a&c},a.Parser.prototype.availableLineTypes=a.Parser.LineType.NULL,a.Parser.prototype.enableLineType=function(b,c,d){Boolean(c&this.availableLineTypes)&&a.Parser.lineHasType(b,c)^d&&(b.type=d?b.type|c:~(b.type&c))},a.Parser.prototype.parse=function(b,c,d){var e=[],f=a.createObject(a.Parser.ModificationType.UNCHANGED,this.unchangedParsers,a.Parser.ModificationType.MODIFIED,this.modifiedParsers),g=0,h=0,i=a.Parser.splitToLines(b),j=a.Parser.splitToLines(c);return d.forEach(function(b){var c=f[b.type],d=b.oldLines||b.lines||0,k=b.newLines||b.lines||0,l=i.slice(g,g+d),m=j.slice(h,h+k),n=a.Parser.getChunk(l,m,g,g+d,h,h+k,a.Parser.LineType.NULL);n=a.Parser.parseChunkInline(n,b.ranges);for(var o=0,p=c.length;p>o;o++){var q=c[o];n=q.call(this,n,b)}g+=d,h+=k,e.push(n)},this),e},a.Parser.parseChunkInline=function(b,c){var d=b.original.join(""),e=b.modified.join("");c||(c=[{type:b.type,oldChars:d.length||0,newChars:e.length||0}]);var f=[],g=[],h=0,i=0;return c.forEach(function(c){var j=c.oldChars||c.chars||0,k=c.newChars||c.chars||0,l=d.substr(h,j),m=e.substr(i,k),n=a.Parser.getInlinePosition(h,b.original),o=a.Parser.getInlinePosition(h+j,b.original),p=a.Parser.getInlinePosition(i,b.modified),q=a.Parser.getInlinePosition(i+k,b.modified);f.push(a.Parser.getInlineChunk(l,a.Parser.LineType.NULL,n,o)),g.push(a.Parser.getInlineChunk(m,a.Parser.LineType.NULL,p,q)),h+=j,i+=k}),b.original=f,b.modified=g,b},a.Parser.getInlinePosition=function(a,b){for(var c=0,d=0,e=a;a>c;){var f=b[d];e>f.length?(d++,c+=f.length,e-=f.length):c+=e}var g={line:d};return g["char"]=e,g},a.Parser.getChunk=function(a,b,c,d,e,f,g){return{original:a,modified:b,originalFrom:c,originalTo:d,modifiedFrom:e,modifiedTo:f,type:g}},a.Parser.getInlineChunk=function(a,b,c,d){return{code:a,type:b,from:c,to:d}},a.Parser.prototype.unchangedParsers=[],a.Parser.prototype.modifiedParsers=[],a.Parser}),define("diff/diff__editorcontroller",["diff/diff__tools","diff/diff__parser"],function(a){return a.EditorController=function(b,c){this.element_=b,this.codeParser_=a.isDef(c)?c:a.Parser.getInstance()},a.EditorController.prototype.enabled_=!1,a.EditorController.prototype.element_=null,a.EditorController.prototype.codeParser_=null,a.EditorController.prototype.setContent=function(a,b,c,d){if(!this.isEnabled())throw new Error("Controller is not enabled. You can not set content to deactivated controller.");this.contentOriginal_!==a&&(this.contentOriginal_=a),this.contentModified_!==b&&(this.contentModified_=b),this.diff_!==c&&(this.diff_=c),this.setContentInternal(a,b,c,d)},a.EditorController.prototype.setContentInternal=a.nullFunction,a.EditorController.prototype.getOriginal=function(){return this.original_},a.EditorController.prototype.getModified=function(){return this.modified_},a.EditorController.prototype.getDiff=function(){return this.diff_},a.EditorController.prototype.setEnabled=function(a){a!==this.enabled_&&(this.enabled_=a,this.setEnabledInternal(a))},a.EditorController.prototype.setEnabledInternal=a.nullFunction,a.EditorController.prototype.isEnabled=function(){return this.enabled_},a.EditorController}),define("diff/diff__parsers",["diff/diff__tools"],function(a){return a.parsers={},a.parsers.parserFn=null,a.parsers.nullParser=function(a){return a},a.parsers.inlineChanges=function(b,c){if(c.type===a.Parser.ModificationType.MODIFIED&&a.parsers.joinInlineContent(b.original)!==a.parsers.joinInlineContent(b.modified)&&c.oldLines>0&&c.newLines>0){var d=0,e=0;if(this.enableLineType(b,a.Parser.LineType.INLINE,!0),a.isDef(c.ranges))for(var f=0,g=c.ranges.length;g>f;f++){var h=c.ranges[f],i=b.original[f],j=b.modified[f];h.oldChars&&h.newChars&&(this.enableLineType(i,a.Parser.LineType.INLINE,!0),this.enableLineType(j,a.Parser.LineType.INLINE,!0)),h.oldChars&&!h.newChars&&(e++,this.enableLineType(i,a.Parser.LineType.DELETED,!0),this.enableLineType(j,a.Parser.LineType.DELETED,!0)),h.newChars&&!h.oldChars&&(d++,this.enableLineType(i,a.Parser.LineType.ADDED,!0),this.enableLineType(j,a.Parser.LineType.ADDED,!0))}else c.type&&(this.enableLineType(b.original[0],a.Parser.LineType.INLINE,!0),this.enableLineType(b.modified[0],a.Parser.LineType.INLINE,!0));this.enableLineType(b,a.Parser.LineType.ADDED,d&&!e),this.enableLineType(b,a.Parser.LineType.DELETED,e&&!d)}return b},a.parsers.addedOrDeleted=function(b,c){var d=c.newLines&&!c.oldLines,e=c.oldLines&&!c.newLines;return d&&(this.enableLineType(b,a.Parser.LineType.ADDED,d),this.enableLineType(b.original[0],a.Parser.LineType.ADDED,d),this.enableLineType(b.modified[0],a.Parser.LineType.ADDED,d)),e&&(this.enableLineType(b,a.Parser.LineType.DELETED,e),this.enableLineType(b.original[0],a.Parser.LineType.DELETED,e),this.enableLineType(b.modified[0],a.Parser.LineType.DELETED,e)),b},a.parsers.EOLChanged=function(b,c){if(c.ranges){var d=a.parsers.joinInlineContent(b.original),e=a.parsers.joinInlineContent(b.modified),f=d.match(a.EOLRegex.ALL),g=e.match(a.EOLRegex.ALL),h=f&&g&&!a.arraysAreEqual(f,g);h&&this.enableLineType(b,a.Parser.LineType.EOL_CHANGED,!0)}return b},a.parsers.joinInlineContent=function(a){var b="";return a.forEach(function(a){b+=a.code}),b},a.parsers}),define("diff/diff__parser_singlepane",["diff/diff__tools","diff/diff__parsers","diff/diff__parser"],function(a){return a.ParserSinglePane=function(){},a.inherit(a.ParserSinglePane,a.Parser),a.addSingletonGetter(a.ParserSinglePane),a.ParserSinglePane.prototype.availableLineTypes=a.Parser.LineType.UNCHANGED|a.Parser.LineType.DELETED|a.Parser.LineType.ADDED|a.Parser.LineType.INLINE|a.Parser.LineType.EOL_CHANGED,a.ParserSinglePane.prototype.modifiedParsers=[a.parsers.addedOrDeleted,a.parsers.EOLChanged,a.parsers.inlineChanges],a.ParserSinglePane}),define("diff/diff__editorcontroller_single",["diff/diff__tools","codemirror","global/global__codemirror-helper","diff/diff__editorcontroller","diff/diff__parser_singlepane"],function(a,b,c){return a.SingleEditorController=function(b){a.SingleEditorController.super_.constructor.call(this,b,a.ParserSinglePane.getInstance())},a.inherit(a.SingleEditorController,a.EditorController),a.SingleEditorController.EDITOR_MODE="wrap",a.SingleEditorController.Gutter={ORIGINAL:"ring-diff__gutter_original",MODIFIED:"ring-diff__gutter_modified",SYMBOL:"ring-diff__gutter-symbol"},a.SingleEditorController.GutterSymbol={ADDED:"+",DELETED:"-",INLINE:"*"},a.SingleEditorController.CodeType={ADDED:"added",ADDED_INLINE:"added-inline",DELETED:"deleted",DELETED_INLINE:"deleted-inline",FOLDED:"folded",INLINE_DELETIONS:"inline-deletions",INLINE_INSERTIONS:"inline-insertions",UNCHANGED:"unchanged"},a.SingleEditorController.InlineCodeType={ADDED:"added",DELETED:"deleted",UNCHANGED:"unchanged"},a.SingleEditorController.ClassName={BASE:"ring-diff",MODIFIED:"ring-diff_single"},a.SingleEditorController.LineClass={ADDED:"ring-diff__line_added",ADDED_INLINE:"ring-diff__line_added-inline",DELETED:"ring-diff__line_deleted",DELETED_INLINE:"ring-diff__line_deleted-inline",FOLDED:"ring-diff__line_folded",INLINE:"ring-diff__line_inline",UNCHANGED:""},a.SingleEditorController.InlineClass={ADDED:"ring-diff__change_added",DELETED:"ring-diff__change_deleted",UNCHANGED:"",WHITESPACE:"ring-diff__change_whitespace"},a.SingleEditorController.EditorContent=[],a.SingleEditorController.EditorContentChunk={},a.SingleEditorController.prototype.setEnabledInternal=function(b){b||(this.element_.innerHTML="");var c=[a.SingleEditorController.ClassName.BASE,a.SingleEditorController.ClassName.MODIFIED].join(" ");$(this.element_).toggleClass(c,b)},a.SingleEditorController.prototype.setContentInternal=function(c,d,e){var f=this.codeParser_.parse(c,d,e);if(f){this.editor_=new b(this.element_,a.SingleEditorController.getCodeMirrorOptions());var g=a.SingleEditorController.getEditorContent(f),h=a.SingleEditorController.getEditorContentText(g);this.editor_.setValue(h),a.SingleEditorController.highlightLines(g,this.editor_)}},a.SingleEditorController.getEditorContent=function(b){var c=[],d=[a.Parser.LineType.NULL,a.Parser.LineType.ADDED,a.Parser.LineType.DELETED,a.Parser.LineType.INLINE],e=a.createObject(a.Parser.LineType.NULL,a.SingleEditorController.contentGetter.nil,a.Parser.LineType.ADDED,a.SingleEditorController.contentGetter.added,a.Parser.LineType.ADDED|a.Parser.LineType.INLINE,a.SingleEditorController.contentGetter.addedInline,a.Parser.LineType.DELETED,a.SingleEditorController.contentGetter.deleted,a.Parser.LineType.DELETED|a.Parser.LineType.INLINE,a.SingleEditorController.contentGetter.deletedInline,a.Parser.LineType.INLINE,a.SingleEditorController.contentGetter.inline),f=1,g=1;return b.forEach(function(b,h,i){var j=a.Parser.normalizeType(b.type,d),k=e[j],l=k.call(null,j,b,h,i,c,f,g);f=l.lineOriginal,g=l.lineModified}),c},a.SingleEditorController.contentGetter={},a.SingleEditorController.contentGetterFn=function(){},a.SingleEditorController.contentGetter.nil=function(b,c,d,e,f,g,h){var i=3,j=a.parsers.joinInlineContent(c.original),k=a.Parser.splitToLines(j),l=k.splice(-i),m=k.splice(0,i),n=a.SingleEditorController.CodeType.UNCHANGED;return m.length&&(0!==d&&f.push(a.SingleEditorController.getEditorContentChunk(c,n,m.join(""),new a.Range(g,g+m.length),new a.Range(h,h+m.length)),a.SingleEditorController.getInlineContent(c,n)),g+=m.length,h+=m.length),k.length&&(0!==d&&d!==e.length-1&&f.push(a.SingleEditorController.getEditorContentChunk(c,a.SingleEditorController.CodeType.FOLDED,null,new a.Range(g,h+k.length),new a.Range(h,h+k.length))),g+=k.length,h+=k.length),l.length&&(d!==e.length-1&&f.push(a.SingleEditorController.getEditorContentChunk(c,a.SingleEditorController.CodeType.UNCHANGED,l.join(""),new a.Range(g,g+l.length),new a.Range(h,h+l.length),a.SingleEditorController.getInlineContent(c,n))),g+=l.length,h+=l.length),{lineOriginal:g,lineModified:h}},a.SingleEditorController.contentGetter.added=function(b,c,d,e,f,g,h){var i=a.parsers.joinInlineContent(c.modified),j=c.modifiedTo-c.modifiedFrom,k=a.SingleEditorController.CodeType.ADDED;return f.push(a.SingleEditorController.getEditorContentChunk(c,k,i,null,new a.Range(h,h+j),a.SingleEditorController.getInlineContent(c,k))),{lineOriginal:g,lineModified:h+j}},a.SingleEditorController.contentGetter.deleted=function(b,c,d,e,f,g,h){var i=a.parsers.joinInlineContent(c.original),j=c.originalTo-c.originalFrom,k=a.SingleEditorController.CodeType.DELETED;return f.push(a.SingleEditorController.getEditorContentChunk(c,k,i,new a.Range(g,g+j),null,a.SingleEditorController.getInlineContent(c,k))),{lineOriginal:g+j,lineModified:h}},a.SingleEditorController.contentGetter.inline=function(b,c,d,e,f,g,h){var i=a.parsers.joinInlineContent(c.original),j=a.parsers.joinInlineContent(c.modified),k=c.originalTo-c.originalFrom,l=c.modifiedTo-c.modifiedFrom;return f.push(a.SingleEditorController.getEditorContentChunk(c,a.SingleEditorController.CodeType.DELETED_INLINE,i,new a.Range(g,g+k),null,a.SingleEditorController.getInlineContent(c,a.SingleEditorController.CodeType.DELETED_INLINE))),f.push(a.SingleEditorController.getEditorContentChunk(c,a.SingleEditorController.CodeType.ADDED_INLINE,j,null,new a.Range(h,h+l),a.SingleEditorController.getInlineContent(c,a.SingleEditorController.CodeType.ADDED_INLINE))),{lineOriginal:g+k,lineModified:h+l}},a.SingleEditorController.contentGetter.addedInline=function(b,c,d,e,f,g,h){var i=a.parsers.joinInlineContent(c.modified),j=c.originalTo-c.originalFrom,k=c.modifiedTo-c.modifiedFrom,l=a.SingleEditorController.CodeType.INLINE_INSERTIONS;return f.push(a.SingleEditorController.getEditorContentChunk(c,l,i,new a.Range(g,g+j),new a.Range(h,h+k),a.SingleEditorController.getInlineContent(c,l))),{lineOriginal:g+j,lineModified:h+k}},a.SingleEditorController.contentGetter.deletedInline=function(b,c,d,e,f,g,h){var i=a.parsers.joinInlineContent(c.original),j=c.originalTo-c.originalFrom,k=c.modifiedTo-c.modifiedFrom,l=a.SingleEditorController.CodeType.INLINE_DELETIONS;return f.push(a.SingleEditorController.getEditorContentChunk(c,l,i,new a.Range(g,g+j),new a.Range(h,h+k),a.SingleEditorController.getInlineContent(c,l))),{lineOriginal:g+j,lineModified:h+k}},a.SingleEditorController.getInlineContent=function(b,c){var d,e=[],f=a.createObject(a.SingleEditorController.CodeType.ADDED,a.SingleEditorController.InlineCodeType.ADDED,a.SingleEditorController.CodeType.ADDED_INLINE,a.SingleEditorController.InlineCodeType.ADDED,a.SingleEditorController.CodeType.INLINE_INSERTIONS,a.SingleEditorController.InlineCodeType.ADDED,a.SingleEditorController.CodeType.DELETED,a.SingleEditorController.InlineCodeType.DELETED,a.SingleEditorController.CodeType.DELETED_INLINE,a.SingleEditorController.InlineCodeType.DELETED,a.SingleEditorController.CodeType.INLINE_DELETIONS,a.SingleEditorController.InlineCodeType.DELETED,a.SingleEditorController.CodeType.UNCHANGED,a.SingleEditorController.InlineCodeType.UNCHANGED),g=a.createObject(a.SingleEditorController.CodeType.ADDED,b.modified,a.SingleEditorController.CodeType.ADDED_INLINE,b.modified,a.SingleEditorController.CodeType.INLINE_INSERTIONS,b.modified,a.SingleEditorController.CodeType.DELETED,b.original,a.SingleEditorController.CodeType.DELETED_INLINE,b.original,a.SingleEditorController.CodeType.INLINE_DELETIONS,b.original,a.SingleEditorController.CodeType.UNCHANGED,b.original),h=g[c];return h.forEach(function(b){d=b.type===a.Parser.LineType.NULL?a.SingleEditorController.InlineCodeType.UNCHANGED:f[c],e.push({change:b,from:b.from,to:b.to,type:d})}),e},a.SingleEditorController.getEditorContentChunk=function(a,b,c,d,e,f){return{change:a,codeType:b,content:c,rangeModified:e,rangeOriginal:d,inlineChange:f}},a.SingleEditorController.getEditorContentText=function(a){var b=a.map(function(a){return a.content});return b.join("")},a.SingleEditorController.highlightLines=function(b,d){var e=c.getInstance(),f=a.createObject(a.SingleEditorController.CodeType.ADDED,a.SingleEditorController.LineClass.ADDED,a.SingleEditorController.CodeType.ADDED_INLINE,a.SingleEditorController.LineClass.ADDED_INLINE,a.SingleEditorController.CodeType.DELETED,a.SingleEditorController.LineClass.DELETED,a.SingleEditorController.CodeType.DELETED_INLINE,a.SingleEditorController.LineClass.DELETED_INLINE,a.SingleEditorController.CodeType.INLINE_INSERTIONS,a.SingleEditorController.LineClass.INLINE,a.SingleEditorController.CodeType.INLINE_DELETIONS,a.SingleEditorController.LineClass.INLINE,a.SingleEditorController.CodeType.UNCHANGED,a.SingleEditorController.LineClass.UNCHANGED),g=a.createObject(a.SingleEditorController.CodeType.ADDED,a.SingleEditorController.GutterSymbol.ADDED,a.SingleEditorController.CodeType.ADDED_INLINE,a.SingleEditorController.GutterSymbol.ADDED,a.SingleEditorController.CodeType.DELETED,a.SingleEditorController.GutterSymbol.DELETED,a.SingleEditorController.CodeType.DELETED_INLINE,a.SingleEditorController.GutterSymbol.DELETED,a.SingleEditorController.CodeType.INLINE_INSERTIONS,a.SingleEditorController.GutterSymbol.INLINE,a.SingleEditorController.CodeType.INLINE_DELETIONS,a.SingleEditorController.GutterSymbol.INLINE),h=0;b.forEach(function(b){var c=f[b.codeType],i=g[b.codeType],j=0,k=0,l=0;switch(b.codeType){case a.SingleEditorController.CodeType.UNCHANGED:case a.SingleEditorController.CodeType.DELETED:case a.SingleEditorController.CodeType.DELETED_INLINE:case a.SingleEditorController.CodeType.INLINE_DELETIONS:j=b.rangeOriginal.to-b.rangeOriginal.from,l+=j;break;case a.SingleEditorController.CodeType.ADDED:case a.SingleEditorController.CodeType.ADDED_INLINE:case a.SingleEditorController.CodeType.INLINE_INSERTIONS:k=b.rangeModified.to-b.rangeModified.from,l+=k}if(b.codeType!==a.SingleEditorController.CodeType.FOLDED){for(var m=0;l>m;m++)a.SingleEditorController.highlightLine(d,h,c,i,m,b),h++;var n=a.createObject(a.SingleEditorController.InlineCodeType.ADDED,a.SingleEditorController.InlineClass.ADDED,a.SingleEditorController.InlineCodeType.DELETED,a.SingleEditorController.InlineClass.DELETED,a.SingleEditorController.InlineCodeType.UNCHANGED,a.SingleEditorController.InlineClass.UNCHANGED);if(b.inlineChange){var o=h-l;b.inlineChange.forEach(function(a){e.addOperation(d,function(){d.markText({line:a.from.line+o,ch:a.from["char"]},{line:a.to.line+o,ch:a.to["char"]},{className:n[a.type]})})})}}else a.SingleEditorController.addFoldedLine(d,h)}),e.executeOperationBuffer(d)},a.SingleEditorController.highlightLine=function(b,d,e,f,g,h){var i=c.getInstance();i.addOperation(b,function(){b.addLineClass(d,a.SingleEditorController.EDITOR_MODE,e)}),f&&i.addOperation(b,function(){b.setGutterMarker(d,a.SingleEditorController.Gutter.SYMBOL,document.createTextNode(f))}),h.rangeOriginal&&i.addOperation(b,function(){b.setGutterMarker(d,a.SingleEditorController.Gutter.ORIGINAL,document.createTextNode(h.rangeOriginal.from+g))}),h.rangeModified&&i.addOperation(b,function(){b.setGutterMarker(d,a.SingleEditorController.Gutter.MODIFIED,document.createTextNode(h.rangeModified.from+g))})},a.SingleEditorController.addFoldedLine=function(b,d){var e=c.getInstance(),f=document.createElement("div");f.className=a.SingleEditorController.LineClass.FOLDED,e.addOperation(b,function(){b.addLineWidget(d-1,f,a.SingleEditorController.getCodeMirrorOptions())})},a.SingleEditorController.getCodeMirrorOptions=function(){return{gutters:[a.SingleEditorController.Gutter.ORIGINAL,a.SingleEditorController.Gutter.MODIFIED,a.SingleEditorController.Gutter.SYMBOL],lineNumbers:!1,readOnly:!0}},a.SingleEditorController.getFoldedLineOptions=function(){return{coverGutter:!0,handleMouseEvents:!1,noHScroll:!0}},a.SingleEditorController.prototype.getEditor=function(){return this.editor_},window.CodeMirror=window.CodeMirror||b,a.SingleEditorController}),!function(a){var b,c,d="0.4.2",e="hasOwnProperty",f=/[\.\/]/,g="*",h=function(){},i=function(a,b){return a-b},j={n:{}},k=function(a,d){a=String(a);var e,f=c,g=Array.prototype.slice.call(arguments,2),h=k.listeners(a),j=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=h.length;q>p;p++)"zIndex"in h[p]&&(l.push(h[p].zIndex),h[p].zIndex<0&&(m[h[p].zIndex]=h[p]));for(l.sort(i);l[j]<0;)if(e=m[l[j++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if(e=h[p],"zIndex"in e)if(e.zIndex==l[j]){if(n.push(e.apply(d,g)),c)break;do if(j++,e=m[l[j]],e&&n.push(e.apply(d,g)),c)break;while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};k._events=j,k.listeners=function(a){var b,c,d,e,h,i,k,l,m=a.split(f),n=j,o=[n],p=[];for(e=0,h=m.length;h>e;e++){for(l=[],i=0,k=o.length;k>i;i++)for(n=o[i].n,c=[n[m[e]],n[g]],d=2;d--;)b=c[d],b&&(l.push(b),p=p.concat(b.f||[]));o=l}return p},k.on=function(a,b){if(a=String(a),"function"!=typeof b)return function(){};for(var c=a.split(f),d=j,e=0,g=c.length;g>e;e++)d=d.n,d=d.hasOwnProperty(c[e])&&d[c[e]]||(d[c[e]]={n:{}});for(d.f=d.f||[],e=0,g=d.f.length;g>e;e++)if(d.f[e]==b)return h;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.f=function(a){var b=[].slice.call(arguments,1);return function(){k.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}},k.stop=function(){c=1},k.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},k.nts=function(){return b.split(f)},k.off=k.unbind=function(a,b){if(!a)return void(k._events=j={n:{}});var c,d,h,i,l,m,n,o=a.split(f),p=[j];for(i=0,l=o.length;l>i;i++)for(m=0;m<p.length;m+=h.length-2){if(h=[m,1],c=p[m].n,o[i]!=g)c[o[i]]&&h.push(c[o[i]]);else for(d in c)c[e](d)&&h.push(c[d]);p.splice.apply(p,h)}for(i=0,l=p.length;l>i;i++)for(c=p[i];c.n;){if(b){if(c.f){for(m=0,n=c.f.length;n>m;m++)if(c.f[m]==b){c.f.splice(m,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var q=c.n[d].f;for(m=0,n=q.length;n>m;m++)if(q[m]==b){q.splice(m,1);break}!q.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},k.once=function(a,b){var c=function(){return k.unbind(a,c),b.apply(this,arguments)};return k.on(a,c)},k.version=d,k.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(this),function(a,b){"function"==typeof define&&define.amd?define("raphael",["eve"],function(c){return b(a,c)}):b(a,a.eve)}(this,function(a,b){function c(a){if(c.is(a,"function"))return u?a():b.on("raphael.DOMload",a);if(c.is(a,V))return c._engine.create[D](c,a.splice(0,3+c.is(a[0],T))).add(a);var d=Array.prototype.slice.call(arguments,0);if(c.is(d[d.length-1],"function")){var e=d.pop();return u?e.call(c._engine.create[D](c,d)):b.on("raphael.DOMload",function(){e.call(c._engine.create[D](c,d))})}return c._engine.create[D](c,arguments)}function d(a){if("function"==typeof a||Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[z](c)&&(b[c]=d(a[c]));return b}function e(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function f(a,b,c){function d(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=d.cache=d.cache||{},i=d.count=d.count||[];return h[z](g)?(e(i,g),c?c(h[g]):h[g]):(i.length>=1e3&&delete h[i.shift()],i.push(g),h[g]=a[D](b,f),c?c(h[g]):h[g])}return d}function g(){return this.hex}function h(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function i(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;
return a*g-3*b+3*c}function j(a,b,c,d,e,f,g,h,j){null==j&&(j=1),j=j>1?1:0>j?0:j;for(var k=j/2,l=12,m=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],n=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],o=0,p=0;l>p;p++){var q=k*m[p]+k,r=i(q,a,c,e,g),s=i(q,b,d,f,h),t=r*r+s*s;o+=n[p]*N.sqrt(t)}return k*o}function k(a,b,c,d,e,f,g,h,i){if(!(0>i||j(a,b,c,d,e,f,g,h)<i)){var k,l=1,m=l/2,n=l-m,o=.01;for(k=j(a,b,c,d,e,f,g,h,n);Q(k-i)>o;)m/=2,n+=(i>k?1:-1)*m,k=j(a,b,c,d,e,f,g,h,n);return n}}function l(a,b,c,d,e,f,g,h){if(!(O(a,c)<P(e,g)||P(a,c)>O(e,g)||O(b,d)<P(f,h)||P(b,d)>O(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(k){var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(!(n<+P(a,c).toFixed(2)||n>+O(a,c).toFixed(2)||n<+P(e,g).toFixed(2)||n>+O(e,g).toFixed(2)||o<+P(b,d).toFixed(2)||o>+O(b,d).toFixed(2)||o<+P(f,h).toFixed(2)||o>+O(f,h).toFixed(2)))return{x:l,y:m}}}}function m(a,b,d){var e=c.bezierBBox(a),f=c.bezierBBox(b);if(!c.isBBoxIntersect(e,f))return d?0:[];for(var g=j.apply(0,a),h=j.apply(0,b),i=O(~~(g/5),1),k=O(~~(h/5),1),m=[],n=[],o={},p=d?0:[],q=0;i+1>q;q++){var r=c.findDotsAtSegment.apply(c,a.concat(q/i));m.push({x:r.x,y:r.y,t:q/i})}for(q=0;k+1>q;q++)r=c.findDotsAtSegment.apply(c,b.concat(q/k)),n.push({x:r.x,y:r.y,t:q/k});for(q=0;i>q;q++)for(var s=0;k>s;s++){var t=m[q],u=m[q+1],v=n[s],w=n[s+1],x=Q(u.x-t.x)<.001?"y":"x",y=Q(w.x-v.x)<.001?"y":"x",z=l(t.x,t.y,u.x,u.y,v.x,v.y,w.x,w.y);if(z){if(o[z.x.toFixed(4)]==z.y.toFixed(4))continue;o[z.x.toFixed(4)]=z.y.toFixed(4);var A=t.t+Q((z[x]-t[x])/(u[x]-t[x]))*(u.t-t.t),B=v.t+Q((z[y]-v[y])/(w[y]-v[y]))*(w.t-v.t);A>=0&&1.001>=A&&B>=0&&1.001>=B&&(d?p++:p.push({x:z.x,y:z.y,t1:P(A,1),t2:P(B,1)}))}}return p}function n(a,b,d){a=c._path2curve(a),b=c._path2curve(b);for(var e,f,g,h,i,j,k,l,n,o,p=d?0:[],q=0,r=a.length;r>q;q++){var s=a[q];if("M"==s[0])e=i=s[1],f=j=s[2];else{"C"==s[0]?(n=[e,f].concat(s.slice(1)),e=n[6],f=n[7]):(n=[e,f,e,f,i,j,i,j],e=i,f=j);for(var t=0,u=b.length;u>t;t++){var v=b[t];if("M"==v[0])g=k=v[1],h=l=v[2];else{"C"==v[0]?(o=[g,h].concat(v.slice(1)),g=o[6],h=o[7]):(o=[g,h,g,h,k,l,k,l],g=k,h=l);var w=m(n,o,d);if(d)p+=w;else{for(var x=0,y=w.length;y>x;x++)w[x].segment1=q,w[x].segment2=t,w[x].bez1=n,w[x].bez2=o;p=p.concat(w)}}}}}return p}function o(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function p(){return this.x+H+this.y+H+this.width+" × "+this.height}function q(a,b,c,d,e,f){function g(a){return((l*a+k)*a+j)*a}function h(a,b){var c=i(a,b);return((o*c+n)*c+m)*c}function i(a,b){var c,d,e,f,h,i;for(e=a,i=0;8>i;i++){if(f=g(e)-a,Q(f)<b)return e;if(h=(3*l*e+2*k)*e+j,Q(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),Q(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function r(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[z](e)&&(d[_(e)]=a[e],c.push(_(e)));c.sort(lb)}this.anim=d,this.top=c[c.length-1],this.percents=c}function s(a,d,e,f,g,h){e=_(e);var i,j,k,l,m,n,p=a.ms,r={},s={},t={};if(f)for(v=0,x=ic.length;x>v;v++){var u=ic[v];if(u.el.id==d.id&&u.anim==a){u.percent!=e?(ic.splice(v,1),k=1):j=u,d.attr(u.totalOrigin);break}}else f=+s;for(var v=0,x=a.percents.length;x>v;v++){if(a.percents[v]==e||a.percents[v]>f*a.top){e=a.percents[v],m=a.percents[v-1]||0,p=p/a.top*(e-m),l=a.percents[v+1],i=a.anim[e];break}f&&d.attr(a.anim[a.percents[v]])}if(i){if(j)j.initstatus=f,j.start=new Date-j.ms*f;else{for(var y in i)if(i[z](y)&&(db[z](y)||d.paper.customAttributes[z](y)))switch(r[y]=d.attr(y),null==r[y]&&(r[y]=cb[y]),s[y]=i[y],db[y]){case T:t[y]=(s[y]-r[y])/p;break;case"colour":r[y]=c.getRGB(r[y]);var A=c.getRGB(s[y]);t[y]={r:(A.r-r[y].r)/p,g:(A.g-r[y].g)/p,b:(A.b-r[y].b)/p};break;case"path":var B=Kb(r[y],s[y]),C=B[1];for(r[y]=B[0],t[y]=[],v=0,x=r[y].length;x>v;v++){t[y][v]=[0];for(var D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(C[v][D]-r[y][v][D])/p}break;case"transform":var G=d._,H=Pb(G[y],s[y]);if(H)for(r[y]=H.from,s[y]=H.to,t[y]=[],t[y].real=!0,v=0,x=r[y].length;x>v;v++)for(t[y][v]=[r[y][v][0]],D=1,F=r[y][v].length;F>D;D++)t[y][v][D]=(s[y][v][D]-r[y][v][D])/p;else{var K=d.matrix||new o,L={_:{transform:G.transform},getBBox:function(){return d.getBBox(1)}};r[y]=[K.a,K.b,K.c,K.d,K.e,K.f],Nb(L,s[y]),s[y]=L._.transform,t[y]=[(L.matrix.a-K.a)/p,(L.matrix.b-K.b)/p,(L.matrix.c-K.c)/p,(L.matrix.d-K.d)/p,(L.matrix.e-K.e)/p,(L.matrix.f-K.f)/p]}break;case"csv":var M=I(i[y])[J](w),N=I(r[y])[J](w);if("clip-rect"==y)for(r[y]=N,t[y]=[],v=N.length;v--;)t[y][v]=(M[v]-r[y][v])/p;s[y]=M;break;default:for(M=[][E](i[y]),N=[][E](r[y]),t[y]=[],v=d.paper.customAttributes[y].length;v--;)t[y][v]=((M[v]||0)-(N[v]||0))/p}var O=i.easing,P=c.easing_formulas[O];if(!P)if(P=I(O).match(Z),P&&5==P.length){var Q=P;P=function(a){return q(a,+Q[1],+Q[2],+Q[3],+Q[4],p)}}else P=nb;if(n=i.start||a.start||+new Date,u={anim:a,percent:e,timestamp:n,start:n+(a.del||0),status:0,initstatus:f||0,stop:!1,ms:p,easing:P,from:r,diff:t,to:s,el:d,callback:i.callback,prev:m,next:l,repeat:h||a.times,origin:d.attr(),totalOrigin:g},ic.push(u),f&&!j&&!k&&(u.stop=!0,u.start=new Date-p*f,1==ic.length))return kc();k&&(u.start=new Date-u.ms*f),1==ic.length&&jc(kc)}b("raphael.anim.start."+d.id,d,a)}}function t(a){for(var b=0;b<ic.length;b++)ic[b].el.paper==a&&ic.splice(b--,1)}c.version="2.1.0",c.eve=b;var u,v,w=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},y=/\{(\d+)\}/g,z="hasOwnProperty",A={doc:document,win:a},B={was:Object.prototype[z].call(A.win,"Raphael"),is:A.win.Raphael},C=function(){this.ca=this.customAttributes={}},D="apply",E="concat",F="ontouchstart"in A.win||A.win.DocumentTouch&&A.doc instanceof DocumentTouch,G="",H=" ",I=String,J="split",K="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[J](H),L={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},M=I.prototype.toLowerCase,N=Math,O=N.max,P=N.min,Q=N.abs,R=N.pow,S=N.PI,T="number",U="string",V="array",W=Object.prototype.toString,X=(c._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=N.round,_=parseFloat,ab=parseInt,bb=I.prototype.toUpperCase,cb=c._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},db=c._availableAnimAttrs={blur:T,"clip-rect":"csv",cx:T,cy:T,fill:"colour","fill-opacity":T,"font-size":T,height:T,opacity:T,path:"path",r:T,rx:T,ry:T,stroke:"colour","stroke-opacity":T,"stroke-width":T,transform:"transform",width:T,x:T,y:T},eb=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,fb={hs:1,rg:1},gb=/,?([achlmqrstvxz]),?/gi,hb=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ib=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,jb=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,kb=(c._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),lb=function(a,b){return _(a)-_(b)},mb=function(){},nb=function(a){return a},ob=c._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},pb=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},qb=c._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return pb(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return pb(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return ob(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return ob(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return ob(b.x,b.y,b.width,b.height)},set:function(a){var b=a._getBBox();return ob(b.x,b.y,b.width,b.height)}},rb=c.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=Kb(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(c._g=A,c.type=A.win.SVGAngle||A.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==c.type){var sb,tb=A.doc.createElement("div");if(tb.innerHTML='<v:shape adj="1"/>',sb=tb.firstChild,sb.style.behavior="url(#default#VML)",!sb||"object"!=typeof sb.adj)return c.type=G;tb=null}c.svg=!(c.vml="VML"==c.type),c._Paper=C,c.fn=v=C.prototype=c.prototype,c._id=0,c._oid=0,c.is=function(a,b){return b=M.call(b),"finite"==b?!Y[z](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||W.call(a).slice(8,-1).toLowerCase()==b},c.angle=function(a,b,d,e,f,g){if(null==f){var h=a-d,i=b-e;return h||i?(180+180*N.atan2(-i,-h)/S+360)%360:0}return c.angle(a,b,f,g)-c.angle(d,e,f,g)},c.rad=function(a){return a%360*S/180},c.deg=function(a){return 180*a/S%360},c.snapTo=function(a,b,d){if(d=c.is(d,"finite")?d:10,c.is(a,V)){for(var e=a.length;e--;)if(Q(a[e]-b)<=d)return a[e]}else{a=+a;var f=b%a;if(d>f)return b-f;if(f>a-d)return b-f+a}return b},c.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=0|16*N.random(),c="x"==a?b:8|3&b;return c.toString(16)}),c.setWindow=function(a){b("raphael.setWindow",c,A.win,a),A.win=a,A.doc=A.win.document,c._engine.initWin&&c._engine.initWin(A.win)};var ub=function(a){if(c.vml){var b,d=/^\s+|\s+$/g;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),b=e.body}catch(g){b=createPopup().document.body}var h=b.createTextRange();ub=f(function(a){try{b.style.color=I(a).replace(d,G);var c=h.queryCommandValue("ForeColor");return c=(255&c)<<16|65280&c|(16711680&c)>>>16,"#"+("000000"+c.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=A.doc.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",A.doc.body.appendChild(i),ub=f(function(a){return i.style.color=a,A.doc.defaultView.getComputedStyle(i,G).getPropertyValue("color")})}return ub(a)},vb=function(){return"hsb("+[this.h,this.s,this.b]+")"},wb=function(){return"hsl("+[this.h,this.s,this.l]+")"},xb=function(){return this.hex},yb=function(a,b,d){if(null==b&&c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(d=a.b,b=a.g,a=a.r),null==b&&c.is(a,U)){var e=c.getRGB(a);a=e.r,b=e.g,d=e.b}return(a>1||b>1||d>1)&&(a/=255,b/=255,d/=255),[a,b,d]},zb=function(a,b,d,e){a*=255,b*=255,d*=255;var f={r:a,g:b,b:d,hex:c.rgb(a,b,d),toString:xb};return c.is(e,"finite")&&(f.opacity=e),f};c.color=function(a){var b;return c.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=c.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):c.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=c.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(c.is(a,"string")&&(a=c.getRGB(a)),c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=c.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=c.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=xb,a},c.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Q(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],zb(e,f,g,d)},c.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-Q(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],zb(e,f,g,d)},c.rgb2hsb=function(a,b,c){c=yb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=O(a,b,c),g=f-P(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=60*((d+360)%6)/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:vb}},c.rgb2hsl=function(a,b,c){c=yb(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=O(a,b,c),h=P(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=60*((d+360)%6)/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:wb}},c._path2string=function(){return this.join(",").replace(gb,"$1")},c._preload=function(a,b){var c=A.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,A.doc.body.removeChild(this)},c.onerror=function(){A.doc.body.removeChild(this)},A.doc.body.appendChild(c),c.src=a},c.getRGB=f(function(a){if(!a||(a=I(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!(fb[z](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=ub(a));var b,d,e,f,h,i,j=a.match(X);return j?(j[2]&&(e=ab(j[2].substring(5),16),d=ab(j[2].substring(3,5),16),b=ab(j[2].substring(1,3),16)),j[3]&&(e=ab((h=j[3].charAt(3))+h,16),d=ab((h=j[3].charAt(2))+h,16),b=ab((h=j[3].charAt(1))+h,16)),j[4]&&(i=j[4][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),"rgba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100)),j[5]?(i=j[5][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsba"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsb2rgb(b,d,e,f)):j[6]?(i=j[6][J](eb),b=_(i[0]),"%"==i[0].slice(-1)&&(b*=2.55),d=_(i[1]),"%"==i[1].slice(-1)&&(d*=2.55),e=_(i[2]),"%"==i[2].slice(-1)&&(e*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(b/=360),"hsla"==j[1].toLowerCase().slice(0,4)&&(f=_(i[3])),i[3]&&"%"==i[3].slice(-1)&&(f/=100),c.hsl2rgb(b,d,e,f)):(j={r:b,g:d,b:e,toString:g},j.hex="#"+(16777216|e|d<<8|b<<16).toString(16).slice(1),c.is(f,"finite")&&(j.opacity=f),j)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},c),c.hsb=f(function(a,b,d){return c.hsb2rgb(a,b,d).hex}),c.hsl=f(function(a,b,d){return c.hsl2rgb(a,b,d).hex}),c.rgb=f(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),c.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},c.getColor.reset=function(){delete this.start},c.parsePathString=function(a){if(!a)return null;var b=Ab(a);if(b.arr)return Cb(b.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];return c.is(a,V)&&c.is(a[0],V)&&(e=Cb(a)),e.length||I(a).replace(hb,function(a,b,c){var f=[],g=b.toLowerCase();if(c.replace(jb,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(e.push([b][E](f.splice(0,2))),g="l",b="m"==b?"l":"L"),"r"==g)e.push([b][E](f));else for(;f.length>=d[g]&&(e.push([b][E](f.splice(0,d[g]))),d[g]););}),e.toString=c._path2string,b.arr=Cb(e),e},c.parseTransformString=f(function(a){if(!a)return null;var b=[];return c.is(a,V)&&c.is(a[0],V)&&(b=Cb(a)),b.length||I(a).replace(ib,function(a,c,d){var e=[];M.call(c),d.replace(jb,function(a,b){b&&e.push(+b)}),b.push([c][E](e))}),b.toString=c._path2string,b});var Ab=function(a){var b=Ab.ps=Ab.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[z](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}),b[a]};c.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=R(j,3),l=R(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*N.atan2(q-s,r-t)/S;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},c.bezierBBox=function(a,b,d,e,f,g,h,i){c.is(a,"array")||(a=[a,b,d,e,f,g,h,i]);var j=Jb.apply(null,a);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},c.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},c.isBBoxIntersect=function(a,b){var d=c.isPointInsideBBox;return d(b,a.x,a.y)||d(b,a.x2,a.y)||d(b,a.x,a.y2)||d(b,a.x2,a.y2)||d(a,b.x,b.y)||d(a,b.x2,b.y)||d(a,b.x,b.y2)||d(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)},c.pathIntersection=function(a,b){return n(a,b)},c.pathIntersectionNumber=function(a,b){return n(a,b,1)},c.isPointInsidePath=function(a,b,d){var e=c.pathBBox(a);return c.isPointInsideBBox(e,b,d)&&1==n(a,[["M",b,d],["H",e.x2+10]],1)%2},c._removedFactory=function(a){return function(){b("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var Bb=c.pathBBox=function(a){var b=Ab(a);if(b.bbox)return d(b.bbox);if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=Kb(a);for(var c,e=0,f=0,g=[],h=[],i=0,j=a.length;j>i;i++)if(c=a[i],"M"==c[0])e=c[1],f=c[2],g.push(e),h.push(f);else{var k=Jb(e,f,c[1],c[2],c[3],c[4],c[5],c[6]);g=g[E](k.min.x,k.max.x),h=h[E](k.min.y,k.max.y),e=c[5],f=c[6]}var l=P[D](0,g),m=P[D](0,h),n=O[D](0,g),o=O[D](0,h),p=n-l,q=o-m,r={x:l,y:m,x2:n,y2:o,width:p,height:q,cx:l+p/2,cy:m+q/2};return b.bbox=d(r),r},Cb=function(a){var b=d(a);return b.toString=c._path2string,b},Db=c._pathToRelative=function(a){var b=Ab(a);if(b.rel)return Cb(b.rel);c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a));var d=[],e=0,f=0,g=0,h=0,i=0;"M"==a[0][0]&&(e=a[0][1],f=a[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=a.length;k>j;j++){var l=d[j]=[],m=a[j];if(m[0]!=M.call(m[0]))switch(l[0]=M.call(m[0]),l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;o>n;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}else{l=d[j]=[],"m"==m[0]&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;q>p;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}return d.toString=c._path2string,b.rel=Cb(d),d},Eb=c._pathToAbsolute=function(a){var b=Ab(a);if(b.abs)return Cb(b.abs);if(c.is(a,V)&&c.is(a&&a[0],V)||(a=c.parsePathString(a)),!a||!a.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,i=0,j=0;"M"==a[0][0]&&(e=+a[0][1],f=+a[0][2],g=e,i=f,j++,d[0]=["M",e,f]);for(var k,l,m=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),n=j,o=a.length;o>n;n++){if(d.push(k=[]),l=a[n],l[0]!=bb.call(l[0]))switch(k[0]=bb.call(l[0]),k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":for(var p=[e,f][E](l.slice(1)),q=2,r=p.length;r>q;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[E](h(p,m));break;case"M":g=+l[1]+e,i=+l[2]+f;default:for(q=1,r=l.length;r>q;q++)k[q]=+l[q]+(q%2?e:f)}else if("R"==l[0])p=[e,f][E](l.slice(1)),d.pop(),d=d[E](h(p,m)),k=["R"][E](l.slice(-2));else for(var s=0,t=l.length;t>s;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=i;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],i=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}return d.toString=c._path2string,b.abs=Cb(d),d},Fb=function(a,b,c,d){return[a,b,c,d,c,d]},Gb=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},Hb=function(a,b,c,d,e,g,h,i,j,k){var l,m=120*S/180,n=S/180*(+e||0),o=[],p=f(function(a,b,c){var d=a*N.cos(c)-b*N.sin(c),e=a*N.sin(c)+b*N.cos(c);return{x:d,y:e}});if(k)y=k[0],z=k[1],w=k[2],x=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(N.cos(S/180*e),N.sin(S/180*e),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(d*d);s>1&&(s=N.sqrt(s),c=s*c,d=s*d);var t=c*c,u=d*d,v=(g==h?-1:1)*N.sqrt(Q((t*u-t*r*r-u*q*q)/(t*r*r+u*q*q))),w=v*c*r/d+(a+i)/2,x=v*-d*q/c+(b+j)/2,y=N.asin(((b-x)/d).toFixed(9)),z=N.asin(((j-x)/d).toFixed(9));y=w>a?S-y:y,z=w>i?S-z:z,0>y&&(y=2*S+y),0>z&&(z=2*S+z),h&&y>z&&(y-=2*S),!h&&z>y&&(z-=2*S)}var A=z-y;if(Q(A)>m){var B=z,C=i,D=j;z=y+m*(h&&z>y?1:-1),i=w+c*N.cos(z),j=x+d*N.sin(z),o=Hb(i,j,c,d,e,0,h,C,D,[z,B,w,x])}A=z-y;var F=N.cos(y),G=N.sin(y),H=N.cos(z),I=N.sin(z),K=N.tan(A/4),L=4/3*c*K,M=4/3*d*K,O=[a,b],P=[a+L*G,b-M*F],R=[i+L*I,j-M*H],T=[i,j];if(P[0]=2*O[0]-P[0],P[1]=2*O[1]-P[1],k)return[P,R,T][E](o);o=[P,R,T][E](o).join()[J](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},Ib=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:R(j,3)*a+3*R(j,2)*i*c+3*j*i*i*e+R(i,3)*g,y:R(j,3)*b+3*R(j,2)*i*d+3*j*i*i*f+R(i,3)*h}},Jb=f(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ib(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ib(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+N.sqrt(k*k-4*j*l))/2/j,n=(-k-N.sqrt(k*k-4*j*l))/2/j,Q(m)>"1e12"&&(m=.5),Q(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=Ib(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=Ib(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:P[D](0,p),y:P[D](0,o)},max:{x:O[D](0,p),y:O[D](0,o)}}}),Kb=c._path2curve=f(function(a,b){var c=!b&&Ab(a);if(!b&&c.curve)return Cb(c.curve);for(var d=Eb(a),e=b&&Eb(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=(function(a,b,c){var d,e;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][E](Hb[D](0,[b.x,b.y][E](a.slice(1))));break;case"S":"C"==c||"S"==c?(d=2*b.x-b.bx,e=2*b.y-b.by):(d=b.x,e=b.y),a=["C",d,e][E](a.slice(1));break;case"T":"Q"==c||"T"==c?(b.qx=2*b.x-b.qx,b.qy=2*b.y-b.qy):(b.qx=b.x,b.qy=b.y),a=["C"][E](Gb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][E](Gb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][E](Fb(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][E](Fb(b.x,b.y,a[1],b.y));break;case"V":a=["C"][E](Fb(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][E](Fb(b.x,b.y,b.X,b.Y))}return a}),i=function(a,b){if(a[b].length>7){a[b].shift();for(var c=a[b];c.length;)a.splice(b++,0,["C"][E](c.splice(0,6)));a.splice(b,1),l=O(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=O(d.length,e&&e.length||0))},k=0,l=O(d.length,e&&e.length||0);l>k;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var m=d[k],n=e&&e[k],o=m.length,p=e&&n.length;f.x=m[o-2],f.y=m[o-1],f.bx=_(m[o-4])||f.x,f.by=_(m[o-3])||f.y,g.bx=e&&(_(n[p-4])||g.x),g.by=e&&(_(n[p-3])||g.y),g.x=e&&n[p-2],g.y=e&&n[p-1]}return e||(c.curve=Cb(d)),e?[d,e]:d},null,Cb),Lb=(c._parseDots=f(function(a){for(var b=[],d=0,e=a.length;e>d;d++){var f={},g=a[d].match(/^([^:]*):?([\d\.]*)/);if(f.color=c.getRGB(g[1]),f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),b.push(f)}for(d=1,e=b.length-1;e>d;d++)if(!b[d].offset){for(var h=_(b[d-1].offset||0),i=0,j=d+1;e>j;j++)if(b[j].offset){i=b[j].offset;break}i||(i=100,j=e),i=_(i);for(var k=(i-h)/(j-d+1);j>d;d++)h+=k,b[d].offset=h+"%"}return b}),c._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),Mb=(c._tofront=function(a,b){b.top!==a&&(Lb(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},c._toback=function(a,b){b.bottom!==a&&(Lb(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},c._insertafter=function(a,b,c){Lb(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},c._insertbefore=function(a,b,c){Lb(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},c.toMatrix=function(a,b){var c=Bb(a),d={_:{transform:G},getBBox:function(){return c}};return Nb(d,b),d.matrix}),Nb=(c.transformPath=function(a,b){return rb(a,Mb(a,b))},c._extractTransform=function(a,b){if(null==b)return a._.transform;b=I(b).replace(/\.{3}|\u2026/g,a._.transform||G);var d=c.parseTransformString(b),e=0,f=0,g=0,h=1,i=1,j=a._,k=new o;if(j.transform=d||[],d)for(var l=0,m=d.length;m>l;l++){var n,p,q,r,s,t=d[l],u=t.length,v=I(t[0]).toLowerCase(),w=t[0]!=v,x=w?k.invert():0;"t"==v&&3==u?w?(n=x.x(0,0),p=x.y(0,0),q=x.x(t[1],t[2]),r=x.y(t[1],t[2]),k.translate(q-n,r-p)):k.translate(t[1],t[2]):"r"==v?2==u?(s=s||a.getBBox(1),k.rotate(t[1],s.x+s.width/2,s.y+s.height/2),e+=t[1]):4==u&&(w?(q=x.x(t[2],t[3]),r=x.y(t[2],t[3]),k.rotate(t[1],q,r)):k.rotate(t[1],t[2],t[3]),e+=t[1]):"s"==v?2==u||3==u?(s=s||a.getBBox(1),k.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(w?(q=x.x(t[3],t[4]),r=x.y(t[3],t[4]),k.scale(t[1],t[2],q,r)):k.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&k.add(t[1],t[2],t[3],t[4],t[5],t[6]),j.dirtyT=1,a.matrix=k}a.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,1==h&&1==i&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1}),Ob=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Pb=c._equaliseTransform=function(a,b){b=I(b).replace(/\.{3}|\u2026/g,a),a=c.parseTransformString(a)||[],b=c.parseTransformString(b)||[];for(var d,e,f,g,h=O(a.length,b.length),i=[],j=[],k=0;h>k;k++){if(f=a[k]||Ob(b[k]),g=b[k]||Ob(f),f[0]!=g[0]||"r"==f[0].toLowerCase()&&(f[2]!=g[2]||f[3]!=g[3])||"s"==f[0].toLowerCase()&&(f[3]!=g[3]||f[4]!=g[4]))return;for(i[k]=[],j[k]=[],d=0,e=O(f.length,g.length);e>d;d++)d in f&&(i[k][d]=f[d]),d in g&&(j[k][d]=g[d])}return{from:i,to:j}};c._getContainer=function(a,b,d,e){var f;return f=null!=e||c.is(a,"object")?a:A.doc.getElementById(a),null!=f?f.tagName?null==b?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:b,height:d}:{container:1,x:a,y:b,width:d,height:e}:void 0},c.pathToRelative=Db,c._engine={},c.path2curve=Kb,c.matrix=function(a,b,c,d,e,f){return new o(a,b,c,d,e,f)},function(a){function b(a){return a[0]*a[0]+a[1]*a[1]}function d(a){var c=N.sqrt(b(a));a[0]&&(a[0]/=c),a[1]&&(a[1]/=c)}a.add=function(a,b,c,d,e,f){var g,h,i,j,k=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],m=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof o&&(m=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),g=0;3>g;g++)for(h=0;3>h;h++){for(j=0,i=0;3>i;i++)j+=l[g][i]*m[i][h];k[g][h]=j}this.a=k[0][0],this.b=k[1][0],this.c=k[0][1],this.d=k[1][1],this.e=k[0][2],this.f=k[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new o(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,b,d){a=c.rad(a),b=b||0,d=d||0;var e=+N.cos(a).toFixed(9),f=+N.sin(a).toFixed(9);this.add(e,f,-f,e,b,d),this.add(1,0,0,1,-b,-d)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[I.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return c.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];a.scalex=N.sqrt(b(e[0])),d(e[0]),a.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*a.shear,e[1][1]-e[0][1]*a.shear],a.scaley=N.sqrt(b(e[1])),d(e[1]),a.shear/=a.scaley;var f=-e[0][1],g=e[1][1];return 0>g?(a.rotate=c.deg(N.acos(g)),0>f&&(a.rotate=360-a.rotate)):a.rotate=c.deg(N.asin(f)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[J]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:G)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:G)+(b.rotate?"r"+[b.rotate,0,0]:G)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var Qb=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);v.safari="Apple Computer, Inc."==navigator.vendor&&(Qb&&Qb[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Qb&&Qb[1]<8?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:mb;for(var Rb=function(){this.returnValue=!1},Sb=function(){return this.originalEvent.preventDefault()},Tb=function(){this.cancelBubble=!0},Ub=function(){return this.originalEvent.stopPropagation()},Vb=function(a){var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,c=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;return{x:a.clientX+c,y:a.clientY+b}},Wb=function(){return A.doc.addEventListener?function(a,b,c,d){var e=function(a){var b=Vb(a);
return c.call(d,a,b.x,b.y)};if(a.addEventListener(b,e,!1),F&&L[b]){var f=function(b){for(var e=Vb(b),f=b,g=0,h=b.targetTouches&&b.targetTouches.length;h>g;g++)if(b.targetTouches[g].target==a){b=b.targetTouches[g],b.originalEvent=f,b.preventDefault=Sb,b.stopPropagation=Ub;break}return c.call(d,b,e.x,e.y)};a.addEventListener(L[b],f,!1)}return function(){return a.removeEventListener(b,e,!1),F&&L[b]&&a.removeEventListener(L[b],e,!1),!0}}:A.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||A.win.event;var b=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,e=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Rb,a.stopPropagation=a.stopPropagation||Tb,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}:void 0}(),Xb=[],Yb=function(a){for(var c,d=a.clientX,e=a.clientY,f=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,g=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft,h=Xb.length;h--;){if(c=Xb[h],F&&a.touches){for(var i,j=a.touches.length;j--;)if(i=a.touches[j],i.identifier==c.el._drag.id){d=i.clientX,e=i.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var k,l=c.el.node,m=l.nextSibling,n=l.parentNode,o=l.style.display;A.win.opera&&n.removeChild(l),l.style.display="none",k=c.el.paper.getElementByPoint(d,e),l.style.display=o,A.win.opera&&(m?n.insertBefore(l,m):n.appendChild(l)),k&&b("raphael.drag.over."+c.el.id,c.el,k),d+=g,e+=f,b("raphael.drag.move."+c.el.id,c.move_scope||c.el,d-c.el._drag.x,e-c.el._drag.y,d,e,a)}},Zb=function(a){c.unmousemove(Yb).unmouseup(Zb);for(var d,e=Xb.length;e--;)d=Xb[e],d.el._drag={},b("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,a);Xb=[]},$b=c.el={},_b=K.length;_b--;)!function(a){c[a]=$b[a]=function(b,d){return c.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Wb(this.shape||this.node||A.doc,a,b,d||this)})),this},c["un"+a]=$b["un"+a]=function(b){for(var d=this.events||[],e=d.length;e--;)d[e].name!=a||!c.is(b,"undefined")&&d[e].f!=b||(d[e].unbind(),d.splice(e,1),!d.length&&delete this.events);return this}}(K[_b]);$b.data=function(a,d){var e=kb[this.id]=kb[this.id]||{};if(0==arguments.length)return e;if(1==arguments.length){if(c.is(a,"object")){for(var f in a)a[z](f)&&this.data(f,a[f]);return this}return b("raphael.data.get."+this.id,this,e[a],a),e[a]}return e[a]=d,b("raphael.data.set."+this.id,this,d,a),this},$b.removeData=function(a){return null==a?kb[this.id]={}:kb[this.id]&&delete kb[this.id][a],this},$b.getData=function(){return d(kb[this.id]||{})},$b.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},$b.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var ac=[];$b.drag=function(a,d,e,f,g,h){function i(i){(i.originalEvent||i).preventDefault();var j=i.clientX,k=i.clientY,l=A.doc.documentElement.scrollTop||A.doc.body.scrollTop,m=A.doc.documentElement.scrollLeft||A.doc.body.scrollLeft;if(this._drag.id=i.identifier,F&&i.touches)for(var n,o=i.touches.length;o--;)if(n=i.touches[o],this._drag.id=n.identifier,n.identifier==this._drag.id){j=n.clientX,k=n.clientY;break}this._drag.x=j+m,this._drag.y=k+l,!Xb.length&&c.mousemove(Yb).mouseup(Zb),Xb.push({el:this,move_scope:f,start_scope:g,end_scope:h}),d&&b.on("raphael.drag.start."+this.id,d),a&&b.on("raphael.drag.move."+this.id,a),e&&b.on("raphael.drag.end."+this.id,e),b("raphael.drag.start."+this.id,g||f||this,i.clientX+m,i.clientY+l,i)}return this._drag={},ac.push({el:this,start:i}),this.mousedown(i),this},$b.onDragOver=function(a){a?b.on("raphael.drag.over."+this.id,a):b.unbind("raphael.drag.over."+this.id)},$b.undrag=function(){for(var a=ac.length;a--;)ac[a].el==this&&(this.unmousedown(ac[a].start),ac.splice(a,1),b.unbind("raphael.drag.*."+this.id));!ac.length&&c.unmousemove(Yb).unmouseup(Zb),Xb=[]},v.circle=function(a,b,d){var e=c._engine.circle(this,a||0,b||0,d||0);return this.__set__&&this.__set__.push(e),e},v.rect=function(a,b,d,e,f){var g=c._engine.rect(this,a||0,b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.ellipse=function(a,b,d,e){var f=c._engine.ellipse(this,a||0,b||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},v.path=function(a){a&&!c.is(a,U)&&!c.is(a[0],V)&&(a+=G);var b=c._engine.path(c.format[D](c,arguments),this);return this.__set__&&this.__set__.push(b),b},v.image=function(a,b,d,e,f){var g=c._engine.image(this,a||"about:blank",b||0,d||0,e||0,f||0);return this.__set__&&this.__set__.push(g),g},v.text=function(a,b,d){var e=c._engine.text(this,a||0,b||0,I(d));return this.__set__&&this.__set__.push(e),e},v.set=function(a){!c.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new mc(a);return this.__set__&&this.__set__.push(b),b.paper=this,b.type="set",b},v.setStart=function(a){this.__set__=a||this.set()},v.setFinish=function(){var a=this.__set__;return delete this.__set__,a},v.setSize=function(a,b){return c._engine.setSize.call(this,a,b)},v.setViewBox=function(a,b,d,e,f){return c._engine.setViewBox.call(this,a,b,d,e,f)},v.top=v.bottom=null,v.raphael=c;var bc=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(A.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(A.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};v.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=A.doc.elementFromPoint(a,b);if(A.win.opera&&"svg"==e.tagName){var f=bc(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},v.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(d){c.isBBoxIntersect(d.getBBox(),a)&&b.push(d)}),b},v.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},v.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===!1)return this;c=c.next}return this},v.getElementsByPoint=function(a,b){var c=this.set();return this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)}),c},$b.isPointInside=function(a,b){var d=this.realPath=qb[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(d=c.transformPath(d,this.attr("transform"))),c.isPointInsidePath(d,a,b)},$b.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=qb[this.type](this),b.bboxwt=Bb(this.realPath),b.bboxwt.toString=p,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=qb[this.type](this)),b.bbox=Bb(rb(this.realPath,this.matrix)),b.bbox.toString=p,b.dirty=b.dirtyT=0),b.bbox)},$b.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},$b.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||qb[this.type](this);f=this.matrix?rb(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cc=function(a,b,d,e,f,g,h,i,l){return null==l?j(a,b,d,e,f,g,h,i):c.findDotsAtSegment(a,b,d,e,f,g,h,i,k(a,b,d,e,f,g,h,i,l))},dc=function(a,b){return function(d,e,f){d=Kb(d);for(var g,h,i,j,k,l="",m={},n=0,o=0,p=d.length;p>o;o++){if(i=d[o],"M"==i[0])g=+i[1],h=+i[2];else{if(j=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6]),n+j>e){if(b&&!m.start){if(k=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],f)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!a&&!b)return k=cc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=j,g=+i[5],h=+i[6]}l+=i.shift()+i}return m.end=l,k=a?n:b?m:c.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},ec=dc(1),fc=dc(),gc=dc(0,1);c.getTotalLength=ec,c.getPointAtLength=fc,c.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return gc(a,b).end;var d=gc(a,c,1);return b?gc(d,b).end:d},$b.getTotalLength=function(){var a=this.getPath();return a?this.node.getTotalLength?this.node.getTotalLength():ec(a):void 0},$b.getPointAtLength=function(a){var b=this.getPath();return b?fc(b,a):void 0},$b.getPath=function(){var a,b=c._getPath[this.type];return"text"!=this.type&&"set"!=this.type?(b&&(a=b(this)),a):void 0},$b.getSubpath=function(a,b){var d=this.getPath();return d?c.getSubpath(d,a,b):void 0};var hc=c.easing_formulas={linear:function(a){return a},"<":function(a){return R(a,1.7)},">":function(a){return R(a,.48)},"<>":function(a){var b=.48-a/1.04,c=N.sqrt(.1734+b*b),d=c-b,e=R(Q(d),1/3)*(0>d?-1:1),f=-c-b,g=R(Q(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:R(2,-10*a)*N.sin(2*(a-.075)*S/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};hc.easeIn=hc["ease-in"]=hc["<"],hc.easeOut=hc["ease-out"]=hc[">"],hc.easeInOut=hc["ease-in-out"]=hc["<>"],hc["back-in"]=hc.backIn,hc["back-out"]=hc.backOut;var ic=[],jc=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){setTimeout(a,16)},kc=function(){for(var a=+new Date,d=0;d<ic.length;d++){var e=ic[d];if(!e.el.removed&&!e.paused){var f,g,h=a-e.start,i=e.ms,j=e.easing,k=e.from,l=e.diff,m=e.to,n=(e.t,e.el),o={},p={};if(e.initstatus?(h=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*i,e.status=e.initstatus,delete e.initstatus,e.stop&&ic.splice(d--,1)):e.status=(e.prev+(e.percent-e.prev)*(h/i))/e.anim.top,!(0>h))if(i>h){var q=j(h/i);for(var r in k)if(k[z](r)){switch(db[r]){case T:f=+k[r]+q*i*l[r];break;case"colour":f="rgb("+[lc($(k[r].r+q*i*l[r].r)),lc($(k[r].g+q*i*l[r].g)),lc($(k[r].b+q*i*l[r].b))].join(",")+")";break;case"path":f=[];for(var t=0,u=k[r].length;u>t;t++){f[t]=[k[r][t][0]];for(var v=1,w=k[r][t].length;w>v;v++)f[t][v]=+k[r][t][v]+q*i*l[r][t][v];f[t]=f[t].join(H)}f=f.join(H);break;case"transform":if(l[r].real)for(f=[],t=0,u=k[r].length;u>t;t++)for(f[t]=[k[r][t][0]],v=1,w=k[r][t].length;w>v;v++)f[t][v]=k[r][t][v]+q*i*l[r][t][v];else{var x=function(a){return+k[r][a]+q*i*l[r][a]};f=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if("clip-rect"==r)for(f=[],t=4;t--;)f[t]=+k[r][t]+q*i*l[r][t];break;default:var y=[][E](k[r]);for(f=[],t=n.paper.customAttributes[r].length;t--;)f[t]=+y[t]+q*i*l[r][t]}o[r]=f}n.attr(o),function(a,c,d){setTimeout(function(){b("raphael.anim.frame."+a,c,d)})}(n.id,n,e.anim)}else{if(function(a,d,e){setTimeout(function(){b("raphael.anim.frame."+d.id,d,e),b("raphael.anim.finish."+d.id,d,e),c.is(a,"function")&&a.call(d)})}(e.callback,n,e.anim),n.attr(m),ic.splice(d--,1),e.repeat>1&&!e.next){for(g in m)m[z](g)&&(p[g]=e.totalOrigin[g]);e.el.attr(p),s(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&s(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}}c.svg&&n&&n.paper&&n.paper.safari(),ic.length&&jc(kc)},lc=function(a){return a>255?255:0>a?0:a};$b.animateWith=function(a,b,d,e,f,g){var h=this;if(h.removed)return g&&g.call(h),h;var i=d instanceof r?d:c.animation(d,e,f,g);s(i,h,i.percents[0],null,h.attr());for(var j=0,k=ic.length;k>j;j++)if(ic[j].anim==b&&ic[j].el==a){ic[k-1].start=ic[j].start;break}return h},$b.onAnimation=function(a){return a?b.on("raphael.anim.frame."+this.id,a):b.unbind("raphael.anim.frame."+this.id),this},r.prototype.delay=function(a){var b=new r(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},r.prototype.repeat=function(a){var b=new r(this.anim,this.ms);return b.del=this.del,b.times=N.floor(O(a,0))||1,b},c.animation=function(a,b,d,e){if(a instanceof r)return a;(c.is(d,"function")||!d)&&(e=e||d||null,d=null),a=Object(a),b=+b||0;var f,g,h={};for(g in a)a[z](g)&&_(g)!=g&&_(g)+"%"!=g&&(f=!0,h[g]=a[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new r({100:h},b)):new r(a,b)},$b.animate=function(a,b,d,e){var f=this;if(f.removed)return e&&e.call(f),f;var g=a instanceof r?a:c.animation(a,b,d,e);return s(g,f,g.percents[0],null,f.attr()),f},$b.setTime=function(a,b){return a&&null!=b&&this.status(a,P(b,a.ms)/a.ms),this},$b.status=function(a,b){var c,d,e=[],f=0;if(null!=b)return s(a,this,-1,P(b,1)),this;for(c=ic.length;c>f;f++)if(d=ic[f],d.el.id==this.id&&(!a||d.anim==a)){if(a)return d.status;e.push({anim:d.anim,status:d.status})}return a?0:e},$b.pause=function(a){for(var c=0;c<ic.length;c++)ic[c].el.id!=this.id||a&&ic[c].anim!=a||b("raphael.anim.pause."+this.id,this,ic[c].anim)!==!1&&(ic[c].paused=!0);return this},$b.resume=function(a){for(var c=0;c<ic.length;c++)if(ic[c].el.id==this.id&&(!a||ic[c].anim==a)){var d=ic[c];b("raphael.anim.resume."+this.id,this,d.anim)!==!1&&(delete d.paused,this.status(d.anim,d.status))}return this},$b.stop=function(a){for(var c=0;c<ic.length;c++)ic[c].el.id!=this.id||a&&ic[c].anim!=a||b("raphael.anim.stop."+this.id,this,ic[c].anim)!==!1&&ic.splice(c--,1);return this},b.on("raphael.remove",t),b.on("raphael.clear",t),$b.toString=function(){return"Raphaël’s object"};var mc=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)!a[b]||a[b].constructor!=$b.constructor&&a[b].constructor!=mc||(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},nc=mc.prototype;nc.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],!a||a.constructor!=$b.constructor&&a.constructor!=mc||(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},nc.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},nc.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var oc in $b)$b[z](oc)&&(nc[oc]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][D](c,b)})}}(oc));return nc.attr=function(a,b){if(a&&c.is(a,V)&&c.is(a[0],"object"))for(var d=0,e=a.length;e>d;d++)this.items[d].attr(a[d]);else for(var f=0,g=this.items.length;g>f;f++)this.items[f].attr(a,b);return this},nc.clear=function(){for(;this.length;)this.pop()},nc.splice=function(a,b){a=0>a?O(this.length+a,0):a,b=O(0,P(this.length-a,b));var c,d=[],e=[],f=[];for(c=2;c<arguments.length;c++)f.push(arguments[c]);for(c=0;b>c;c++)e.push(this[a+c]);for(;c<this.length-a;c++)d.push(this[a+c]);var g=f.length;for(c=0;c<g+d.length;c++)this.items[a+c]=this[a+c]=g>c?f[c]:d[c-g];for(c=this.items.length=this.length-=b-g;this[c];)delete this[c++];return new mc(e)},nc.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},nc.animate=function(a,b,d,e){(c.is(d,"function")||!d)&&(e=d||null);var f,g,h=this.items.length,i=h,j=this;if(!h)return this;e&&(g=function(){!--h&&e.call(j)}),d=c.is(d,U)?d:g;var k=c.animation(a,b,d,g);for(f=this.items[--i].animate(k);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(f,k,k),this.items[i]&&!this.items[i].removed||h--;return this},nc.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},nc.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=P[D](0,a),b=P[D](0,b),c=O[D](0,c),d=O[D](0,d),{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},nc.clone=function(a){a=this.paper.set();for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},nc.toString=function(){return"Raphaël‘s set"},nc.glow=function(a){var b=this.paper.set();return this.forEach(function(c){var d=c.glow(a);null!=d&&d.forEach(function(a){b.push(a)})}),b},nc.isPointInside=function(a,b){var c=!1;return this.forEach(function(d){return d.isPointInside(a,b)?(console.log("runned"),c=!0,!1):void 0}),c},c.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[z](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=ab(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[z](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[z](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},v.getFont=function(a,b,d,e){if(e=e||"normal",d=d||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400,c.fonts){var f=c.fonts[a];if(!f){var g=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,G)+"(\\s|$)","i");for(var h in c.fonts)if(c.fonts[z](h)&&g.test(h)){f=c.fonts[h];break}}var i;if(f)for(var j=0,k=f.length;k>j&&(i=f[j],i.face["font-weight"]!=b||i.face["font-style"]!=d&&i.face["font-style"]||i.face["font-stretch"]!=e);j++);return i}},v.print=function(a,b,d,e,f,g,h,i){g=g||"middle",h=O(P(h||0,1),-1),i=O(P(i||1,3),1);var j,k=I(d)[J](G),l=0,m=0,n=G;if(c.is(e,"string")&&(e=this.getFont(e)),e){j=(f||16)/e.face["units-per-em"];for(var o=e.face.bbox[J](w),p=+o[0],q=o[3]-o[1],r=0,s=+o[1]+("baseline"==g?q+ +e.face.descent:q/2),t=0,u=k.length;u>t;t++){if("\n"==k[t])l=0,x=0,m=0,r+=q*i;else{var v=m&&e.glyphs[k[t-1]]||{},x=e.glyphs[k[t]];l+=m?(v.w||e.w)+(v.k&&v.k[k[t]]||0)+e.w*h:0,m=1}x&&x.d&&(n+=c.transformPath(x.d,["t",l*j,r*j,"s",j,j,p,s,"t",(a-p)/j,(b-s)/j]))}}return this.path(n).attr({fill:"#000",stroke:"none"})},v.add=function(a){if(c.is(a,"array"))for(var b,d=this.set(),e=0,f=a.length;f>e;e++)b=a[e]||{},x[z](b.type)&&d.push(this[b.type]().attr(b));return d},c.format=function(a,b){var d=c.is(b,V)?[0][E](b):arguments;return a&&c.is(a,U)&&d.length-1&&(a=a.replace(y,function(a,b){return null==d[++b]?G:d[b]})),a||G},c.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),c.ninja=function(){return B.was?A.win.Raphael=B.is:delete Raphael,c},c.st=nc,function(a,b,d){function e(){/in/.test(a.readyState)?setTimeout(e,9):c.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,d=function(){a.removeEventListener(b,d,!1),a.readyState="complete"},!1),a.readyState="loading"),e()}(document,"DOMContentLoaded"),b.on("raphael.DOMload",function(){u=!0}),function(){if(c.svg){var a="hasOwnProperty",b=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=c.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};c.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[a](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),b(e[f])):d.setAttribute(f,b(e[f])))}else d=c._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(a,e){var j="linear",k=a.id+e,m=.5,n=.5,o=a.node,p=a.paper,r=o.style,s=c._g.doc.getElementById(k);if(!s){if(e=b(e).replace(c._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(c.rad(t)),f.sin(c.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=c._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,\xb0#]/g,"_"),a.gradient&&k!=a.gradient.id&&(p.defs.removeChild(a.gradient),delete a.gradient),!a.gradient){s=q(j+"Gradient",{id:k}),a.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:a.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=b(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y;c._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=c._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-E*u):(g=E*u,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=c.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=c.getTotalLength(t.path)-g):(g=0,h=c.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:c.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[a](k)&&!p[k]){var F=c._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,c,d){if(c=u[b(c).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=c.length;h--;)g[h]=c[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[a](o)){if(!c._availableAttrs[a](o))continue;var p=f[o];switch(k[o]=p,o){case"blur":d.blur(p);break;case"href":case"title":var u=q("title"),w=c._g.doc.createTextNode(p);u.appendChild(w),i.appendChild(u);break;case"target":var x=i.parentNode;if("a"!=x.tagName.toLowerCase()){var u=q("a");x.insertBefore(u,i),u.appendChild(i),x=u}"target"==o?x.setAttributeNS(n,"show","blank"==p?"new":p):x.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var z=b(p).split(j);if(4==z.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var A=q("clipPath"),B=q("rect");A.id=c.createUUID(),q(B,{x:z[0],y:z[1],width:z[2],height:z[3]}),A.appendChild(B),d.paper.defs.appendChild(A),q(i,{"clip-path":"url(#"+A.id+")"}),d.clip=B}if(!p){var C=i.getAttribute("clip-path");if(C){var D=c._g.doc.getElementById(C.replace(/(^url\(#|\)$)/g,l));D&&D.parentNode.removeChild(D),q(i,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(i,{d:p?k.path=c._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(i.setAttribute(o,p),d._.dirty=1,!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if("rx"==o&&"rect"==d.type)break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":if(i.setAttribute(o,p),d._.dirty=1,!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if("ry"==o&&"rect"==d.type)break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":"image"==d.type&&i.setAttributeNS(n,"href",p);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(p/=g(h(d._.sx),h(d._.sy))||1),d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var E=b(p).match(c._ISURL);if(E){A=q("pattern");var F=q("image");A.id=c.createUUID(),q(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(F,{x:0,y:0,"xlink:href":E[1]}),A.appendChild(F),function(a){c._preload(E[1],function(){var b=this.offsetWidth,c=this.offsetHeight;q(a,{width:b,height:c}),q(F,{width:b,height:c}),d.paper.safari()})}(A),d.paper.defs.appendChild(A),q(i,{fill:"url(#"+A.id+")"}),d.pattern=A,d.pattern&&s(d);break}var G=c.getRGB(p);if(G.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var H=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(H){var I=H.getElementsByTagName("stop");q(I[I.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}}else delete f.gradient,delete k.gradient,!c.is(k.opacity,"undefined")&&c.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!c.is(k["fill-opacity"],"undefined")&&c.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});G[a]("opacity")&&q(i,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=c.getRGB(p),i.setAttribute(o,G.hex),"stroke"==o&&G[a]("opacity")&&q(i,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity}),"stroke"==o&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=b(p).charAt())&&r(d,p);break;case"opacity":k.gradient&&!k[a]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){H=c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),H&&(I=H.getElementsByTagName("stop"),q(I[I.length-1],{"stop-opacity":p}));break}default:"font-size"==o&&(p=e(p,10)+"px");var J=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[J]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if("text"==d.type&&(f[a]("text")||f[a]("font")||f[a]("font-size")||f[a]("x")||f[a]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(c._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[a]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=b(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:i*x,x:g.x}),j.appendChild(c._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:i*x,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&c.is(r,"finite")&&q(m[0],{dy:r})}},z=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.matrix=c.matrix(),this.realPath=null,this.paper=b,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},A=c.el;z.prototype=A,A.constructor=z,c._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,c,e){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,c,e]])),this},A.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(j),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this},A.translate=function(a,c){return this.removed?this:(a=b(a).split(j),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this.transform(this._.transform.concat([["t",a,c]])),this)},A.transform=function(b){var d=this._;if(null==b)return d.transform;if(c._extractTransform(this,b),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[a]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&a.defs.removeChild(this.gradient),c._tear(this,a),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var b in this)this[b]="function"==typeof this[b]?c._removedFactory(b):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if("fill"==b&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==b)return this._.transform;for(var g=b.split(j),h={},i=0,l=g.length;l>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return l-1?h:h[g[0]]}if(null==d&&c.is(b,"array")){for(h={},i=0,l=b.length;l>i;i++)h[b[i]]=this.attr(b[i]);return h}if(null!=d){var m={};m[b]=d}else null!=b&&c.is(b,"object")&&(m=b);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[a](n)&&m[a](n)&&c.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));
this.attrs[n]=m[n];for(var p in o)o[a](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;return a.top!=this&&c._tofront(this,a),this},A.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;return"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper),this.paper,this},A.insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;return b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),this},A.insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;return b.parentNode.insertBefore(this.node,b),c._insertbefore(this,a,this.paper),this},A.blur=function(a){var b=this;if(0!==+a){var d=q("filter"),e=q("feGaussianBlur");b.attrs.blur=a,d.id=c.createUUID(),q(e,{stdDeviation:+a||1.5}),d.appendChild(e),b.paper.defs.appendChild(d),b._blur=d,q(b.node,{filter:"url(#"+d.id+")"})}else b._blur&&(b._blur.parentNode.removeChild(b._blur),delete b._blur,delete b.attrs.blur),b.node.removeAttribute("filter");return b},c._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},c._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},c._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},c._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},c._engine.text=function(a,b,d,e){var f=q("text");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={x:b,y:d,"text-anchor":"middle",text:e,font:c._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},c._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a&&a.container,d=a.x,e=a.y,f=a.width,g=a.height;if(!b)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==b?(i.style.cssText=j+"position:absolute;left:"+d+"px;top:"+e+"px",c._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:relative",b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i)),b=new c._Paper,b.width=f,b.height=g,b.canvas=i,b.clear(),b._left=b._top=0,h&&(b.renderfix=function(){}),b.renderfix(),b},c._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=g(c/this.width,d/this.height),j=this.top,l=e?"meet":"xMinYMin";for(null==a?(this._vbSize&&(i=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=i,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:l});i&&j;)h="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":h}),j._.dirty=1,j._.dirtyT=1,j=j.prev;return this._viewBox=[a,b,c,d,!!e],this},c.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}var e=-a.e%1,f=-a.f%1;(e||f)&&(e&&(this._left=(this._left+e)%1,c.left=this._left+"px"),f&&(this._top=(this._top+f)%1,c.top=this._top+"px"))},c.prototype.clear=function(){c.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(c._g.doc.createTextNode("Created with Raphaël "+c.version)),a.appendChild(this.desc),a.appendChild(this.defs=q("defs"))},c.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null};var B=c.st;for(var C in A)A[a](C)&&!B[a](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}}(),function(){if(c.vml){var a="hasOwnProperty",b=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=c.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(a){var d=/[ahqstv]/gi,e=c._pathToAbsolute;if(b(a).match(d)&&(e=c._path2curve),d=/[clmz]/g,e==c._pathToAbsolute&&!b(a).match(d)){var g=b(a).replace(q,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=p[b];return c.replace(s,function(a){e&&2==d.length&&(g+=d+p["m"==b?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h,i,j=e(a);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],i=j[k][0].toLowerCase(),"z"==i&&(i="x");for(var m=1,r=h.length;r>m;m++)i+=f(h[m]*u)+(m!=r-1?",":o);g.push(i)}return g.join(n)},y=function(a,b,d){var e=c.matrix();return e.rotate(-a,.5,.5),{dx:e.x(b,d),dy:e.y(b,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q=u/b,r=u/c;if(m.visibility="hidden",b&&c){if(l.coordsize=i(q)+n+i(r),m.rotation=f*(0>b*c?-1:1),f){var s=y(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-q+n+e*-r,k||g.fillsize){var t=l.getElementsByTagName(j);t=t&&t[0],l.removeChild(t),k&&(s=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),t.position=s.dx*o+n+s.dy*o),g.fillsize&&(t.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(t)}m.visibility="visible"}};c.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,c,d){for(var e=b(c).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),r=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),s=e;for(var t in i)i[a](t)&&(m[t]=i[t]);if(q&&(m.path=c._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=x(~b(m.path).toLowerCase().indexOf("r")?c._pathToAbsolute(m.path):m.path),"image"==e.type&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var y=+m.cx,B=+m.cy,D=+m.rx||+m.r||0,E=+m.ry||+m.r||0;l.path=c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((y-D)*u),f((B-E)*u),f((y+D)*u),f((B+E)*u),f(y*u)),e._.dirty=1}if("clip-rect"in i){var G=b(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||c._g.doc.createElement("div"),I=H.style;I.clip=c.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&A(s,i["arrow-start"]),"arrow-end"in i&&A(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j),L=!1;if(K=K&&K[0],!K&&(L=K=F(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var M=b(i.fill).match(c._ISURL);if(M){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=M[1],K.type="tile";var N=e.getBBox(1);K.position=N.x+n+N.y,e._.fillpos=[N.x,N.y],c._preload(M[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=c.getRGB(i.fill).hex,K.src=o,K.type="solid",c.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=b(i.fill).charAt())&&C(s,i.fill,K)&&(m.fill="none",m.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var O=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+c.getRGB(i.fill).o+1||2)-1);O=h(g(O,0),1),K.opacity=O,K.src&&(K.color="none")}l.appendChild(K);var P=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Q=!1;!P&&(Q=P=F("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(P.on=!0),("none"==i.stroke||null===i.stroke||null==P.on||0==i.stroke||0==i["stroke-width"])&&(P.on=!1);var R=c.getRGB(i.stroke);P.on&&i.stroke&&(P.color=R.hex),O=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+R.o+1||2)-1);var S=.75*(d(i["stroke-width"])||1);if(O=h(g(O,0),1),null==i["stroke-width"]&&(S=m["stroke-width"]),i["stroke-width"]&&(P.weight=S),S&&1>S&&(O*=S)&&(P.weight=1),P.opacity=O,i["stroke-linejoin"]&&(P.joinstyle=i["stroke-linejoin"]||"miter"),P.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(P.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var T={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=T[a](i["stroke-dasharray"])?T[i["stroke-dasharray"]]:o}Q&&l.appendChild(P)}if("text"==s.type){s.paper.canvas.style.display=o;var U=s.paper.span,V=100,W=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=U.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),W=d(m["font-size"]||W&&W[0])||10,p.fontSize=W*V+"px",s.textpath.string&&(U.innerHTML=b(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=U.getBoundingClientRect();s.W=m.w=(X.right-X.left)/V,s.H=m.h=(X.bottom-X.top)/V,s.X=m.x,s.Y=m.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=c.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,$=Y.length;$>Z;Z++)if(Y[Z]in i){s._.dirty=1;break}switch(m["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},C=function(a,f,g){a.attrs=a.attrs||{};var h=(a.attrs,Math.pow),i="linear",j=".5 .5";if(a.attrs.gradient=f,f=b(f).replace(c._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+n+c),o}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=c._parseDots(f);if(!l)return null;if(a=a.shape||a.node,l.length){a.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var m=[],p=0,q=l.length;q>p;p++)l[p].offset&&m.push(l[p].offset+n+l[p].color);g.colors=m.length?m.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),a.appendChild(g)}return 1},D=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=c._oid++,a.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=b,this.matrix=c.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},E=c.el;D.prototype=E,E.constructor=D,E.transform=function(a){if(null==a)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:o;e&&(d=a=b(a).replace(/\.{3}|\u2026/g,this._.transform||o)),c._extractTransform(this,f+a);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~b(this.attrs.fill).indexOf("-"),l=!b(this.attrs.fill).indexOf("url(");if(h.translate(1,1),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;j.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else j.style.filter=o,z(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=o,i.matrix=b(h),i.offset=h.offset();return d&&(this._.transform=d),this},E.rotate=function(a,c,e){if(this.removed)return this;if(null!=a){if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(c=e),null==c||null==e){var f=this.getBBox(1);c=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,c,e]])),this}},E.translate=function(a,c){return this.removed?this:(a=b(a).split(k),a.length-1&&(c=d(a[1])),a=d(a[0])||0,c=+c||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=c),this.transform(this._.transform.concat([["t",a,c]])),this)},E.scale=function(a,c,e,f){if(this.removed)return this;if(a=b(a).split(k),a.length-1&&(c=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==c&&(c=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,c,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),c.eve.unbind("raphael.*.*."+this.id),c._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;this.removed=!0}},E.attr=function(b,d){if(this.removed)return this;if(null==b){var e={};for(var f in this.attrs)this.attrs[a](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&c.is(b,"string")){if(b==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=b.split(k),h={},i=0,m=g.length;m>i;i++)b=g[i],h[b]=b in this.attrs?this.attrs[b]:c.is(this.paper.customAttributes[b],"function")?this.paper.customAttributes[b].def:c._availableAttrs[b];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&c.is(b,"array")){for(h={},i=0,m=b.length;m>i;i++)h[b[i]]=this.attr(b[i]);return h}var n;null!=d&&(n={},n[b]=d),null==d&&c.is(b,"object")&&(n=b);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[a](o)&&n[a](o)&&c.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[a](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&c._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),c._toback(this,this.paper)),this)},E.insertAfter=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[a.length-1]),a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node),c._insertafter(this,a,this.paper),this)},E.insertBefore=function(a){return this.removed?this:(a.constructor==c.st.constructor&&(a=a[0]),a.node.parentNode.insertBefore(this.node,a.node),c._insertbefore(this,a,this.paper),this)},E.blur=function(a){var b=this.node.runtimeStyle,d=b.filter;return d=d.replace(r,o),0!==+a?(this.attrs.blur=a,b.filter=d+n+m+".Blur(pixelradius="+(+a||1.5)+")",b.margin=c.format("-{0}px 0 0 -{0}px",f(+a||1.5))):(b.filter=d,b.margin=0,delete this.attrs.blur),this},c._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},c._engine.rect=function(a,b,d,e,f,g){var h=c._rectPath(b,d,e,f,g),i=a.path(h),j=i.attrs;return i.X=j.x=b,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},c._engine.ellipse=function(a,b,c,d,e){var f=a.path();return f.attrs,f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},c._engine.circle=function(a,b,c,d){var e=a.path();return e.attrs,e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},c._engine.image=function(a,b,d,e,f,g){var h=c._rectPath(d,e,f,g),i=a.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=b,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=b,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},c._engine.text=function(a,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=c.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=b(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,a),l={fill:"#000",stroke:"none",font:c._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=b(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),a.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},c._engine.setSize=function(a,b){var d=this.canvas.style;return this.width=a,this.height=b,a==+a&&(a+="px"),b==+b&&(b+="px"),d.width=a,d.height=b,d.clip="rect(0 "+a+" "+b+" 0)",this._viewBox&&c._engine.setViewBox.apply(this,this._viewBox),this},c._engine.setViewBox=function(a,b,d,e,f){c.eve("raphael.setViewBox",this,this._viewBox,[a,b,d,e,f]);var h,i,j=this.width,k=this.height,l=1/g(d/j,e/k);return f&&(h=k/e,i=j/d,j>d*h&&(a-=(j-d*h)/2/h),k>e*i&&(b-=(k-e*i)/2/i)),this._viewBox=[a,b,d,e,!!f],this._viewBoxShift={dx:-a,dy:-b,scale:l},this.forEach(function(a){a.transform("...")}),this};var F;c._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},c._engine.initWin(c._g.win),c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a.container,d=a.height,e=a.width,f=a.x,g=a.y;if(!b)throw new Error("VML container not found.");var h=new c._Paper,i=h.canvas=c._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=1e3*u+n+1e3*u,h.coordorigin="0 0",h.span=c._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=c.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==b?(c._g.doc.body.appendChild(i),j.left=f+"px",j.top=g+"px",j.position="absolute"):b.firstChild?b.insertBefore(i,b.firstChild):b.appendChild(i),h.renderfix=function(){},h},c.prototype.clear=function(){c.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=c._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},c.prototype.remove=function(){c.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;return!0};var G=c.st;for(var H in E)E[a](H)&&!G[a](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}}(),B.was?A.win.Raphael=c:Raphael=c,c}),define("diff/diff__parser_doublepane",["diff/diff__tools","diff/diff__parsers","diff/diff__parser"],function(a){return a.ParserDoublePane=function(){},a.inherit(a.ParserDoublePane,a.Parser),a.addSingletonGetter(a.ParserDoublePane),a.ParserDoublePane.prototype.availableLineTypes=a.Parser.LineType.UNCHANGED|a.Parser.LineType.DELETED|a.Parser.LineType.ADDED|a.Parser.LineType.INLINE|a.Parser.LineType.EOL_CHANGED,a.ParserDoublePane.prototype.modifiedParsers=[a.parsers.addedOrDeleted,a.parsers.EOLChanged,a.parsers.inlineChanges],a.ParserDoublePane.ignoreWhitespaces=function(b){return b.map(function(b){for(var c=!0,d=b.original,e=b.modified,f=d.length;f--;){var g=d[f],h=e[f];if(Boolean(g.type)&&(!a.isEmptyString(g.code)||!a.isEmptyString(h.code))){c=!1;break}}if(c&&Boolean(b.type)){var i=a.mixin({},b);return i.type=a.Parser.LineType.NULL,i}return b})},a.ParserDoublePane}),define("diff/_diff__doublepane-menu.hbs",["handlebars"],function(a){a.registerPartial("diff__doublepane-menu",a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="ring-btn-group ring-diff__menu-group"> <button class="ring-btn ring-diff__menu-btn_up"> <span class="ring-font-icon ring-font-icon_caret-up"></span> </button> <button class="ring-btn ring-diff__menu-btn_down"> <span class="ring-font-icon ring-font-icon_caret-down"></span> </button> </div> <div class="ring-diff__menu-group"> <label class="ring-diff__menu-checkbox"><input type="checkbox" class="ring-diff__menu-whitespaces">&nbsp;Ignore whitespaces</label> </div>'}))}),define("diff/diff__doublepane-menu",["diff/diff__tools","handlebars","jquery","diff/_diff__doublepane-menu.hbs"],function(a,b,c){return a.DoublePaneMenu=function(a){this.eventHandler_=c({}),this.element_=a,this.createDOM()},a.DoublePaneMenu.CHECKBOX_LIFETIME=3650,a.DoublePaneMenu.CHECKBOX_COOKIE="ringdiff-ignorewhitespaces",a.DoublePaneMenu.TEMPLATE="diff__doublepane-menu",a.DoublePaneMenu.Selector={DOWN:".ring-diff__menu-btn_down",UP:".ring-diff__menu-btn_up",WHITESPACES:".ring-diff__menu-whitespaces"},a.DoublePaneMenu.EventType={DOWN:"down",UP:"up",WHITESPACES_ON:"whitespaceson",WHITESPACES_OFF:"whitespacesoff"},a.DoublePaneMenu.prototype.eventHandler_=null,a.DoublePaneMenu.prototype.element_=null,a.DoublePaneMenu.prototype.createDOM=function(){return this.element_.innerHTML=b.partials[a.DoublePaneMenu.TEMPLATE](),this.buttonDown_=c(a.DoublePaneMenu.Selector.DOWN,this.element_)[0],this.buttonUp_=c(a.DoublePaneMenu.Selector.UP,this.element_)[0],this.whitespacesSwitch_=c(a.DoublePaneMenu.Selector.WHITESPACES,this.element_)[0],this.onDownClick_=a.bindContext(this.onDownClick_,this),this.onUpClick_=a.bindContext(this.onUpClick_,this),this.onWhitespacesClick_=a.bindContext(this.onWhitespacesClick_,this),c(this.buttonDown_).on("click",this.onDownClick_),c(this.buttonUp_).on("click",this.onUpClick_),c(this.whitespacesSwitch_).on("click",this.onWhitespacesClick_),this.whitespacesSwitch_.checked=Boolean(a.cookies.get(a.DoublePaneMenu.CHECKBOX_COOKIE)),this.element_},a.DoublePaneMenu.prototype.onDownClick_=function(b){b.preventDefault(),this.eventHandler_.trigger(a.DoublePaneMenu.EventType.DOWN)},a.DoublePaneMenu.prototype.onUpClick_=function(b){b.preventDefault(),this.eventHandler_.trigger(a.DoublePaneMenu.EventType.UP)},a.DoublePaneMenu.prototype.onWhitespacesClick_=function(b){var c=b.currentTarget.checked;this.eventHandler_.trigger(c?a.DoublePaneMenu.EventType.WHITESPACES_OFF:a.DoublePaneMenu.EventType.WHITESPACES_ON),a.cookies.set(a.DoublePaneMenu.CHECKBOX_COOKIE,"checked",c?a.DoublePaneMenu.CHECKBOX_LIFETIME:-1)},a.DoublePaneMenu.prototype.getHandler=function(){return this.eventHandler_},a.DoublePaneMenu.prototype.setEnabled=function(a){this.enabled_!==a&&(this.enabled_=a,this.setButtonUpEnabled(a),this.setButtonDownEnabled(a))},a.DoublePaneMenu.prototype.setButtonUpEnabled=function(a){this.buttonUp_.disabled=!a},a.DoublePaneMenu.prototype.setButtonDownEnabled=function(a){this.buttonDown_.disabled=!a},a.DoublePaneMenu.prototype.isWhitespacesEnabled=function(){return!Boolean(a.cookies.get(a.DoublePaneMenu.CHECKBOX_COOKIE))},a.DoublePaneMenu}),define("diff/_diff__doublepane-divider-lower-border.hbs",["handlebars"],function(a){a.registerPartial("diff__doublepane-divider-lower-border",a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="M",(f=c.xFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYTo)?f=f.call(b,{hash:{},data:e}):(f=b.leftYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" C ",(f=c.xModifiedFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYTo)?f=f.call(b,{hash:{},data:e}):(f=b.leftYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xModifiedTo)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYTo)?f=f.call(b,{hash:{},data:e}):(f=b.rightYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xTo)?f=f.call(b,{hash:{},data:e}):(f=b.xTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYTo)?f=f.call(b,{hash:{},data:e}):(f=b.rightYTo,f=typeof f===h?f.apply(b):f),g+=i(f)}))}),define("diff/_diff__doublepane-divider-upper-border.hbs",["handlebars"],function(a){a.registerPartial("diff__doublepane-divider-upper-border",a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="M",(f=c.xFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.leftYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" C ",(f=c.xModifiedFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.leftYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xModifiedTo)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.rightYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xTo)?f=f.call(b,{hash:{},data:e}):(f=b.xTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.rightYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)}))}),define("diff/_diff__doublepane-divider-path.hbs",["handlebars"],function(a){a.registerPartial("diff__doublepane-divider-path",a.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="M",(f=c.xFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.leftYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" C ",(f=c.xModifiedFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.leftYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xModifiedTo)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.rightYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xTo)?f=f.call(b,{hash:{},data:e}):(f=b.xTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.rightYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" L ",(f=c.xTo)?f=f.call(b,{hash:{},data:e}):(f=b.xTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYTo)?f=f.call(b,{hash:{},data:e}):(f=b.rightYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" C ",(f=c.xModifiedTo)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.rightYTo)?f=f.call(b,{hash:{},data:e}):(f=b.rightYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xModifiedFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xModifiedFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYTo)?f=f.call(b,{hash:{},data:e}):(f=b.leftYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+", ",(f=c.xFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYTo)?f=f.call(b,{hash:{},data:e}):(f=b.leftYTo,f=typeof f===h?f.apply(b):f),g+=i(f)+" L ",(f=c.xFrom)?f=f.call(b,{hash:{},data:e}):(f=b.xFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" ",(f=c.leftYFrom)?f=f.call(b,{hash:{},data:e}):(f=b.leftYFrom,f=typeof f===h?f.apply(b):f),g+=i(f)+" Z"}))}),define("diff/diff__doublepane-divider",["diff/diff__tools","handlebars","diff/diff__parser_doublepane","diff/_diff__doublepane-divider-lower-border.hbs","diff/_diff__doublepane-divider-upper-border.hbs","diff/_diff__doublepane-divider-path.hbs"],function(a,b){return a.DoubleEditorDivider=function(b){a.isDef(a.DoubleEditorDivider.rangeTypeToConnectorClass_)||a.DoubleEditorDivider.getRangeTypeToConnectorClass(),this.element_=b,this.ranges_=[],this.visibleVRangeOriginal_=null,this.visibleVRangeModified_=null,this.connectorsCanvas_=document.createElementNS(a.DoubleEditorDivider.SVG_NAMESPACE,"svg"),this.element_.appendChild(this.connectorsCanvas_)},a.DoubleEditorDivider.SVG_NAMESPACE="http://www.w3.org/2000/svg",a.DoubleEditorDivider.PathType={LOWER_LINE:0,PATH:1,UPPER_LINE:2},a.DoubleEditorDivider.ClassName={CONNECTOR_BASE:"ring-diff-connector",CONNECTOR_PATH:"ring-diff-connector__path",CONNECTOR_PATH_DELETED:"ring-diff-connector__path_deleted",CONNECTOR_PATH_ADDED:"ring-diff-connector__path_added",CONNECTOR_PATH_INLINE:"ring-diff-connector__path_modified",LINE_BASE:"ring-diff-connector__line",LINE_DELETED:"ring-diff-connector__line_deleted",LINE_ADDED:"ring-diff-connector__line_added",LINE_INLINE:"ring-diff-connector__line_modified"},a.DoubleEditorDivider.getRangeTypeToConnectorClass=function(){a.DoubleEditorDivider.rangeTypeToConnectorClass_=a.createObject(a.Parser.LineType.NULL,"",a.Parser.LineType.DELETED,a.DoubleEditorDivider.ClassName.CONNECTOR_PATH_DELETED,a.Parser.LineType.ADDED,a.DoubleEditorDivider.ClassName.CONNECTOR_PATH_ADDED,a.Parser.LineType.INLINE,a.DoubleEditorDivider.ClassName.CONNECTOR_PATH_INLINE,a.Parser.LineType.INLINE|a.Parser.LineType.DELETED,a.DoubleEditorDivider.ClassName.CONNECTOR_PATH_INLINE,a.Parser.LineType.INLINE|a.Parser.LineType.ADDED,a.DoubleEditorDivider.ClassName.CONNECTOR_PATH_INLINE),a.DoubleEditorDivider.rangeTypeToLineClass_=a.createObject(a.Parser.LineType.NULL,"",a.Parser.LineType.DELETED,a.DoubleEditorDivider.ClassName.LINE_DELETED,a.Parser.LineType.ADDED,a.DoubleEditorDivider.ClassName.LINE_ADDED,a.Parser.LineType.INLINE,a.DoubleEditorDivider.ClassName.LINE_INLINE,a.Parser.LineType.INLINE|a.Parser.LineType.DELETED,a.DoubleEditorDivider.ClassName.LINE_INLINE,a.Parser.LineType.INLINE|a.Parser.LineType.ADDED,a.DoubleEditorDivider.ClassName.LINE_INLINE)
},a.DoubleEditorDivider.getClassFromRangeType=function(b,c){var d=[a.Parser.LineType.ADDED,a.Parser.LineType.DELETED,a.Parser.LineType.INLINE],e=a.Parser.normalizeType(b,d);return c===a.DoubleEditorDivider.PathType.LOWER_LINE||c===a.DoubleEditorDivider.PathType.UPPER_LINE?a.DoubleEditorDivider.rangeTypeToLineClass_[e]:a.DoubleEditorDivider.rangeTypeToConnectorClass_[e]},a.DoubleEditorDivider.prototype.redrawConnectors=function(){if(a.isDef(this.ranges_)&&a.isDef(this.connectorsCanvas_)){this.connectorsCanvas_.innerHTML="";var b=this.connectorsCanvas_.clientWidth,c=this.connectorsCanvas_.clientHeight;this.connectorsCanvas_.setAttribute("viewbox",[0,0,b,c].join(" ")),this.connectors_=this.ranges_.map(function(c,d){if(Boolean(c.type)){var e=this.ranges_[d+1],f=document.createElementNS(a.DoubleEditorDivider.SVG_NAMESPACE,"g"),g=document.createElementNS(a.DoubleEditorDivider.SVG_NAMESPACE,"path");g.setAttribute("d",a.DoubleEditorDivider.getPathForRange(c,this.visibleVRangeOriginal_,this.visibleVRangeModified_,b,a.DoubleEditorDivider.PathType.PATH)),g.setAttribute("class",a.DoubleEditorDivider.getClassFromRangeType(c.type));var h=document.createElementNS(a.DoubleEditorDivider.SVG_NAMESPACE,"path");h.setAttribute("d",a.DoubleEditorDivider.getPathForRange(c,this.visibleVRangeOriginal_,this.visibleVRangeModified_,b,a.DoubleEditorDivider.PathType.LOWER_LINE)),h.setAttribute("class",[a.DoubleEditorDivider.ClassName.LINE_BASE,a.DoubleEditorDivider.getClassFromRangeType(c.type,a.DoubleEditorDivider.PathType.LOWER_LINE)].join(" "));var i=document.createElementNS(a.DoubleEditorDivider.SVG_NAMESPACE,"path");return i.setAttribute("d",a.DoubleEditorDivider.getPathForRange(c,this.visibleVRangeOriginal_,this.visibleVRangeModified_,b,a.DoubleEditorDivider.PathType.UPPER_LINE)),i.setAttribute("class",[a.DoubleEditorDivider.ClassName.LINE_BASE,a.DoubleEditorDivider.getClassFromRangeType(c.type,a.DoubleEditorDivider.PathType.UPPER_LINE)].join(" ")),f.appendChild(g),f.appendChild(i),f.appendChild(h),this.connectorsCanvas_.appendChild(f),i.setAttribute("transform","translate(0, 0.5)"),a.isDef(e)&&a.Parser.lineHasType(c,a.Parser.LineType.INLINE)&&a.Parser.lineHasType(e,a.Parser.LineType.INLINE)?h.setAttribute("transform","translate(0, 0.5)"):h.setAttribute("transform","translate(0, -0.5)"),f}return null},this)}},a.DoubleEditorDivider.getPathForRange=function(c,d,e,f,g){var h=c.originalFrom-d.from,i=c.modifiedFrom-e.from,j=c.originalTo-d.from,k=c.modifiedTo-e.from,l=.2;c.type===a.Parser.LineType.ADDED&&g===a.DoubleEditorDivider.PathType.LOWER_LINE&&(j++,k++);var m={xFrom:0,xModifiedFrom:f*l,xModifiedTo:f*(1-l),xTo:f+1,leftYFrom:h,rightYFrom:i,leftYTo:j,rightYTo:k};switch(g){case a.DoubleEditorDivider.PathType.LOWER_LINE:return b.partials["diff__doublepane-divider-lower-border"](m);case a.DoubleEditorDivider.PathType.UPPER_LINE:return b.partials["diff__doublepane-divider-upper-border"](m);default:return b.partials["diff__doublepane-divider-path"](m)}},a.DoubleEditorDivider.prototype.setVisibleRange=function(a,b){this.visibleVRangeOriginal_=a,this.visibleVRangeModified_=b,this.redrawConnectors()},a.DoubleEditorDivider.prototype.setRanges=function(a){this.ranges_=a,this.redrawConnectors()},a.DoubleEditorDivider.prototype.dispose=function(){this.connectors_.forEach(function(a){a.outerHTML=""},this),this.connectorsCanvas_.innerHTML="",this.visibleVRangeModified_=null,this.visibleVRangeOriginal_=null,this.connectors_=null,this.ranges_=null,this.connectorsCanvas_=null},a.DoubleEditorDivider}),define("diff/_diff_doublepane.hbs",["handlebars"],function(a){a.registerPartial("diff_doublepane",a.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="ring-diff ring-diff_doublepane"> <div class="ring-diff__menu"></div> <div class="ring-diff__map"></div> <div class="ring-diff__code"> <div class="ring-diff__original"></div> <div class="ring-diff__split"></div> <div class="ring-diff__modified"></div> </div> </div>'}))}),define("diff/diff__editorcontroller_double",["jquery","handlebars","raphael","diff/diff__tools","codemirror","global/global__codemirror-helper","diff/diff__editorcontroller","diff/diff__parser_doublepane","diff/diff__doublepane-menu","diff/diff__doublepane-divider","diff/_diff_doublepane.hbs"],function(a,b,c,d,e,f){return d.DoubleEditorController=function(a){d.DoubleEditorController.super_.constructor.call(this,a,d.ParserDoublePane.getInstance()),this.changes_=[]},d.inherit(d.DoubleEditorController,d.EditorController),d.DoubleEditorController.SCROLL_TIMEOUT=200,d.DoubleEditorController.EQUATOR_RATIO=.5,d.DoubleEditorController.EDITOR_MODE="background",d.DoubleEditorController.EDITOR_SCREEN_MODE="local",d.DoubleEditorController.LineClass={ADDED:"ring-diff-line_added",BEFORE_ADDED:"ring-diff-line_before-added",BEFORE_DELETED:"ring-diff-line_before-deleted",DELETED:"ring-diff-line_deleted",FIRST:"ring-diff-line_first",LAST:"ring-diff-line_last",MODIFIED:"ring-diff-line_modified"},d.DoubleEditorController.CharsClass={ADDED:"ring-diff-chars_added",DELETED:"ring-diff-chars_deleted",MODIFIED:"ring-diff-chars_modified",UNCHANGED:""},d.DoubleEditorController.ConnectorClass={ADDED:"ring-diff__connector_added",BASE:"ring-diff__connector",DELETED:"ring-diff__connector_deleted",MODIFIED:"ring-diff__connector_modified"},d.DoubleEditorController.MapClass={ADDED:"ring-diff__map-element_added",BASE:"ring-diff__map",ELEMENT_BASE:"ring-diff__map-element",DELETED:"ring-diff__map-element_deleted",MODIFIED:"ring-diff__map-element_modified"},d.DoubleEditorController.Template={BASE:"diff_doublepane"},d.DoubleEditorController.CssSelector={BASE:".ring-diff_doublepane",ORIGINAL:".ring-diff__original",MAP:".ring-diff__map",MENU:".ring-diff__menu",MODIFIED:".ring-diff__modified",SPLITTER:".ring-diff__split"},d.DoubleEditorController.ClassName={MAP:"ring-diff__changes-map"},d.DoubleEditorController.getEditorOptions=function(){return{lineNumbers:!0,matchBrackets:!0,mode:{name:"text/x-java"},readOnly:!0,viewportMargin:1}},d.DoubleEditorController.getMaxScroll_=function(a){var b=a.getScrollInfo();return b.width-b.clientWidth},d.DoubleEditorController.prototype.whitespacesEnabled_=!0,d.DoubleEditorController.prototype.setEnabledInternal=function(a){if(a){this.element_.innerHTML=b.partials[d.DoubleEditorController.Template.BASE](),this.originalElement_=this.element_.querySelector(d.DoubleEditorController.CssSelector.ORIGINAL),this.modifiedElement_=this.element_.querySelector(d.DoubleEditorController.CssSelector.MODIFIED),this.codeMirrorOriginal_=new e(this.originalElement_,d.DoubleEditorController.getEditorOptions()),this.codeMirrorModified_=new e(this.modifiedElement_,d.DoubleEditorController.getEditorOptions());var c=this.element_.querySelector(d.DoubleEditorController.CssSelector.MENU);this.menu_=new d.DoublePaneMenu(c),this.splitElement_=this.element_.querySelector(d.DoubleEditorController.CssSelector.SPLITTER),this.divider_=new d.DoubleEditorDivider(this.splitElement_);var f=this.getEditorViewport(this.codeMirrorOriginal_),g=this.getEditorViewport(this.codeMirrorModified_);this.divider_.setVisibleRange(f,g)}else this.unbindEditors_(),this.element_.innerHTML="",this.codeMirrorOriginal_=null,this.codeMirrorModified_=null,this.scrollHandler_=null,this.menu_=null},d.DoubleEditorController.prototype.setContentInternal=function(a,b,c,e){this.unbindEditors_(),this.allChanges_=this.codeParser_.parse(a,b,c),this.notWhitespaceChanges_=d.ParserDoublePane.ignoreWhitespaces(this.allChanges_),this.codeMirrorOriginal_.getValue()!==a&&this.codeMirrorOriginal_.setValue(a),this.codeMirrorModified_.getValue()!==b&&this.codeMirrorModified_.setValue(b),this.setWhitespacesEnabled(this.menu_.isWhitespacesEnabled()),this.setUsedValues(this.getUsedValues_()),this.divider_.setRanges(this.offsets_),Boolean(e)||this.setCurrentChange(0,!0)},d.DoubleEditorController.prototype.getUsedValues_=function(){return this.whitespacesEnabled_?this.allChanges_:this.notWhitespaceChanges_},d.DoubleEditorController.prototype.setUsedValues=function(a){this.lines_!==a&&(this.lines_=a,this.changes_=this.getChanges_(this.lines_),this.offsets_=this.getPxOffsets_(this.lines_),this.divider_.setRanges(this.offsets_),this.unbindEditors_(),this.bindEditors_())},d.DoubleEditorController.prototype.bindEditors_=function(){this.originalEditorMaxWidth_=d.DoubleEditorController.getMaxScroll_(this.codeMirrorOriginal_),this.modifiedEditorMaxWidth_=d.DoubleEditorController.getMaxScroll_(this.codeMirrorModified_),this.setEditorScrollHandlerEnabled_(this.codeMirrorOriginal_,!0),this.setEditorScrollHandlerEnabled_(this.codeMirrorModified_,!0),this.splitElement_||(this.splitElement_=this.element_.querySelector(d.DoubleEditorController.CssSelector.SPLITTER)),this.colorizeLines_(),this.divider_.redrawConnectors(),this.drawMap_(),this.setMenuEnabled(!0),this.resizeHandler_||(this.resizeHandler_=d.bindContext(this.onResize_,this)),a(window).on("resize",this.resizeHandler_)},d.DoubleEditorController.prototype.getChanges_=function(a){var b=[];return a.forEach(function(a,c){a.type&&b.push(c)}),b},d.DoubleEditorController.prototype.getPxOffsets_=function(a){var b=[];return a.forEach(function(a){b.push({originalFrom:this.codeMirrorOriginal_.heightAtLine(a.originalFrom,d.DoubleEditorController.EDITOR_SCREEN_MODE),originalTo:this.codeMirrorOriginal_.heightAtLine(a.originalTo,d.DoubleEditorController.EDITOR_SCREEN_MODE),modifiedFrom:this.codeMirrorModified_.heightAtLine(a.modifiedFrom,d.DoubleEditorController.EDITOR_SCREEN_MODE)-1,modifiedTo:this.codeMirrorModified_.heightAtLine(a.modifiedTo,d.DoubleEditorController.EDITOR_SCREEN_MODE)-1,type:a.type})},this),b},d.DoubleEditorController.prototype.unbindEditors_=function(){this.setEditorScrollHandlerEnabled_(this.codeMirrorOriginal_,!1),this.setEditorScrollHandlerEnabled_(this.codeMirrorModified_,!1),a(window).off("resize",this.resizeHandler_)},d.DoubleEditorController.prototype.onMenuUpClick_=function(a){a.preventDefault(),this.setCurrentChange(this.getCurrentChange()-1,!0)},d.DoubleEditorController.prototype.onMenuDownClick_=function(a){a.preventDefault(),this.setCurrentChange(this.getCurrentChange()+1,!0)},d.DoubleEditorController.prototype.onMenuWhitespacesOn_=function(a){a.preventDefault(),this.setWhitespacesEnabled(!0)},d.DoubleEditorController.prototype.onMenuWhitespacesOff_=function(a){a.preventDefault(),this.setWhitespacesEnabled(!1)},d.DoubleEditorController.prototype.onResize_=function(){},d.DoubleEditorController.prototype.onScroll_=function(a){var b=a===this.codeMirrorOriginal_?this.codeMirrorModified_:this.codeMirrorOriginal_;if(!this.disabledEditor_||b===this.disabledEditor_){clearTimeout(this.disableEditorTimeout_),this.disabledEditor_&&b===this.disabledEditor_||(this.setEditorScrollHandlerEnabled_(b,!1),this.disabledEditor_=b),this.syncScroll_(a);var c=this.getEditorViewport(this.codeMirrorOriginal_),e=this.getEditorViewport(this.codeMirrorModified_);if(this.divider_.setVisibleRange(c,e),this.lines_[this.currentOffsetIndex_].type){var f=this.getChangeByOffsetIndex(this.currentOffsetIndex_);this.setCurrentChange(f)}this.disableEditorTimeout_=setTimeout(d.bindContext(function(){this.setEditorScrollHandlerEnabled_(this.disabledEditor_,!0),this.disabledEditor_=null},this),d.DoubleEditorController.SCROLL_TIMEOUT)}},d.DoubleEditorController.prototype.getEditorViewport=function(a){var b=a.getScrollInfo();return new d.Range(b.top,b.top+b.clientHeight)},d.DoubleEditorController.prototype.getChangeByOffsetIndex=function(a){var b=0;return this.changes_.some(function(c,d){return c===a&&(b=d),c===a}),b},d.DoubleEditorController.prototype.setWhitespacesEnabled=function(a){this.whitespacesEnabled_!==a&&(this.whitespacesEnabled_=a,this.setUsedValues(this.getUsedValues_()))},d.DoubleEditorController.prototype.syncScroll_=function(a){var b=a===this.codeMirrorOriginal_,c=b?this.codeMirrorModified_:this.codeMirrorOriginal_,d=a.getScrollInfo(),e=this.getEquator_(a),f=this.getCurrentOffset_(d.top+e,this.offsets_,b),g=this.offsets_[f],h=b?g.originalFrom:g.modifiedFrom,i=b?g.modifiedFrom:g.originalFrom,j=b?g.originalTo:g.modifiedTo,k=b?g.modifiedTo:g.originalTo,l=j-h,m=d.top-h+e,n=m/l,o=k-i,p=Math.round(o*n),q=p+i-e,r=b?this.originalEditorMaxWidth_:this.modifiedEditorMaxWidth_,s=b?this.modifiedEditorMaxWidth_:this.originalEditorMaxWidth_,t=d.left/r,u=Math.round(s*t);c.scrollTo(u,q),this.currentOffsetIndex_=f},d.DoubleEditorController.prototype.getEquator_=function(a){var b,c=a.getScrollInfo();return b=this.isLastScreen_(a)?c.clientHeight-(c.height-c.top-c.clientHeight):Math.round(c.clientHeight*d.DoubleEditorController.EQUATOR_RATIO)},d.DoubleEditorController.prototype.setEditorScrollHandlerEnabled_=function(a,b){this.scrollHandler_||(this.scrollHandler_=d.bindContext(this.onScroll_,this)),b?e.on(a,"scroll",this.scrollHandler_):e.off(a,"scroll",this.scrollHandler_)},d.DoubleEditorController.prototype.isLastScreen_=function(a){var b=a.getScrollInfo();return b.height-b.top<=b.clientHeight+(b.clientHeight-b.clientHeight*d.DoubleEditorController.EQUATOR_RATIO)},d.DoubleEditorController.prototype.getCurrentOffset_=function(a,b,c){for(var d,e,f,g=0,h=b.length;d=b[g],h>g;g++)if(e=c?d.originalFrom:d.modifiedFrom,f=c?d.originalTo:d.modifiedTo,a>=e&&f>=a)return g;return h-1},d.DoubleEditorController.prototype.setMenuEnabled=function(a){this.menuIsEnabled_!==a&&(this.menuIsEnabled_=a,a?(this.onMenuUpClick_=d.bindContext(this.onMenuUpClick_,this),this.onMenuDownClick_=d.bindContext(this.onMenuDownClick_,this),this.onMenuWhitespacesOn_=d.bindContext(this.onMenuWhitespacesOn_,this),this.onMenuWhitespacesOff_=d.bindContext(this.onMenuWhitespacesOff_,this),this.menu_.setEnabled(!0),this.menu_.getHandler().on(d.DoublePaneMenu.EventType.UP,this.onMenuUpClick_).on(d.DoublePaneMenu.EventType.DOWN,this.onMenuDownClick_).on(d.DoublePaneMenu.EventType.WHITESPACES_ON,this.onMenuWhitespacesOn_).on(d.DoublePaneMenu.EventType.WHITESPACES_OFF,this.onMenuWhitespacesOff_)):(this.menu_.setEnabled(!1),this.menu_.getHandler().off()))},d.DoubleEditorController.prototype.setCurrentChange=function(a,b){this.currentChange_=d.clamp(a,0,this.changes_.length-1),this.setCurrentChangeInternal(a,b)},d.DoubleEditorController.prototype.setCurrentChangeInternal=function(a,b){if(this.offsets_){var c=50,e=this.changes_[a],f=this.offsets_[e];if(f){if(b){var g=d.clamp(f.originalFrom-c,0,1/0);this.codeMirrorOriginal_.scrollTo(0,g);var h=this.codeMirrorModified_.getScrollInfo();if(f.modifiedTo<h.top){var i=d.clamp(f.modifiedFrom-c,0,1/0);this.codeMirrorModified_.scrollTo(0,i)}}this.checkMenu_()}}},d.DoubleEditorController.prototype.checkMenu_=function(){this.menu_.setButtonUpEnabled(this.currentChange_>0),this.menu_.setButtonDownEnabled(this.currentChange_<this.changes_.length-1)},d.DoubleEditorController.prototype.getCurrentChange=function(){return this.currentChange_},d.DoubleEditorController.prototype.colorizeLines_=function(){var a=f.getInstance();d.DoubleEditorController.cleanupEditor(this.codeMirrorOriginal_),d.DoubleEditorController.cleanupEditor(this.codeMirrorModified_);var b=0,c=0;this.lines_.forEach(function(a,e){var f=a.originalTo-a.originalFrom,g=a.modifiedTo-a.modifiedFrom;if(a.type){var h,i,j,k=this.lines_[e+1]?this.lines_[e+1].type:null;j=a.originalFrom;do h=0===f?j-1:j,i=d.DoubleEditorController.getLineClass(a.type,h,a.originalFrom,a.originalTo,k),d.DoubleEditorController.colorizeLine(this.codeMirrorOriginal_,h,i),d.DoubleEditorController.colorizeInline(this.codeMirrorOriginal_,a.original,b),j++;while(j<a.originalTo);j=a.modifiedFrom;do h=0===g?j-1:j,i=d.DoubleEditorController.getLineClass(a.type,h,a.modifiedFrom,a.modifiedTo,k),d.DoubleEditorController.colorizeLine(this.codeMirrorModified_,h,i),d.DoubleEditorController.colorizeInline(this.codeMirrorModified_,a.modified,c),j++;while(j<a.modifiedTo)}b+=f,c+=g},this),a.executeOperationBuffer(this.codeMirrorOriginal_),a.executeOperationBuffer(this.codeMirrorModified_)},d.DoubleEditorController.cleanupEditor=function(a){var b=f.getInstance(),c=b.getSelectionsBuffer(a);c.forEach(function(c){b.addOperation(a,function(){a.removeLineClass(c,d.DoubleEditorController.EDITOR_MODE)})});var e=a.getDoc().getAllMarks();e.forEach(function(c){b.addOperation(a,function(){c.clear()})}),b.cleanupSelections(a),b.executeOperationBuffer(a)},d.DoubleEditorController.colorizeLine=function(a,b,c){var e=f.getInstance();e.addOperation(a,function(){var f=a.getLineHandle(b);a.addLineClass(f,d.DoubleEditorController.EDITOR_MODE,c),e.addSelection(a,f)})},d.DoubleEditorController.getLineClass=function(a,b,c,e,f){var g=[],h=[d.Parser.LineType.NULL,d.Parser.LineType.ADDED,d.Parser.LineType.DELETED,d.Parser.LineType.INLINE],i=d.createObject(d.Parser.LineType.NULL,"",d.Parser.LineType.ADDED,d.DoubleEditorController.LineClass.ADDED,d.Parser.LineType.DELETED,d.DoubleEditorController.LineClass.DELETED,d.Parser.LineType.INLINE,d.DoubleEditorController.LineClass.MODIFIED,d.Parser.LineType.INLINE|d.Parser.LineType.ADDED,d.DoubleEditorController.LineClass.MODIFIED,d.Parser.LineType.INLINE|d.Parser.LineType.DELETED,d.DoubleEditorController.LineClass.MODIFIED),j=d.createObject(d.Parser.LineType.ADDED,d.DoubleEditorController.LineClass.BEFORE_ADDED,d.Parser.LineType.DELETED,d.DoubleEditorController.LineClass.BEFORE_DELETED),k=d.Parser.normalizeType(a,h);return c===e?g.push(j[k]):(g.push(i[k]),b===c&&g.push(d.DoubleEditorController.LineClass.FIRST),b!==e-1||f||g.push(d.DoubleEditorController.LineClass.LAST)),g.join(" ")},d.DoubleEditorController.colorizeInline=function(a,b,c){var e=f.getInstance(),g=d.createObject(d.Parser.LineType.ADDED,d.DoubleEditorController.CharsClass.ADDED,d.Parser.LineType.DELETED,d.DoubleEditorController.CharsClass.DELETED,d.Parser.LineType.INLINE,d.DoubleEditorController.CharsClass.MODIFIED,d.Parser.LineType.NULL,d.DoubleEditorController.CharsClass.UNCHANGED);b.forEach(function(b){if(b.type){var d=g[b.type];e.addOperation(a,function(){a.markText({line:b.from.line+c,ch:b.from["char"]},{line:b.to.line+c,ch:b.to["char"]},{className:d})})}})},d.DoubleEditorController.prototype.drawMap_=function(){this.mapElement_||(this.mapElement_=this.element_.querySelector(d.DoubleEditorController.CssSelector.MAP)),this.mapElement_.innerHTML="",this.mapElements_=[];var b=this.getModifiedEditor(),c=b.getDoc().size;this.offsets_.forEach(function(b,e){var f=this.lines_[e],g=d.DoubleEditorController.getMapElement(f,c);g&&(this.mapElements_.push(g),this.mapElement_.appendChild(g),a(g).on("click",d.bindContext(this.onMapElementClick_,this)))},this)},d.DoubleEditorController.getMapElement=function(a,b){var c=null,e=[d.Parser.LineType.ADDED,d.Parser.LineType.DELETED,d.Parser.LineType.INLINE],f=d.createObject(d.Parser.LineType.ADDED,d.DoubleEditorController.MapClass.ADDED,d.Parser.LineType.DELETED,d.DoubleEditorController.MapClass.DELETED,d.Parser.LineType.INLINE,d.DoubleEditorController.MapClass.MODIFIED,d.Parser.LineType.INLINE|d.Parser.LineType.ADDED,d.DoubleEditorController.MapClass.MODIFIED,d.Parser.LineType.INLINE|d.Parser.LineType.DELETED,d.DoubleEditorController.MapClass.MODIFIED),g=d.Parser.normalizeType(a.type,e);if(g){c=document.createElement("div"),c.className=[d.DoubleEditorController.MapClass.ELEMENT_BASE,f[g]].join(" ");var h=Math.round(100*a.modifiedFrom/b),i=Math.round(100*a.modifiedTo/b),j=d.clamp(i-h,1,1/0);c.style.top=h+"%",c.style.height=j+"%"}return c},d.DoubleEditorController.prototype.onMapElementClick_=function(a){var b=a.currentTarget,c=this.mapElements_.indexOf(b);c>-1&&this.setCurrentChange(c,!0)},d.DoubleEditorController.prototype.getOriginalEditor=function(){return this.codeMirrorOriginal_},d.DoubleEditorController.prototype.getModifiedEditor=function(){return this.codeMirrorModified_},window.CodeMirror=window.CodeMirror||e,d.DoubleEditorController}),define("diff/diff__editorcontroller_plain",["diff/diff__tools","codemirror","diff/diff__editorcontroller"],function(a,b){return a.PlainEditorController=function(b){a.PlainEditorController.super_.constructor.call(this,b)},a.inherit(a.PlainEditorController,a.EditorController),a.PlainEditorController.ClassName={BASE:"ring-diff__plain-editor",BASE_DIFF:"ring-diff"},a.PlainEditorController.prototype.editor_=null,a.PlainEditorController.prototype.setEnabledInternal=function(c){c===!0?(this.editorElement_=document.createElement("div"),this.editorElement_.className=[a.PlainEditorController.ClassName.BASE,a.PlainEditorController.ClassName.BASE_DIFF].join(" "),this.element_.appendChild(this.editorElement_),this.editor_=new b(this.editorElement_,a.PlainEditorController.getCodeMirrorOptions())):(this.editorElement_.parentNode.removeChild(this.editorElement_),this.editorElement_=null)},a.PlainEditorController.prototype.setContentInternal=function(a,b,c){var d=0===c[0].oldLines?b:a;this.editor_.getValue()!==d&&this.editor_.setValue(d)},a.PlainEditorController.prototype.getEditor=function(){return this.editor_},a.PlainEditorController.getCodeMirrorOptions=function(){return{lineNumbers:!0,readOnly:!0}},window.CodeMirror=window.CodeMirror||b,a.PlainEditorController}),define("diff/diff",["diff/diff__tools","global/global__modules","jquery","diff/diff__editorcontroller_single","diff/diff__editorcontroller_double","diff/diff__editorcontroller_plain"],function(a,b,c){function d(a,b,c,d,f){var g=new e(a,f);return g.setContent(b,c,d),g}var e=function(b,c){a.isDef(c)&&(c=Boolean(c&this.availableModes)?c:this.defaultMode),this.element_=a.isDef(b)?b:document.createElement("div"),this.setMode(a.isDef(c)?c:this.defaultMode)};return e.Mode={NONE_:0,ALL_:255,SINGLE_PANE:1,DOUBLE_PANE:2,TRIPLE_PANE:4,PLAIN_FILE:8,BINARY:16},e.EventType={AFTER_RENDER:"afterrender"},e.prototype.defaultMode=e.Mode.SINGLE_PANE,e.prototype.availableModes=e.Mode.PLAIN_FILE|e.Mode.SINGLE_PANE|e.Mode.DOUBLE_PANE,e.prototype.mode_=e.Mode.NONE_,e.prototype.element_=null,e.prototype.controller_=null,e.prototype.modeIsActive_=!1,e.prototype.setMode=function(a){Boolean(this.availableModes&a)&&this.mode_!==a&&(this.mode_=a)},e.prototype.activateMode=function(){if(this.modeIsActive_!==!0){this.modeIsActive_=!0;var b=this.mode_;if(this.modeToController_||(this.modeToController_=a.createObject(e.Mode.PLAIN_FILE,new a.PlainEditorController(this.element_),e.Mode.SINGLE_PANE,new a.SingleEditorController(this.element_),e.Mode.DOUBLE_PANE,new a.DoubleEditorController(this.element_))),null!==this.controller_&&this.controller_.setEnabled(!1),this.controller_=this.modeToController_[b],!a.isDef(this.controller_))throw new a.NoSuchModeException(a.NoSuchModeException.getMessage(b));this.controller_.setEnabled(!0)}},e.prototype.deactivateMode=function(){this.modeIsActive_!==!1&&(this.modeIsActive_=!1)},e.prototype.getMode=function(){return this.mode_},e.prototype.hasMode=function(a){return Boolean(this.mode_&a)},e.prototype.getController=function(){return this.controller_},e.prototype.setContent=function(a,b,c,d){var f=e.getModeByContent_(a,b);f&&!this.hasMode(f)&&(this.deactivateMode(),this.setMode(f)),this.activateMode(),this.controller_.setContent(a,b,c,d),this.getHandler().trigger(e.EventType.AFTER_RENDER)},e.getModeByContent_=function(b,c){var d=e.Mode.NONE_;return a.isEmptyString(b)||a.isEmptyString(c)?e.Mode.PLAIN_FILE:d},e.prototype.getHandler=function(){return this.eventHandler_||(this.eventHandler_=c({})),this.eventHandler_},e.prototype.getElement=function(){return this.element_},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.controller_.setEnabled(!1),this.controller_=null,this.element_.innerHTML="",this.element_=null,this.eventHandler_.off(),this.eventHandler_=null,this.mode_=null)},b.add("diff",{getDiffTool:{method:function(){return e},override:!0},singlePaneDiff:{method:function(a,b,c,f){return d(a,b,c,f,e.Mode.SINGLE_PANE)},override:!0},doublePaneDiff:{method:function(a,b,c,f){return d(a,b,c,f,e.Mode.DOUBLE_PANE)},override:!0},getDiffToolUtils:{method:function(){return a},override:!0}}),a.NoSuchModeException=function(a){this.name="d.NoSuchModeException",this.message=a},a.inherit(a.NoSuchModeException,Error),a.NoSuchModeException.getModeName=function(b){var c=a.createObject(e.Mode.ALL_,"ALL",e.Mode.BINARY,"BINARY",e.Mode.DOUBLE_PANE,"DOUBLE_PANE",e.Mode.NONE_,"NONE_",e.Mode.PLAIN_FILE,"PLAIN_FILE",e.Mode.SINGLE_PANE,"SINGLE_PANE",e.Mode.TRIPLE_PANE,"TRIPLE_PANE"),d=c[b];return d||(d=""),d},a.NoSuchModeException.getMessage=function(b){return"Unsupported mode "+a.NoSuchModeException.getModeName(b)+". It does not exist or exists, but is not supported by this DiffTool."},e}),define("ring",["global/global","header/header","menu/menu","footer/footer","diff/diff"],function(a){return a}),require("ring")});
//# sourceMappingURL=ring-diff.min.js.map